(globalThis.webpackChunkmomentum=globalThis.webpackChunkmomentum||[]).push([[3597,641],{85711:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>h});var s=o(30512),i=o(31624),n=o(64438),a=o(67652);const c=new n.Z("tab.focus.emptySave",.01),d=new(s.Z.extend({name:"FocusDataService",mixins:[i.X],unreactive:()=>({type:"focus",mode:localStorage.getItem("token")?a.Z.Sync:a.Z.Cache}),defaultPath:"focus",methods:{add(t,e){return e.focus?i.X.methods.add.apply(this,arguments):(c.info("Focus data service add with no focus",{userUuid:localStorage.getItem("userId"),stackTrace:m.utils.getStackTrace()}),Promise.reject())}}}));var l=o(2770);const r=s.Z.extend({name:"FocusModel",mixins:[l.Z],data:()=>({id:null,archived:!1,completed:!1,createdDate:m.now(),focus:null,forDate:null,todoId:null,props:["focus","completed","archived","forDate","createdDate","todoId"]}),methods:{updateData(t){l.Z.methods.updateData.call(this,t),this.completed=!!t.completed}}});var p=o(94234),u=o(20144),f=o(40531);const v=new(u.ZP.extend({name:"AutoFocusManager",data:()=>({activeFocus:null,loaded:!1}),computed:{autoFocusEnabled:()=>f.ax.autoFocus&&m.conditionalFeatures.featureEnabled("pinfocus")},watch:{autoFocusEnabled:{handler(t){t?this.getTopTodo().then((t=>this.activeFocus=this.createFocusFromTodo(t))):this.activeFocus=null},immediate:!0},"activeFocus.focus"(t){this.activeFocus&&m.trigger("todo:set:title",this.activeFocus.todoId,t)}},created(){m.on("todo:globalChange",this.onTodoChange),m.on("todo:loadingStateChange",this.onLoadingStateChange),m.on("todo:activeListLoaded",this.setLoaded),this.getInitialLoadedState()},destroyed(){m.off("todo:globalChange",this.onTodoChange),m.off("todo:loadingStateChange",this.onLoadingStateChange),m.off("todo:activeListLoaded",this.setLoaded)},methods:{getInitialLoadedState(){return m.widgetManager.getWidgetAsync("todo").then((t=>{var e,o;"Done"===(null===(e=t.manager.activeProvider.selectedList())||void 0===e||null===(o=e.itemCollection)||void 0===o?void 0:o.listStatus)&&(this.loaded=!0)}))},setLoaded(){this.loaded=!0},toggleComplete(){this.activeFocus&&(this.activeFocus.completed=!this.activeFocus.completed,m.trigger("todo:set:done",this.activeFocus.todoId,this.activeFocus.completed))},onLoadingStateChange(){this.autoFocusEnabled&&this.getTopTodo().then((t=>{var e;!t||this.activeFocus&&(t.get("id")||t.id)===this.activeFocus.todoId?t||null!==(e=this.activeFocus)&&void 0!==e&&e.completed||(this.activeFocus=null):this.activeFocus=this.createFocusFromTodo(t)}))},getTopTodo:()=>m.widgetManager.getWidgetAsync("todo").then((t=>t.getTopTodo())),onTodoChange(...t){var e,o,s;const i=t[0];if(t.find((t=>t&&(t.ignoreRender||t.silent)))||!this.autoFocusEnabled||null==i||!i.changed||!Object.keys(i.changed).length||!1===(null===(e=i.changed)||void 0===e?void 0:e.isLoading))return;const n=(null===(o=i.changed)||void 0===o?void 0:o.completedDate)||(null===(s=i.changed)||void 0===s?void 0:s.modifiedServer);this.getTopTodo().then((t=>{var e,o;t?this.activeFocus=this.createFocusFromTodo(t):null!==(e=this.activeFocus)&&void 0!==e&&e.todoId&&(i.get("id")||i.id).includes(null===(o=this.activeFocus)||void 0===o?void 0:o.todoId)&&(this.activeFocus.completed=i.get("done"),n||(this.activeFocus=null))}))},createFocusFromTodo(t){if(!t)return null;let e=new r;return e.updateData({focus:t.get("title"),archived:!1,completed:t.get("done"),createdDate:m.now(),id:m.utils.uuidv4(),todoId:t.get("id")||t.id,forDate:m.utils.getDateString()}),e}}}));var g=o(81405);const h=new(s.Z.extend({name:"FocusCollection",mixins:[p.FZ,p.mX],unreactive:()=>({type:"focus",Model:r,dataService:d,newModel:null,analytics:new g.ZP({feature:"focus"})}),computed:{emptyFocus(){return!this.activeFocus.focus},activeFocusInCollection(){const t=m.utils.getDateString(),e=Object.values(this.data.items).filter((e=>!e.archived&&e.forDate===t)).sort(((t,e)=>e.createdDate-t.createdDate));return e.length?e[0]:null},activeFocus(){return v.activeFocus||this.activeFocusInCollection||this.newModel},loaded(){return(!v.autoFocusEnabled||v.loaded)&&this.data.loaded}},created(){this.instantiateNewModel(),m.on("focus:pin",this.onFocusPin),m.on("todo:globalChange",this.onTodoChange),m.on("newDay",this.archiveAll)},destroyed(){m.off("focus:pin",this.onFocusPin),m.off("todo:globalChange",this.onTodoChange),m.off("newDay",this.archiveAll)},methods:{instantiateNewModel(){this.newModel=new this.Model,this.newModel.copyProperties()},async save(){const t=this.emptyFocus;v.activeFocus||this.activeFocus.editProps.focus&&await this[this.emptyFocus?"add":"update"](this.activeFocus),t&&this.instantiateNewModel(),this.analytics.capture("focus "+(t?"add":"edit"),{position:localStorage.getItem("pomodoro-showing")?"pomodoro":"default"}),this.activeFocus.commitChanges(),this.activeFocus.todoId&&m.trigger("todo:set:title",this.activeFocus.todoId,this.activeFocus.focus)},archive(){this.analytics.capture("focus clear",{completed:this.activeFocus.completed}),v.activeFocus?f.ax.autoFocus=!1:p.FZ.methods.archive.call(this,this.activeFocus)},archiveAll(){Object.values(this.data.items).forEach((t=>this.archive(t)))},toggleComplete(){const t=this.activeFocus.completed;this.analytics.capture("focus "+(t?"uncomplete":"complete"),Object.assign({position:localStorage.getItem("pomodoro-showing")?"pomodoro":"default"},t?{}:{autofocus:v.autoFocusEnabled})),v.activeFocus?v.toggleComplete():(this.activeFocus.completed=!t,this.dataService.update(this.activeFocus.id,{completed:!t}).then((()=>{this.activeFocus.todoId&&m.trigger("todo:set:done",this.activeFocus.todoId,!t)})).catch((e=>{throw this.activeFocus.completed=t,e})))},onFocusPin(t){f.ax.autoFocus=!1;let e=v.createFocusFromTodo(t);e&&e.focus&&(e.copyProperties(),this.add(e))},onTodoChange(...t){var e,o;const s=t[0];if(t.find((t=>t&&(t.ignoreRender||t.silent)))||!this.activeFocus||!Object.keys(this.data.items).length||null==s||!s.changed)return;let i=Object.values(this.data.items).find((t=>{var e;return t.todoId&&t.todoId===((null===(e=s.get)||void 0===e?void 0:e.call(s,"id"))||(null==s?void 0:s.id))}));if(!i)return;if(null!==(e=t[0])&&void 0!==e&&null!==(o=e.changed)&&void 0!==o&&o.deleted)return void this.archive();const n=s.get("done"),a=s.get("title");i.completed===n&&i.focus===a||(i.completed=n,i.focus=a,this.dataService.update(i.id,{completed:n,focus:a}))}}}))},2039:(t,e,o)=>{"use strict";o.d(e,{Z:()=>s});const s={focus:{name:"Focus",icon:o(20888)},search:{name:"Search",feature:"search in center",icon:o(47997)}}},47539:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>c});var s=o(8081),i=o.n(s),n=o(23645),a=o.n(n)()(i());a.push([t.id,'.inline-number-input[data-v-b74846d4]{display:inline-flex;position:relative;flex-direction:column}.inline-number-input.disabled[data-v-b74846d4]{opacity:var(--opacity-stop-5)}.inline-number-input .hidden-data[data-v-b74846d4]{min-width:5px;height:0;visibility:hidden;flex-shrink:1;padding:0 1px;font-size:inherit;font-weight:inherit}.inline-number-input input[data-v-b74846d4]{width:0;min-width:100%;margin:-4px 0;padding:4px 1px;border:none;color:var(--color-stop-5);font-size:inherit;font-weight:inherit}.inline-number-input[data-v-b74846d4]::after{content:"";height:.1rem;position:absolute;right:0;bottom:-2px;left:0;background-color:var(--color-stop-2)}',""]);const c=a},36128:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>c});var s=o(8081),i=o.n(s),n=o(23645),a=o.n(n)()(i());a.push([t.id,".inline-select[data-v-6fe379c6]{position:relative}.inline-select.disabled[data-v-6fe379c6]{opacity:var(--opacity-stop-5)}.inline-select .inline-select-inner[data-v-6fe379c6]{display:flex;align-items:center;gap:4px}.inline-select .inline-select-inner .icon[data-v-6fe379c6]{--icon-size: 11px;display:block}.inline-select select[data-v-6fe379c6]{width:unset;position:absolute;z-index:1;opacity:0;padding:0 !important;border:none !important;font-size:.8125rem;line-height:1.2rem;text-align:left;cursor:pointer;inset:-4px}",""]);const c=a},27060:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>c});var s=o(8081),i=o.n(s),n=o(23645),a=o.n(n)()(i());a.push([t.id,"[data-v-50f1f150] .app{--header-height: 50px;padding:0}[data-v-50f1f150] .app .app-body{padding-bottom:var(--app-padding)}[data-v-50f1f150] .app-header{border-bottom:1px solid var(--color-stop-2)}[data-v-50f1f150] .app-header .header-left{width:auto}[data-v-50f1f150] .app-footer{padding:0 var(--app-padding) var(--app-padding)}[data-v-50f1f150] .app-footer .button{width:100%;padding:8px 27px;font-size:.875rem;font-weight:600;text-align:center}.app-popup[data-v-50f1f150]{--app-padding: 15px;padding:0}.one-click-focus[data-v-50f1f150]{min-width:200px;display:flex;align-items:center}.one-click-focus .left[data-v-50f1f150]{flex-grow:1}.one-click-focus .description[data-v-50f1f150]{margin-top:4px;color:var(--color-stop-4);font-size:.8125rem}",""]);const c=a},8318:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>c});var s=o(8081),i=o.n(s),n=o(23645),a=o.n(n)()(i());a.push([t.id,'.app-confirm-cancel[data-v-2dc4d4cc]{--color-bg: transparent;max-width:290px;position:relative;padding:12px 15px}.app-confirm-cancel[data-v-2dc4d4cc]  .app-confirm-title{margin-bottom:1rem}.focus-mode-settings .text[data-v-2dc4d4cc]{color:var(--color-stop-4);font-size:.75rem;text-transform:uppercase}.focus-mode-settings .options[data-v-2dc4d4cc]{display:flex;flex-direction:column;font-size:.9rem}.focus-mode-settings .options .focus-mode-settings-option[data-v-2dc4d4cc] .inline-select-label{margin-bottom:-0.5px;color:var(--color-stop-5);font-size:.8125rem;font-weight:600}.focus-mode-settings .options .focus-mode-settings-option[data-v-2dc4d4cc].current-focus-option{cursor:default}.focus-mode-settings .options .focus-mode-settings-option[data-v-2dc4d4cc].current-focus-option .app-name{color:var(--color-stop-4);font-size:.8125rem;font-weight:400}.focus-mode-settings .options .focus-mode-settings-option[data-v-2dc4d4cc].pomodoro-option .inline-number-input{max-width:30px;font-size:.8125rem;font-weight:600}.focus-mode-settings .options .focus-mode-settings-option[data-v-2dc4d4cc] .base-dropdown{pointer-events:none}.focus-mode-settings .options .focus-mode-settings-option[data-v-2dc4d4cc]::before,.focus-mode-settings .options .focus-mode-settings-option[data-v-2dc4d4cc]:last-child::after{content:"";width:calc(100% - var(--app-padding)*2);height:.0625rem;display:flex;margin:auto;background-color:var(--color-stop-2)}.focus-mode-settings .options .focus-mode-settings-option[data-v-2dc4d4cc]:first-child::before{opacity:0}.focus-edit[data-v-2dc4d4cc]{flex-shrink:0;opacity:var(--opacity-stop-5);margin:-7px -5px -9px 0;padding:5px;cursor:pointer}.focus-mode-settings[data-v-2dc4d4cc] .focuses{width:100%;flex-direction:row}.focus-mode-settings[data-v-2dc4d4cc] .focuses::before{content:none !important}.focus-mode-settings[data-v-2dc4d4cc] .focuses .focus-wrapper{width:100%;min-width:0;display:flex;align-items:center;justify-content:flex-start}.focus-mode-settings[data-v-2dc4d4cc] .focuses .prompt{flex-grow:1}.focus-mode-settings[data-v-2dc4d4cc] .focuses .focus-content{font-size:unset}.focus-mode-settings[data-v-2dc4d4cc] .focuses .greeting{width:auto;min-width:0;max-width:100%;display:block !important;line-height:unset}.focus-mode-settings[data-v-2dc4d4cc] .focuses .three-col-layout{display:flex;font-size:unset !important}.focus-mode-settings[data-v-2dc4d4cc] .focuses .three-col-layout--right,.focus-mode-settings[data-v-2dc4d4cc] .focuses .three-col-layout--left{display:none !important}.focus-mode-settings[data-v-2dc4d4cc] .focuses .three-col-layout--center{min-width:0;display:block;flex-grow:1}.focus-mode-settings[data-v-2dc4d4cc] .focuses .hidden-data{display:none}.focus-mode-settings[data-v-2dc4d4cc] .focuses .todays-focus{padding:0;color:var(--color-text);font-size:.875rem;font-weight:600;text-align:left}.focus-mode-settings[data-v-2dc4d4cc] .focuses .focus-input{margin:-4px 0 -1px;padding-right:0;padding-left:0;overflow-y:hidden;border-bottom:none;color:var(--color-stop-5);font-size:.875rem;font-weight:600;line-height:unset;text-align:left}',""]);const c=a},41063:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>c});var s=o(8081),i=o.n(s),n=o(23645),a=o.n(n)()(i());a.push([t.id,".focus-mode-settings-option[data-v-0a26926a]{cursor:pointer}.focus-mode-settings-option .option-inner[data-v-0a26926a]{height:60px;display:flex;align-items:center;padding:0 var(--app-padding)}.focus-mode-settings-option .icon[data-v-0a26926a]{--icon-size: 18px;display:block;flex-shrink:0;opacity:var(--opacity-stop-5);margin-right:14px}.focus-mode-settings-option .left[data-v-0a26926a]{min-width:0;flex-grow:1}.focus-mode-settings-option .left .top[data-v-0a26926a]{display:flex;align-items:center;gap:8px}.focus-mode-settings-option .left .top .app-name[data-v-0a26926a]{font-size:.875rem;font-weight:600}.focus-mode-settings-option .left .description[data-v-0a26926a]{display:flex;align-items:center;margin-top:4px;color:var(--color-stop-4);font-size:.8125rem;white-space:nowrap;gap:3px}.focus-mode-settings-option[data-v-0a26926a] .toggle-switch{width:39px;height:22px;flex-shrink:0}.focus-mode-settings-option[data-v-0a26926a] .toggle-switch::before{--size: 16px;top:0;left:0;margin:3px}.focus-mode-settings-option[data-v-0a26926a] .toggle-switch.on::before{transform:translateX(17px)}",""]);const c=a},79728:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>c});var s=o(8081),i=o.n(s),n=o(23645),a=o.n(n)()(i());a.push([t.id,"\n/* stylelint-disable */\n.app-confirm-cancel[data-v-5171a2e0] { position: absolute; isolation: isolate; display: flex; flex-direction: column; padding: var(--app-padding); margin: auto; min-height: var(--overlay-min-height, unset); height: 100%; width: 100%;\n}\n\t/* background in separate element so it can have higher z-index than overlay */\n.app-confirm-cancel[data-v-5171a2e0]:after { position: absolute; inset: 0; z-index: -1; content: ''; background-color: var(--color-bg);\n}\n.app-confirm-cancel-message[data-v-5171a2e0] { flex-grow: 1; display: flex; justify-content: center; flex-direction: column; gap: 5px; text-align: center;\n}\n.app-confirm-title[data-v-5171a2e0] { line-height: 130%;\n}\n.app-confirm-description[data-v-5171a2e0] { margin-bottom: 11px; padding: 0; color: var(--color-stop-5);\n}\n.app-confirm-cancel-buttons[data-v-5171a2e0] { display: flex; width: 100%; gap: 0.5rem;\n}\n.app-confirm-cancel-buttons *[data-v-5171a2e0] { flex-grow: 1;\n}\n",""]);const c=a},13714:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>c});var s=o(8081),i=o.n(s),n=o(23645),a=o.n(n)()(i());a.push([t.id,"\n/* stylelint-disable */\n\t/* inset: auto !important; Override to remove awkward positioning properties from style.css. Remove this whole declaration when that code is removed */\n.toggle-switch[data-v-463006a2] { inset: auto !important;\n}\n.toggle-switch[data-v-463006a2] { --switch-bg: var(--color-stop-3); height: 17px; width: 28px; position: relative; display: inline-block; background: var(--switch-bg); border-radius: 50px; box-shadow: inset 0 0 0 1px rgba(0,0,0,0.0); transition: all 0.1s ease; isolation: isolate;\n}\n.toggle-switch.on[data-v-463006a2] { --switch-bg: #7edc74;\n}\n.toggle-switch[data-v-463006a2]:before { --size: 11px; height: var(--size); width: var(--size); margin: 2px 1px; position: absolute; top: 1px; left: 3px; z-index: 2; background: rgba(255,255,255,1); border-radius: var(--size); box-shadow: 0 0 0 1px rgba(0,0,0,0.0); content: ''; transition: all 0.2s ease;\n}\n.toggle-switch.on[data-v-463006a2]:before { background: white; transform: translateX(10px);\n}\n",""]);const c=a},61667:t=>{"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},56710:(t,e,o)=>{"use strict";o.d(e,{Z:()=>c});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-confirm-cancel"},[e("div",{staticClass:"app-confirm-cancel-message"},[e("div",{staticClass:"app-confirm-title"},[t._v(t._s(t.title))]),t._v(" "),t.description?e("p",{staticClass:"app-confirm-description"},[t._v(t._s(t.description))]):t._e()]),t._v(" "),e("div",{staticClass:"app-confirm-cancel-buttons"},[e("button",{staticClass:"button",attrs:{"data-test":"confirm"},on:{click:t.confirm}},[t._v(t._s(t.confirmText))]),t._v(" "),e("button",{staticClass:"button button-neutral",attrs:{"data-test":"cancel"},on:{click:t.cancel}},[t._v(t._s(t.cancelText))])])])};s._withStripped=!0;var i=o(65550),n=o(84315);const a={name:"AppConfirmCancel",props:{title:{type:String,default:""},description:{type:[String,void 0],default:void 0},confirm:{type:Function,default:()=>{}},confirmText:{type:String,default:"Yes"},cancel:{type:Function,default:()=>{}},cancelText:{type:String,default:"No"}},emits:["confirm","cancel"],unreactive:()=>({uniqueId:(0,n.uuidv4)()}),mounted(){i.Z.registerEventListener("cancelConfirmNo"+this.uniqueId,"keyup",27,this.cancel),i.Z.registerEventListener("cancelConfirmYes"+this.uniqueId,"keyup",13,this.confirm)},destroyed(){i.Z.removeEventListener("cancelConfirmNo"+this.uniqueId,"keyup",27,this.cancel),i.Z.removeEventListener("cancelConfirmYes"+this.uniqueId,"keyup",13,this.confirm)}};o(37809);const c=(0,o(51900).Z)(a,s,[],!1,null,"5171a2e0",null).exports},10641:(t,e,o)=>{"use strict";o.d(e,{Z:()=>n});var s=function(){return(0,this._self._c)("div",{staticClass:"toggle-switch",class:{on:this.value}})};s._withStripped=!0;const i={name:"ToggleSwitch",props:{value:{type:Boolean,default:!1}}};o(88333);const n=(0,o(51900).Z)(i,s,[],!1,null,"463006a2",null).exports},11450:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>N});var s=function(){var t=this,e=t._self._c;return e("app-popup",{attrs:{region:"top-left",position:"bottom-right",width:325,focused:t.viewStateStore.focused},on:{close:t.closePopup},nativeOn:{click:function(e){return t.viewStateStore.focus()}}},[e("app-view",{scopedSlots:t._u([{key:"header",fn:function(){return[e("app-header",{scopedSlots:t._u([{key:"left",fn:function(){return[e("span",{staticClass:"app-header-name"},[t._v("Focus Mode")])]},proxy:!0},{key:"right",fn:function(){return[e("base-dropdown",{ref:"settingsDropdown",attrs:{"container-class":"app"},scopedSlots:t._u([{key:"toggle",fn:function(){return[e("div",{staticClass:"icon-wrapper more-toggle"},[e("inline-svg",{staticClass:"icon icon-trash",attrs:{src:o(66262)}})],1)]},proxy:!0}])},[t._v(" "),e("base-dropdown-option",{on:{click:t.toggleOneClickFocus}},[e("div",{staticClass:"one-click-focus",class:{on:t.oneClickFocusOn}},[e("div",{staticClass:"left"},[e("div",[t._v("1-Click Focus")]),t._v(" "),e("div",{staticClass:"description"},[t._v("Skip setup window")])]),t._v(" "),e("div",{staticClass:"right"},[e("span",{staticClass:"toggle-slider"},[e("inline-svg",{staticClass:"toggle-switch",attrs:{src:o(35966)}})],1)])])])],1)]},proxy:!0}])})]},proxy:!0},{key:"body",fn:function(){return[e("focus-mode-settings")]},proxy:!0},{key:"footer",fn:function(){return[t.store.focusModeActive?e("div",{staticClass:"button button-primary",attrs:{"data-test":"stop-focus-mode"},on:{click:t.stopAndClose}},[t._v("Stop focusing")]):e("div",{staticClass:"button button-primary",attrs:{"data-test":"start-focus-mode"},on:{click:function(e){return t.$emit("start")}}},[t._v("Start focusing")])]},proxy:!0}])})],1)};s._withStripped=!0;var i=o(28670),n=o(14582),a=o(24871),c=function(){var t,e,o,s,i,n,a=this,c=a._self._c;return c("div",{staticClass:"focus-mode-settings"},[c("div",{staticClass:"options"},[c("focus-mode-settings-option",{staticClass:"current-focus-option",attrs:{"app-name":"Focus task",icon:"icon/focus"},scopedSlots:a._u([{key:"description",fn:function(){return[c("div",{staticClass:"description"},[c("focus",{ref:"focus",attrs:{"in-pomodoro":!0,"pomodoro-message":"No focus set"},scopedSlots:a._u([{key:"right-when-not-editing",fn:function({editFocus:t}){return[c("base-icon",{staticClass:"focus-edit",attrs:{src:"icon-edit",size:"23px"},on:{click:t}})]}}])})],1)]},proxy:!0},{key:"right",fn:function(){return[c("div")]},proxy:!0}])}),a._v(" "),c("focus-mode-settings-option",a._b({attrs:{"toggle-value":null===(t=a.settings.apps)||void 0===t||null===(e=t.pomodoro)||void 0===e?void 0:e.enabled},nativeOn:{click:function(t){var e,o;return a.setSettingValue("pomodoro","enabled",!(null!==(e=a.settings.apps)&&void 0!==e&&null!==(o=e.pomodoro)&&void 0!==o&&o.enabled))}},scopedSlots:a._u([{key:"description",fn:function(){var t,e;return[null!==(t=a.settings.apps)&&void 0!==t&&null!==(e=t.pomodoro)&&void 0!==e&&e.enabled?c("div",{staticClass:"description"},[c("span",[a._v("Focus for ")]),a._v(" "),c("inline-number-input",{attrs:{value:a.pomodoroSettings.focusDuration.toString(),"data-test":"pomodoro-focus-timer-input",min:1,max:120,default:25,debounce:1e3},on:{input:t=>a.savePomodoroSettingsToCustomization("focusDuration",t)},nativeOn:{click:function(t){t.stopPropagation()}}}),a._v(" "),c("span",[a._v(" mins, rest for ")]),a._v(" "),c("inline-number-input",{attrs:{value:a.pomodoroSettings.restDuration.toString(),"data-test":"pomodoro-rest-timer-input",min:1,max:120,default:5,debounce:1e3},on:{input:t=>a.savePomodoroSettingsToCustomization("restDuration",t)},nativeOn:{click:function(t){t.stopPropagation()}}}),a._v(" "),c("span",[a._v(" mins")])],1):c("div",{staticClass:"description"},[a._v(a._s(a.apps.pomodoro.description))])]},proxy:!0}])},"focus-mode-settings-option",a.pomodoroOptionProps,!1)),a._v(" "),c("focus-mode-settings-option",a._b({attrs:{"toggle-value":null===(o=a.settings.apps)||void 0===o||null===(s=o.soundscapes)||void 0===s?void 0:s.enabled},nativeOn:{click:function(t){var e,o;return a.setSettingValue("soundscapes","enabled",!(null!==(e=a.settings.apps)&&void 0!==e&&null!==(o=e.soundscapes)&&void 0!==o&&o.enabled))}},scopedSlots:a._u([{key:"description",fn:function(){var t,e,o,s;return[null!==(t=a.settings.apps)&&void 0!==t&&null!==(e=t.soundscapes)&&void 0!==e&&e.enabled?c("div",{staticClass:"description"},[a._v("\n\t\t\t\t\tScene:\n\t\t\t\t\t"),c("inline-select",{attrs:{options:a.soundscapesSelectOptions,value:(null===(o=a.settings.apps)||void 0===o||null===(s=o.soundscapes)||void 0===s?void 0:s.preset)||"Random","data-test":"soundscapes-scene-select"},on:{input:t=>a.setSettingValue("soundscapes","preset",t)},nativeOn:{click:function(t){t.stopPropagation()}}})],1):c("div",{staticClass:"description"},[a._v(a._s(a.apps.soundscapes.description))])]},proxy:!0}])},"focus-mode-settings-option",a.soundscapesOptionProps,!1)),a._v(" "),c("focus-mode-settings-option",a._b({directives:[{name:"click-outside",rawName:"v-click-outside",value:()=>{var t,e;return null===(t=a.$refs.tabStashDropdown)||void 0===t||null===(e=t.closeDropdown)||void 0===e?void 0:e.call(t)},expression:"() => $refs.tabStashDropdown?.closeDropdown?.()"}],attrs:{"toggle-value":null===(i=a.settings.apps)||void 0===i||null===(n=i.tabStash)||void 0===n?void 0:n.enabled},nativeOn:{click:function(t){return a.toggleTabStashSetting.apply(null,arguments)}},scopedSlots:a._u([{key:"description",fn:function(){return[c("div",{staticClass:"description"},[a._v(a._s(a.apps.tabStash.description))])]},proxy:!0},{key:"right",fn:function(){return[c("base-dropdown",{ref:"tabStashDropdown",scopedSlots:a._u([{key:"toggle",fn:function(){var t,e;return[c("toggle-switch",{ref:"tabStashDropdownToggle",attrs:{value:null===(t=a.settings.apps)||void 0===t||null===(e=t.tabStash)||void 0===e?void 0:e.enabled}})]},proxy:!0}])},[a._v(" "),c("app-confirm-cancel",{attrs:{title:"Turning this on will stash all your open tabs. Do you want to proceed?",cancel:()=>{var t,e;return null===(t=a.$refs.tabStashDropdown)||void 0===t||null===(e=t.closeDropdown)||void 0===e?void 0:e.call(t)},"cancel-text":"No",confirm:()=>{var t,e;a.setSettingValue("tabStash","enabled",!0),null===(t=a.$refs.tabStashDropdown)||void 0===t||null===(e=t.closeDropdown)||void 0===e||e.call(t)},"confirm-text":"Yes"}})],1)]},proxy:!0}])},"focus-mode-settings-option",a.tabStashOptionProps,!1))],1)])};c._withStripped=!0;var d=o(10641),l=o(93287),r=o(56710),p=o(40531),u=o(27314),f=o(65228),v=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"inline-select",class:{disabled:t.disabled}},[e("div",{staticClass:"inline-select-inner"},[e("div",{staticClass:"inline-select-label"},[t._v(t._s(t.value))]),t._v(" "),t.showChevron?e("inline-svg",{staticClass:"icon",attrs:{src:o(67277)}}):t._e()],1),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedOption,expression:"selectedOption"}],attrs:{disabled:t.disabled},on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedOption=e.target.multiple?o:o[0]},function(e){return t.$emit("input",t.selectedOption)}]}},t._l(t.options,(function(o){return e("option",{key:o},[t._v("\n\t\t\t"+t._s(o)+"\n\t\t")])})),0)])};v._withStripped=!0;var g=o(20144);const h=(0,g.aZ)({name:"InlineSelect",props:{options:{type:Array,required:!0},value:{type:String,required:!0},showChevron:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},emits:["input"],data(){return{selectedOption:this.value}}});o(76439);var b=o(51900);const x=(0,b.Z)(h,v,[],!1,null,"6fe379c6",null).exports;var w=function(){var t=this,e=t._self._c;return e("div",{staticClass:"focus-mode-settings-option"},[e("div",{staticClass:"option-inner"},[e("inline-svg",{staticClass:"icon",attrs:{src:o(6793)(`./${t.icon}.svg`)}}),t._v(" "),e("div",{staticClass:"left"},[e("div",{staticClass:"top"},[e("div",{staticClass:"app-name"},[t._v(t._s(t.appName))]),t._v(" "),t.showPlusBadge?e("span",{staticClass:"badge badge-plus"},[t._v("PLUS")]):t._e()]),t._v(" "),t._t("description")],2),t._v(" "),t._t("right",(function(){return[e("toggle-switch",{attrs:{value:t.toggleValue}})]}))],2)])};w._withStripped=!0;const y={name:"FocusModeSettingsApp",components:{ToggleSwitch:d.Z},inject:["viewStateStore","store"],props:{appName:{type:String,required:!0},icon:{type:String,required:!0},toggleValue:{type:Boolean,default:!0},showPlusBadge:{type:Boolean,default:!1}},emits:["toggle"]};o(66219);const S=(0,b.Z)(y,w,[],!1,null,"0a26926a",null).exports;var _=o(66383),F=o(80927),C=o(84820),k=o(81405),Z=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"inline-number-input",class:{disabled:t.disabled,readonly:t.readonly}},[e("div",{staticClass:"hidden-data"},[t._v(t._s(t.innerValue))]),t._v(" "),e("input",{staticClass:"hide-controls",attrs:{type:"number",disabled:t.disabled,readonly:t.readonly,min:t.min,max:t.max},domProps:{value:t.innerValue},on:{input:t.debouncedUpdate}})])};Z._withStripped=!0;const T=(0,g.aZ)({name:"InlineNumberInput",props:{value:{type:String,required:!0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},default:{type:Number,default:1},min:{type:Number,default:0},max:{type:Number,default:9999},debounce:{type:Number,default:0}},emits:["input"],setup:()=>({debounceTimeout:void 0}),data(){return{innerValue:this.value}},watch:{value(){this.innerValue=this.value}},methods:{debouncedUpdate(t){let e=t.target.value;if(0===this.debounce)return this.$emit("input",e);this.innerValue=e,clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout((()=>{e=Number(e||this.default).toString(),isNaN(Number(e))?e=this.default.toString():Number(e)<this.min?e=this.min.toString():Number(e)>this.max&&(e=this.max.toString()),this.$emit("input",e)}),this.debounce)}}});o(71012);const D=(0,b.Z)(T,Z,[],!1,null,"b74846d4",null).exports,I=new k.ZP({feature:"focus mode"}),O={name:"FocusModeSettingsApp",components:{ToggleSwitch:d.Z,BaseDropdown:l.Z,AppConfirmCancel:r.Z,InlineSelect:x,FocusModeSettingsOption:S,Focus:F.default,BaseIcon:C.Z,InlineNumberInput:D},setup(){const{pomodoro:t,soundscapes:e,tabStash:o}=f.apps;return{apps:f.apps,scenes:u.scenes,soundscapesSelectOptions:["Random",...u.scenes.filter((t=>!["Random","Custom"].includes(t.name))).map((t=>t.name))],timeSelectOptions:[5,10,15,20,25,30,35,40,45,50,55,60],pomodoroOptionProps:{appName:t.name,icon:t.icon,class:"pomodoro-option","data-test":"pomodoro-toggle"},soundscapesOptionProps:{appName:e.name,icon:e.icon,"data-test":"soundscapes-toggle"},tabStashOptionProps:{appName:o.name,icon:o.icon,"data-test":"tab-stash-toggle"},viewStateStore:(0,g.f3)("viewStateStore"),store:(0,g.f3)("store")}},data:()=>({settings:p.tJ.focusModeSettings||{},pomodoroSettings:JSON.parse(m.models.customization.get("pomodoroSettingsStr"))}),methods:{savePomodoroSettingsToCustomization(t,e){this.pomodoroSettings[t]=e,m.models.customization.save("pomodoroSettingsStr",JSON.stringify(this.pomodoroSettings))},async toggleApp(t,e){const o=this.store.appActivationData||{};if(e){const e=await this.apps[t].enable();if(!e)return;o[t]=e}else await this.apps[t].disable({enableResult:o[t]}),delete o[t];await this.store.update({appActivationData:o})},async setSettingValue(t,e,o){this.settings.apps||(this.settings.apps={}),this.settings.apps[t]||(this.settings.apps[t]={}),this.settings.apps[t][e]=o,p.tJ.focusModeSettings=this.settings,this.store.focusModeActive&&("enabled"===e?await this.toggleApp(t,o):this.apps[t].shouldDisableEnableOnSettingChangeWhileFocusing&&(await this.toggleApp(t,!1),await this.toggleApp(t,!0)),(0,_.xk)()),"enabled"===e&&I.capture("feature "+(o?"enable":"disable"),{app:t})},toggleTabStashSetting(){var t,e,o,s,i,n;!this.store.focusModeActive||null!==(t=this.settings.apps)&&void 0!==t&&null!==(e=t.tabStash)&&void 0!==e&&e.enabled?this.setSettingValue("tabStash","enabled",!(null!==(o=this.settings.apps)&&void 0!==o&&null!==(s=o.tabStash)&&void 0!==s&&s.enabled)):null===(i=this.$refs.tabStashDropdown)||void 0===i||null===(n=i.openDropdown)||void 0===n||n.call(i)},closePopup(){return this.$emit("close")}}};o(53500);const M=(0,b.Z)(O,c,[],!1,null,"2dc4d4cc",null).exports;var P=o(39226);const z={name:"FocusModeApp",components:{AppPopup:i.Z,AppHeader:n.Z,AppView:a.Z,FocusModeSettings:M,BaseDropdown:l.Z,BaseDropdownOption:P.Z},setup:()=>({viewStateStore:(0,g.f3)("viewStateStore"),store:(0,g.f3)("store"),capture:(0,g.f3)("capture")}),computed:{oneClickFocusOn:()=>p.tJ.focusModeSettings.oneClickFocus},methods:{async stopAndClose(){this.closePopup(),this.$emit("stop")},closePopup(){return this.$emit("close")},toggleOneClickFocus(){const t=p.tJ.focusModeSettings;t.oneClickFocus=!t.oneClickFocus,p.tJ.focusModeSettings=t}}};o(41789);const N=(0,b.Z)(z,s,[],!1,null,"50f1f150",null).exports},71012:(t,e,o)=>{var s=o(47539);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals),(0,o(45346).Z)("668cfeb2",s,!1,{})},76439:(t,e,o)=>{var s=o(36128);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals),(0,o(45346).Z)("0200104a",s,!1,{})},41789:(t,e,o)=>{var s=o(27060);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals),(0,o(45346).Z)("7f4d471a",s,!1,{})},53500:(t,e,o)=>{var s=o(8318);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals),(0,o(45346).Z)("84b0b5ca",s,!1,{})},66219:(t,e,o)=>{var s=o(41063);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals),(0,o(45346).Z)("22b0b11f",s,!1,{})},37809:(t,e,o)=>{var s=o(79728);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals),(0,o(45346).Z)("0f014e39",s,!1,{ssrId:!0})},88333:(t,e,o)=>{var s=o(13714);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals),(0,o(45346).Z)("27c56676",s,!1,{ssrId:!0})}}]);