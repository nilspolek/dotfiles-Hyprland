/*! For license information please see 9759.js.LICENSE.txt */
"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[9759],{460445:(e,t,r)=>{r.d(t,{o:()=>b});var n=r(202784),a=r(91322),o=r(834166),s=r(972205),i=r(552322);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}e=r.hmd(e);var u,c=["name","rows","format","defaultHelperText","successHelperText","label"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,s,i=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&u(e);var v,h,w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},S={resize:"none"},b=(0,n.memo)((0,n.forwardRef)(w((function(e,t){var r=e.name,l=e.rows,u=e.format,d=e.defaultHelperText,f=void 0===d?"":d,y=e.successHelperText,v=void 0===y?"":y,h=e.label,w=m(e,c),b=g((0,o.U$)(r),3),x=b[0],T=b[1],k=b[2],C=(0,n.useMemo)((function(){var e;return T.touched&&T.error?((0,a.triggerInputErrors)({error:T.error,label:h}),T.error):0===(null===(e=T.value)||void 0===e?void 0:e.length)?f:v}),[f,v,T,h]),A=(0,n.useCallback)((function(e){u&&e.target.value&&k.setValue(u(e.target.value)),x.onBlur(e)}),[u,k,x]),M=(0,n.useMemo)((function(){return l?(0,i.jsx)(s.NativeTextArea,p({rows:l,maxLength:w.maxLength,style:S,placeholder:w.placeholder,testID:w.testID},u?p(p({},x),{},{onBlur:A}):x)):null}),[l,w,x,u,A]),I=(0,n.useMemo)((function(){return M?p(p({},w),{},{inputNode:M}):p(p(p({},w),x),u?{onBlur:A}:null)}),[w,x,u,A,M]);return(0,i.jsx)(s.TextInput,p({variant:T.touched&&T.error?"negative":void 0,minLength:1,label:h,helperText:C,ref:t},I))}),"useField{[field, meta, helpers]}\nuseMemo{helperText}\nuseCallback{handleBlur}\nuseMemo{inputNode}\nuseMemo{inputProps}",(function(){return[o.U$]}))));(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(v.register(S,"textAreaStyle","/workspaces/apps/extension/src/screens/Settings/ConnectedCdsTextInput.tsx"),v.register(b,"TextInput","/workspaces/apps/extension/src/screens/Settings/ConnectedCdsTextInput.tsx")),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&h(e)},823245:(e,t,r)=>{r.d(t,{EP:()=>d,tU:()=>c});var n,a=r(202784),o=r(552322);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var s,i,l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},u=(0,a.createContext)({supportedChains:[]});function c(e){var t=e.children,r=e.supportedChains,n=(0,a.useMemo)((function(){return{supportedChains:r}}),[r]);return(0,o.jsx)(u.Provider,{value:n,children:t})}function d(){return(0,a.useContext)(u)}l(c,"useMemo{contextValue}"),l(d,"useContext{}"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(s.register(u,"ConvertContext","/workspaces/apps/extension/src/screens/Trade/ConvertProvider.tsx"),s.register(c,"ConvertProvider","/workspaces/apps/extension/src/screens/Trade/ConvertProvider.tsx"),s.register(d,"useConvertContext","/workspaces/apps/extension/src/screens/Trade/ConvertProvider.tsx")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)},907075:(e,t,r)=>{r.r(t),r.d(t,{TradeStepper:()=>M,TradeStepsEnum:()=>C});var n,a=r(230438),o=r(156122),s=r(735103),i=r(95898),l=r(272553),u=r(312365),c=r(878992),d=r(257437),p=r(297727),f=r(364170),g=r(975479),y=r(999402),m=r(343001),v=r(265887),h=r(449513),w=r(11747),S=r(182955),b=r(552322);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var x,T,k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},C=function(e){return e.ENTRY="entry",e.SELECT_ASSET="selectAsset",e.SELECT_WALLET="selectWallet",e.SELECT_NETWORK="selectNetwork",e.CONFIRMATION_PREVIEW="confirmationPreview",e.PHONE_CONFIRMATION="phoneConfirmation",e.DEPOSIT_GAS="depositGas",e.STATUS="status",e.SWAP_NUX="swapNux",e.GASLESS_SWAP_NUX="gaslessSwapNux",e.ADJUSTABLE_SLIPPAGE="adjustableSlippage",e.SELECT_GAS_PAYMENT_METHOD="selectGasPaymentMethod",e}({}),A=[C.ENTRY,C.SELECT_WALLET,C.SELECT_ASSET,C.SELECT_NETWORK,C.SWAP_NUX,C.GASLESS_SWAP_NUX,C.DEPOSIT_GAS,C.SELECT_GAS_PAYMENT_METHOD];function M(e){var t=e.mostPopularSwapAssetId,r=(0,i.Z)(S.form),n=r.sourceWalletId,x=r.selectedNetwork,T=(0,s.useStepper)(S.stepper).currentStep,k=(0,a.useActiveWalletGroupId)(),M=(0,o.cs)(k,{swapId:t,walletId:n.value,network:x.value});if(!M&&!A.includes(T))throw new Error("Failed to find a valid default wallet for the DEX flow ".concat(T));return(0,b.jsxs)(S.stepper.Steps,{children:[(0,b.jsx)(s.StepperStep,{component:(0,b.jsx)(w.Y,{})},C.SWAP_NUX),(0,b.jsx)(s.StepperStep,{component:(0,b.jsx)(p.I,{})},C.GASLESS_SWAP_NUX),(0,b.jsx)(s.StepperStep,{component:(0,b.jsx)(d.y,{wallet:M})},C.ENTRY),(0,b.jsx)(s.StepperStep,{component:(0,b.jsx)(g.E,{selectedWallet:M})},C.SELECT_ASSET),(0,b.jsx)(s.StepperStep,{component:(0,b.jsx)(v.o,{})},C.SELECT_WALLET),(0,b.jsx)(s.StepperStep,{component:(0,b.jsx)(m.M,{})},C.SELECT_NETWORK),M?(0,b.jsx)(s.StepperStep,{component:(0,b.jsx)(u.m,{wallet:M})},C.CONFIRMATION_PREVIEW):null,(0,b.jsx)(s.StepperStep,{component:(0,b.jsx)(f.F,{})},C.PHONE_CONFIRMATION),(0,b.jsx)(s.StepperStep,{component:(0,b.jsx)(h._,{})},C.STATUS),(0,b.jsx)(s.StepperStep,{component:(0,b.jsx)(c.e,{wallet:M})},C.DEPOSIT_GAS),(0,b.jsx)(s.StepperStep,{component:(0,b.jsx)(l.B,{})},C.ADJUSTABLE_SLIPPAGE),(0,b.jsx)(s.StepperStep,{component:(0,b.jsx)(y.P,{})},C.SELECT_GAS_PAYMENT_METHOD)]})}k(M,"useFields{{ sourceWalletId, selectedNetwork }}\nuseStepper{{ currentStep }}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseSelectSwapWalletByGroupId{wallet}",(function(){return[i.Z,s.useStepper,a.useActiveWalletGroupId,o.cs]})),(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(x.register(A,"stepsWithoutRequiredWallet","/workspaces/apps/extension/src/screens/Trade/TradeStepper.tsx"),x.register(M,"TradeStepper","/workspaces/apps/extension/src/screens/Trade/TradeStepper.tsx")),(T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&T(e)},664217:(e,t,r)=>{r.d(t,{g:()=>T});var n,a=r(202784),o=r(783112),s=r(601848),i=r(969321),l=r(184817),u=r(230156),c=r(230438),d=r(735103),p=r(95898),f=r(182955),g=r(26679),y=r(333304),m=r(810435),v=r(233396),h=r(729374);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var w,S,b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},x="swapTradeResponse";function T(e){var t,r=e.wallet,n=e.options,w=(0,o.Z)().formatMessage,S=(0,d.useStepper)(f.stepper).goToStep,b=(0,m.useSwapAnalyticsDetails)(),T=(0,s.useTradeConfirmationRefreshFail)({chainDetails:b}),k=(0,s.useEntryStepGetTradeNotEnoughDataError)({chainDetails:b}),C=(0,s.useEntryStepNotEnoughBalanceForMinerFee)({chainDetails:b}),A=(0,g.Q)(r),M=(0,y.a)(r),I=(0,v.usePersistTradeContext)(),L=(0,h.t)(),E=(0,i.useIsDexDepositGasEnabled)(),j=(0,p.Z)(f.form),P=j.cryptoAmount,G=j.slippage,N=j.swapTradeResponse,D=j.unsignedApproveTxResult,O=j.unsignedSwapTxResult,B=j.unsignedSwapTxResults,F=j.formDepositAmount,H=j.mode,R=j.aggregatorID,W=j.transactionDetailError,V=(0,a.useCallback)((function(){S("confirmationPreview")}),[S]),_=(0,a.useCallback)((function(e){e&&I({key:x,value:e})}),[I]),z=(0,a.useCallback)((function(e){var t=e.swapTrade,r=e.approveTx,n=e.swapTx,a=e.swapTxs;N.onChange(t),D.onChange(r),O.onChange(n),B.onChange(a),H.value===u.SwapMode.Normal&&_(L({swapTrade:t,swapTx:n,approveTx:r,swapTxs:a}))}),[N,D,O,B,H.value,_,L]),U=(0,a.useCallback)((function(e,t){E&&t&&F.onChange(t),W.onChange(e)}),[F,E,W]),Z=(0,c.useActiveWalletGroupId)(),Y=(0,l.D)(Z,{formatMessage:w,onSuccess:V,updateFormData:z,cryptoAmount:P.value,sourceAsset:A.swapAsset,targetAsset:M.swapAsset,slippage:G.value,onNotEnoughBalanceForMinerFee:C,onNotEnoughData:k,shouldIgnoreSuccessRedirect:null==n?void 0:n.shouldIgnoreSuccessRedirect,onGenerateTransactionsError:U,onRefreshFail:T,mode:null!==(t=null==n?void 0:n.mode)&&void 0!==t?t:u.SwapMode.Normal,aggregatorID:R.value}),Q=Y.generateTransactions,q=Y.generateTransactionsError,X=Y.generateDepositAmount,K=Y.isGenerateTransactionsLoading;return(0,a.useMemo)((function(){return{generateTransactions:Q,generateTransactionsError:q,generateDepositAmount:X,isGenerateTransactionsLoading:K}}),[Q,q,X,K])}b(T,"useIntl{{ formatMessage }}\nuseStepper{{ goToStep }}\nuseSwapAnalyticsDetails{chainDetails}\nuseTradeConfirmationRefreshFail{triggerAnalyticsRefreshFail}\nuseEntryStepGetTradeNotEnoughDataError{triggerAnalyticsNotEnoughDataError}\nuseEntryStepNotEnoughBalanceForMinerFee{triggerAnalyticsNotEnoughBalanceForMinerFee}\nuseSourceSelector{sourceSelector}\nuseTargetSelector{targetSelector}\nusePersistTradeContext{persistTradeContext}\nuseSerializeSwapTradeResult{serializeSwapTradeResult}\nuseIsDexDepositGasEnabled{isDepositGasEnabled}\nuseFields{{\n    cryptoAmount,\n    slippage,\n    swapTradeResponse,\n    unsignedApproveTxResult: unsignedApproveTx,\n    unsignedSwapTxResult: unsignedSwapTx,\n    unsignedSwapTxResults: unsignedSwapTxs,\n    formDepositAmount,\n    mode,\n    aggregatorID,\n    transactionDetailError,\n  }}\nuseCallback{onSuccess}\nuseCallback{updateLocalStorageData}\nuseCallback{updateFormData}\nuseCallback{handleGenerateTransactionsError}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseGenerateTransactions{{\n    generateTransactions,\n    generateTransactionsError,\n    generateDepositAmount,\n    isGenerateTransactionsLoading,\n  }}\nuseMemo{}",(function(){return[o.Z,d.useStepper,m.useSwapAnalyticsDetails,s.useTradeConfirmationRefreshFail,s.useEntryStepGetTradeNotEnoughDataError,s.useEntryStepNotEnoughBalanceForMinerFee,g.Q,y.a,v.usePersistTradeContext,h.t,i.useIsDexDepositGasEnabled,p.Z,c.useActiveWalletGroupId,l.D]})),(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(w.register(x,"swapTradeResponseKey","/workspaces/apps/extension/src/screens/Trade/hooks/useConvertGenerateTransactions.tsx"),w.register(T,"useConvertGenerateTransactions","/workspaces/apps/extension/src/screens/Trade/hooks/useConvertGenerateTransactions.tsx")),(S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&S(e)},233396:(e,t,r)=>{r.r(t),r.d(t,{usePersistTradeContext:()=>g});var n,a=r(202784),o=r(601848),s=r(86296);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var c,d,p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},f="tradeContext";function g(){return(0,a.useCallback)((function(e){var t=e.key,r=e.value,n=e.itemsToRemove,a=e.clearPreviousContext,i=void 0!==a&&a;try{var c,d=localStorage.getItem(f);if(d&&!i){var p=JSON.parse(d);c=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},p),null==n||n.forEach((function(e){c[e]&&delete c[e]})),c[t]=r}else c=u({},t,r);localStorage.setItem(f,JSON.stringify(c))}catch(e){var g=(0,s.coerceError)(e,"usePersistTradeContext");(0,s.reportComponentError)({error:g,severity:"error",isHandled:!1}),(0,o.logTradePreserveStateError)(e.message),localStorage.removeItem(f)}}),[])}p(g,"useCallback{}"),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(f,"tradeContextKey","/workspaces/apps/extension/src/screens/Trade/hooks/usePersistTradeContext.tsx"),c.register(g,"usePersistTradeContext","/workspaces/apps/extension/src/screens/Trade/hooks/usePersistTradeContext.tsx")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)},335657:(e,t,r)=>{r.r(t),r.d(t,{useRetrieveTradeContext:()=>y});var n,a=r(202784),o=r(601848),s=r(86296),i=r(196873);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var l,u,c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},d="timeExtClosed",p="tradeContext";function f(){var e=(new Date).getTime(),t=localStorage.getItem(d);return localStorage.removeItem(d),!!t&&(e-Number(t))/60/1e3>=5}function g(e){var t=e.stepperPosition,r=e.cryptoAmount,n=e.selectedNetwork,a=e.targetAssetId,o=e.targetAssetContractAddress,s=e.sourceWalletId,l=e.swapTradeResponse,u=e.slippage;if(f())return localStorage.removeItem("tradeContext"),null;var c={};if(a&&(c.targetAssetId=a),o&&(c.targetAssetContractAddress=o),s&&(c.sourceWalletId=s),n){var d=(0,i.qp)(n);c.selectedNetwork=d}if(r&&(c.cryptoAmount=BigInt(r)),t&&(c.stepperPosition=t),l){var p=(0,i.Qw)(l),g=p.swapTrade,y=p.approveTx,m=p.swapTx,v=p.swapTxs;c.swapTradeResponse=g,c.unsignedSwapTxResult=m,c.unsignedApproveTxResult=y,c.unsignedSwapTxResults=v}return u&&(c.slippage=u),c}function y(){return(0,a.useCallback)((function(){try{var e=localStorage.getItem(p);return e?g(JSON.parse(e)):null}catch(e){var t=(0,s.coerceError)(e,"useRetrieveTradeContext");return(0,s.reportComponentError)({error:t,severity:"error",isHandled:!1}),(0,o.logTradePreserveStateError)(e.message),localStorage.removeItem(p),null}}),[])}c(y,"useCallback{}"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(d,"timeExtClosedKey","/workspaces/apps/extension/src/screens/Trade/hooks/useRetrieveTradeContext/useRetrieveTradeContext.tsx"),l.register(p,"tradeContextKey","/workspaces/apps/extension/src/screens/Trade/hooks/useRetrieveTradeContext/useRetrieveTradeContext.tsx"),l.register(f,"hasFiveMinsElapsed","/workspaces/apps/extension/src/screens/Trade/hooks/useRetrieveTradeContext/useRetrieveTradeContext.tsx"),l.register(g,"parseTradeContext","/workspaces/apps/extension/src/screens/Trade/hooks/useRetrieveTradeContext/useRetrieveTradeContext.tsx"),l.register(y,"useRetrieveTradeContext","/workspaces/apps/extension/src/screens/Trade/hooks/useRetrieveTradeContext/useRetrieveTradeContext.tsx")),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&u(e)},729374:(e,t,r)=>{r.d(t,{t:()=>S});var n,a,o,s=r(202784),i=r(306915),l=r(759301),u=r(206087);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){return e?e.rawValue.split("/")[0]:""}function y(e){var t=e.chainId.toString(),r=e.decimals.toString(),n=g(e.network),a=p(p({},e),{chainId:t,network:n,decimals:r});return e.swapId&&(a.swapId=e.swapId),a}function m(e){var t;if(e){var r=e.chainId.toString(),n=e.fee.amount.toString(),a=null===(t=e.fee.extraFee)||void 0===t?void 0:t.toString(),o=y(e.fee.baseAsset),s=p(p({},e.fee),{},{amount:n,baseAsset:o,extraFee:a}),i=e.quote.chainId.toString(),l=e.quote.fromAmount.toString(),u=e.quote.toAmount.toString(),c=y(e.quote.fromAsset),d=y(e.quote.toAsset),f=p(p({},e.quote),{},{chainId:i,fromAmount:l,toAmount:u,fromAsset:c,toAsset:d});return p(p({},e),{},{chainId:r,fee:s,quote:f})}}function v(e){var t,r,n,a,o,s=e.addresses.map((function(t){return{type:t.type,address:t.address,index:BigInt(t.index).toString(),accountId:e.accountId}})),i=null!==(t=null===(r=e.balance)||void 0===r?void 0:r.toString())&&void 0!==t?t:"0",l=e.decimals.toString(),u=null!==(n=null===(a=e.selectedIndex)||void 0===a?void 0:a.toString())&&void 0!==n?n:"0",c=g(e.network),d=null===(o=e.minimumBalance)||void 0===o?void 0:o.toString(),f=p(p({},e),{addresses:s,balance:i,decimals:l,selectedIndex:u,network:c,minimumBalance:d});return d||delete f.minimumBalance,f}function h(e){var t,r,n,a,o,s,c={metadata:Array.from(e.metadata),feeCurrencyDecimal:null===(t=e.feeCurrencyDecimal)||void 0===t?void 0:t.toString(),gasLimit:null===(r=e.gasLimit)||void 0===r?void 0:r.toString(),nonce:null===(n=e.nonce)||void 0===n?void 0:n.toString(),transferValue:null===(a=e.transferValue)||void 0===a?void 0:a.toString(),walletIndex:null===(o=e.walletIndex)||void 0===o?void 0:o.toString(),weiValue:null===(s=e.weiValue)||void 0===s?void 0:s.toString(),network:g(e.network)};if(e instanceof i.EthereumUnsigned1559Tx){var d,f=e.maxFeePerGas.toString(),y=e.maxPriorityFeePerGas.toString(),m=e.baseFeePerGas.toString(),v=null===(d=e.l1GasFee)||void 0===d?void 0:d.toString(),h=p(p({},e),c);return void 0!==e.maxFeePerGas&&(h.maxFeePerGas=f.toString()),void 0!==e.maxPriorityFeePerGas&&(h.maxPriorityFeePerGas=y.toString()),void 0!==e.baseFeePerGas&&(h.baseFeePerGas=m.toString()),void 0!==e.l1GasFee&&(h.l1GasFee=v),h.isEthereumUnsigned1559Tx=!0,h}if(e instanceof l.EthereumUnsignedLegacyTx){var w,S=e.estimatedFee.toString(),b=e.gasPrice.toString(),x=null===(w=e.l1GasFee)||void 0===w?void 0:w.toString(),T=p(p({},e),c);return void 0!==e.estimatedFee&&(T.estimatedFee=S.toString()),void 0!==e.gasPrice&&(T.gasPrice=b.toString()),void 0!==e.l1GasFee&&(T.l1GasFee=x),T.isEthereumUnsigned1559Tx=!1,T}if(e instanceof u.SolanaUnsignedTransaction){var k=p(p({},e),c);return void 0!==e.estimatedFee&&(k.estimatedFee=e.estimatedFee.toString()),void 0!==e.extraFee&&(k.extraFee=e.extraFee.toString()),k}}function w(e){if(null!=e&&e.transaction&&e.wallet){var t=h(e.transaction),r=v(e.wallet);return p(p({},e),{transaction:t,wallet:r})}}function S(){return(0,s.useCallback)((function(e){var t=e.swapTrade,r=e.swapTx,n=e.approveTx,a=e.swapTxs,o=m(t),s=w(r),i=a.map((function(e){return w(e)}));if(!o||!s&&0===i.length)return null;var l={swapTrade:o,swapTx:s,approveTx:w(n)};return JSON.stringify(l)}),[])}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(S,"useCallback{}"),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(a.register(g,"serializeNetwork","/workspaces/apps/extension/src/screens/Trade/hooks/useSerializeSwapTradeResult.tsx"),a.register(y,"serializeAsset","/workspaces/apps/extension/src/screens/Trade/hooks/useSerializeSwapTradeResult.tsx"),a.register(m,"serializeSwapTrade","/workspaces/apps/extension/src/screens/Trade/hooks/useSerializeSwapTradeResult.tsx"),a.register(v,"serializeWallet","/workspaces/apps/extension/src/screens/Trade/hooks/useSerializeSwapTradeResult.tsx"),a.register(h,"serializeTransaction","/workspaces/apps/extension/src/screens/Trade/hooks/useSerializeSwapTradeResult.tsx"),a.register(w,"serializeSwapTx","/workspaces/apps/extension/src/screens/Trade/hooks/useSerializeSwapTradeResult.tsx"),a.register(S,"useSerializeSwapTradeResult","/workspaces/apps/extension/src/screens/Trade/hooks/useSerializeSwapTradeResult.tsx")),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)},272553:(e,t,r)=>{r.d(t,{B:()=>H});var n,a=r(202784),o=r(239398),s=r(783112),i=r(601848),l=r(86296),u=r(656695),c=r(963610),d=r(834166),p=r(254073),f=r.n(p),g=r(352871),y=r(790424),m=r(735103),v=r(588253),h=r(95898),w=r(960723),S=r(179506),b=r(606058),x=r(48972),T=r(76470),k=r(661641),C=r(460445),A=r(182955),M=r(233396),I=r(552322);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function E(){E=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,s=Object.create(o.prototype),i=new P(n||[]);return a(s,"_invoke",{value:A(e,r,i)}),s}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var p="suspendedStart",f="suspendedYield",g="executing",y="completed",m={};function v(){}function h(){}function w(){}var S={};u(S,s,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(G([])));x&&x!==r&&n.call(x,s)&&(S=x);var T=w.prototype=v.prototype=Object.create(S);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(a,o,s,i){var l=d(e[a],e,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==L(c)&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,s,i)}),(function(e){r("throw",e,s,i)})):t.resolve(c).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var a=p;return function(o,s){if(a===g)throw new Error("Generator is already running");if(a===y){if("throw"===o)throw s;return{value:e,done:!0}}for(n.method=o,n.arg=s;;){var i=n.delegate;if(i){var l=M(i,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=g;var u=d(t,r,n);if("normal"===u.type){if(a=n.done?y:f,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=y,n.method="throw",n.arg=u.arg)}}}function M(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,M(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=d(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function G(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(L(t)+" is not iterable")}return h.prototype=w,a(T,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:h,configurable:!0}),h.displayName=u(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,u(e,l,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},k(C.prototype),u(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var s=new C(c(e,r,n,a),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},k(T),u(T,l,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=G,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return i.type="throw",i.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var l=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(l&&u){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;j(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:G(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function j(e,t,r,n,a,o,s){try{var i=e[o](s),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function P(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){j(o,n,a,s,i,"next",e)}function i(e){j(o,n,a,s,i,"throw",e)}s(void 0)}))}}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var G,N,D="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},O=(0,o.defineMessages)({title:{id:"jVfJap",defaultMessage:[{type:0,value:"Slippage tolerance"}]},titleTooltipMessage:{id:"g6ALUm",defaultMessage:[{type:0,value:"Your swap will execute within the maximum amount of slippage you define for this swap. For example, 1% slippage means you're willing to accept up to 1% less due to market conditions."}]},description:{id:"6r3IhE",defaultMessage:[{type:0,value:"Select the maximum amount of slippage you're willing to accept on this swap."}]},dividerText:{id:"h2RuXJ",defaultMessage:[{type:0,value:"Or"}]},customAmountTitle:{id:"zdKIox",defaultMessage:[{type:0,value:"Custom amount"}]},customAmountHelperText:{id:"ow9aRo",defaultMessage:[{type:0,value:"Enter a value between 0.5% and 99%"}]},primaryCTAButton:{id:"6DBrUy",defaultMessage:[{type:0,value:"Save"}]},secondaryCTAButton:{id:"vG8d4T",defaultMessage:[{type:0,value:"Cancel"}]},slippageRegexMatch:{id:"pSjlcJ",defaultMessage:[{type:0,value:"Slippage must be between 0.5% to 99%, with up to one decimal."}]}}),B=["1","2","3"],F={slippage:""};function H(){var e=(0,s.Z)().formatMessage,t=(0,m.useStepper)(A.stepper),r=t.goToStep,n=t.goBack,o=R(e(O.slippageRegexMatch)),c=(0,M.usePersistTradeContext)(),p=(0,h.Z)(A.form).slippage;(0,u.useOnMount)((function(){(0,i.logAdjustableSlippageViewed)()}));var v=(0,a.useCallback)((function(e){return P(E().mark((function t(){var n,a;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,i.logAdjustableSlippageSaveClicked)(),n=10*parseInt(e),a=n.toString(),p.onChange(n.toString()),c({key:"slippage",value:a}),r("confirmationPreview");case 6:case"end":return t.stop()}}),t)})))}),[r,c,p]),L=(0,a.useCallback)(function(){var e=P(E().mark((function e(t,n){var a,o,s,u,d;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.setStatus,o=n.setSubmitting,(0,i.logAdjustableSlippageSaveClicked)(),o(!0);try{s=10*parseFloat(t.slippage),u=s.toFixed(0).toString(),p.onChange(u),c({key:"slippage",value:u}),r("confirmationPreview")}catch(e){d=(0,l.coerceError)(e,"adjustable slippage"),(0,i.logAdjustableSlippageSaveError)(d),(0,l.cbReportError)({error:d,metadata:{method:"AdjustableSlippage.handleSubmit"},context:"swap_adjustable_slippage",severity:"error",isHandled:!1}),a(d.message)}finally{o(!1)}case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[r,c,p]),j=(0,a.useCallback)(L,[L]),G=(0,a.useMemo)((function(){return B.map((function(e){return(0,I.jsxs)(w.Button,{variant:"secondary",compact:!0,onPress:v(e),children:[e,"%"]},"slippage-".concat(e,"-option"))}))}),[v]);return(0,I.jsx)(y.lL,{header:(0,I.jsx)(g.l2,{variant:"secondary",handleBack:n}),height:"100%",footer:(0,I.jsx)(x.VStack,{spacingHorizontal:3,width:"100%",children:(0,I.jsx)(d.J9,{initialValues:F,validationSchema:o,onSubmit:j,validateOnBlur:!1,children:function(t){var r=t.isSubmitting,n=t.dirty,a=t.isValid,o=t.handleBlur;return(0,I.jsxs)(d.l0,{children:[(0,I.jsx)(x.VStack,{height:"120px",children:(0,I.jsx)(C.o,{testID:"custom-slippage-input",name:"slippage",label:e(O.customAmountTitle),defaultHelperText:e(O.customAmountHelperText),suffix:"%",autoComplete:"off",onKeyUp:f()(o,300)})}),(0,I.jsx)(x.VStack,{height:"132px"}),(0,I.jsx)(x.VStack,{spacingBottom:1,children:(0,I.jsx)(S.ButtonGroup,{block:!0,accessibilityLabel:"cta-button-group",children:(0,I.jsx)(w.Button,{testID:"custom-slippage-save-btn",type:"submit",variant:"primary",loading:r,disabled:!(n&&a),children:e(O.primaryCTAButton)})})})]})}})}),children:(0,I.jsxs)(x.VStack,{spacingHorizontal:3,height:"100%",children:[(0,I.jsxs)(x.HStack,{alignItems:"center",gap:.5,children:[(0,I.jsx)(k.TextTitle3,{as:"h1",children:e(O.title)}),(0,I.jsx)(T.Tooltip,{content:e(O.titleTooltipMessage),placement:"bottom",children:(0,I.jsx)(b.Icon,{name:"info",size:"xs",color:"foregroundMuted",spacingStart:1})})]}),(0,I.jsx)(k.TextBody,{as:"p",color:"foregroundMuted",spacingTop:1,spacingBottom:3,children:e(O.description)}),(0,I.jsx)(S.ButtonGroup,{block:!0,testID:"slippage-percentage-options",accessibilityLabel:"Group",children:G}),(0,I.jsx)(x.VStack,{justifyContent:"center",alignItems:"center",spacingVertical:3,children:(0,I.jsx)(k.TextBody,{as:"p",color:"foregroundMuted",children:e(O.dividerText)})})]})})}function R(e){return(0,v.object)({slippage:(0,v.string)().test({name:"slippage-valid-number",message:e,test:function(e){return(0,c.f)(e)}})})}D(H,"useIntl{{ formatMessage }}\nuseStepper{{ goToStep, goBack }}\nusePersistTradeContext{persistTradeContext}\nuseFields{{ slippage }}\nuseOnMount{}\nuseCallback{handleSlippageClick}\nuseCallback{handleCustomSlippageSubmit}\nuseCallback{handleSubmit: (\n    values: typeof initialValues,\n    { setStatus, setSubmitting }: FormikHelpers<typeof initialValues>,\n  ) => Promise<void>}\nuseMemo{slippageOptions}",(function(){return[s.Z,m.useStepper,M.usePersistTradeContext,h.Z,u.useOnMount]})),(G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(G.register(O,"messages","/workspaces/apps/extension/src/screens/Trade/steps/AdjustableSlippage/AdjustableSlippage.tsx"),G.register(B,"defaultSlippageOptions","/workspaces/apps/extension/src/screens/Trade/steps/AdjustableSlippage/AdjustableSlippage.tsx"),G.register(F,"initialValues","/workspaces/apps/extension/src/screens/Trade/steps/AdjustableSlippage/AdjustableSlippage.tsx"),G.register(H,"AdjustableSlippage","/workspaces/apps/extension/src/screens/Trade/steps/AdjustableSlippage/AdjustableSlippage.tsx"),G.register(R,"createValidationSchema","/workspaces/apps/extension/src/screens/Trade/steps/AdjustableSlippage/AdjustableSlippage.tsx")),(N="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&N(e)},312365:(e,t,r)=>{r.d(t,{m:()=>Se});var n,a=r(202784),o=r(239398),s=r(783112),i=r(107267),l=r(601848),u=r(160593),c=r(108389),d=r(223933),p=r(86296),f=r(554449),g=r(969321),y=r(644279),m=r(472987),v=r(256637),h=r(788),w=r(989587),S=r(559440),b=r(656695),x=r(895493),T=r(826179),k=r(123132),C=r(654971),A=r(805173),M=r(763353),I=r(705890),L=r(159341),E=r(674017),j=r(220540),P=r(230156),G=r(547710),N=r(182074),D=r(230438),O=r(218687),B=r(976974),F=r(599050),H=r(73084),R=r(40217),W=r(735103),V=r(95898),_=r(992259),z=r(48972),U=r(661641),Z=r(416794),Y=r(111176),Q=r(555192),q=r(340671),X=r(16418),K=r(182955),J=r(664217),$=r(233396),ee=r(335657),te=r(685841),re=r(907075),ne=r(810435),ae=r(284168),oe=r(552322);function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ue(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==se(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===se(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ce(){ce=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,s=Object.create(o.prototype),i=new E(n||[]);return a(s,"_invoke",{value:A(e,r,i)}),s}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var p="suspendedStart",f="suspendedYield",g="executing",y="completed",m={};function v(){}function h(){}function w(){}var S={};u(S,s,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(j([])));x&&x!==r&&n.call(x,s)&&(S=x);var T=w.prototype=v.prototype=Object.create(S);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(a,o,s,i){var l=d(e[a],e,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==se(c)&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,s,i)}),(function(e){r("throw",e,s,i)})):t.resolve(c).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var a=p;return function(o,s){if(a===g)throw new Error("Generator is already running");if(a===y){if("throw"===o)throw s;return{value:e,done:!0}}for(n.method=o,n.arg=s;;){var i=n.delegate;if(i){var l=M(i,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=g;var u=d(t,r,n);if("normal"===u.type){if(a=n.done?y:f,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=y,n.method="throw",n.arg=u.arg)}}}function M(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,M(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=d(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function j(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(se(t)+" is not iterable")}return h.prototype=w,a(T,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:h,configurable:!0}),h.displayName=u(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,u(e,l,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},k(C.prototype),u(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var s=new C(c(e,r,n,a),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},k(T),u(T,l,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return i.type="throw",i.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var l=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(l&&u){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;L(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:j(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function de(e,t,r,n,a,o,s){try{var i=e[o](s),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function pe(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){de(o,n,a,s,i,"next",e)}function i(e){de(o,n,a,s,i,"throw",e)}s(void 0)}))}}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,s,i=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ge(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ge(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var ye,me,ve="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},he=(0,o.defineMessages)({title:{id:"uHsL/c",defaultMessage:[{type:0,value:"Swap"}]},subTitle:{id:"uERyyA",defaultMessage:[{type:0,value:"Best price out of "},{type:1,value:"numSources"},{type:0,value:" sources"}]},cancel:{id:"kz3JfK",defaultMessage:[{type:0,value:"Cancel"}]},trade:{id:"UkNNA2",defaultMessage:[{type:0,value:"Trade"}]},longSolanaTxMessage:{id:"YIocEF",defaultMessage:[{type:0,value:"Solana swaps can take longer. Please stay on this screen until your swap completes."}]},cancelButton:{id:"i6fpqu",defaultMessage:[{type:0,value:"Cancel"}]},swapAnywayButton:{id:"FTWaA2",defaultMessage:[{type:0,value:"Swap anyway"}]},warningTitle:{id:"hmS1ut",defaultMessage:[{type:0,value:"This swap is likely to fail"}]},warningDescription:{id:"aY5Af6",defaultMessage:[{type:0,value:"If it does, you'll lose the network fee. This fee does not go to Coinbase."}]},warningSubDescription:{id:"UrF0Hw",defaultMessage:[{type:0,value:"Swap simulations are designed to keep you safe. "},{type:1,value:"link"}]},learnMoreLabel:{id:"1ZDLZA",defaultMessage:[{type:0,value:"Learn more"}]},topUpButtonText:{id:"nuMeii",defaultMessage:[{type:0,value:"Top up your "},{type:1,value:"cryptoSymbol"},{type:0,value:" balance"}]}}),we="swapTradeResponse";function Se(e){var t,r,n,o,se=e.wallet,ie=(0,A.useAccountById)(se.accountId),ue=(0,D.useActiveWalletGroupId)(),de=(0,E.useGetFeeWallet)(ue,se.network),ge=(0,$.usePersistTradeContext)(),ye=(0,ee.useRetrieveTradeContext)(),me=(0,s.Z)(),ve=(0,i.useHistory)(),Se=(0,g.useIsDexDepositGasEnabled)(),be=me.formatMessage,xe=(0,W.useStepper)(K.stepper),Te=xe.goToStep,ke=xe.hasPreviousStep,Ce=xe.setContextHistory,Ae=xe.history,Me=(0,ne.useSwapAnalyticsDetails)(),Ie=fe((0,a.useState)(new Date),2),Le=Ie[0],Ee=Ie[1],je=fe((0,a.useState)(null),2),Pe=je[0],Ge=je[1],Ne=fe((0,a.useState)(!1),2),De=Ne[0],Oe=Ne[1],Be=fe((0,_.useToggler)(!1),2),Fe=Be[0],He=Be[1],Re=He.toggleOn,We=He.toggleOff,Ve=(0,R.useExtensionPerfMark)((0,B.toExtensionName)(B.PERF_MARKS.swap),B.SWAP_MARKS.trigger_swap,{logMetric:!0,tags:{chainId:Me.chainId.toString()}}).start,_e=fe((0,a.useState)(!1),2),ze=_e[0],Ue=_e[1],Ze=fe((0,a.useState)(!1),2),Ye=Ze[0],Qe=Ze[1],qe=(0,f.C)(),Xe=(0,G.useIsPrivatePoolEligible)(),Ke=(0,V.Z)(K.form),Je=Ke.swapTradeResponse.value,$e=Ke.unsignedSwapTxResult.value,et=Ke.unsignedSwapTxResults.value,tt=Ke.unsignedApproveTxResult.value,rt=Ke.mode,nt=Ke.ledgerSwapError,at=Ke.networkFeeInFiat,ot=Ke.isGaslessToggleDisabled,st=Ke.selectedNetwork,it=(0,L.useGaslessSwapEnabled)({chainId:null!==(t=null===(r=st.value.asChain())||void 0===r?void 0:r.chainId.toString())&&void 0!==t?t:""}),lt=it.getIsGaslessSwapEligible,ut=it.isGaslessSwapEnabled,ct=(0,j.z)({unsignedApproveTx:null==tt?void 0:tt.transaction,unsignedSwapTx:$e.transaction,swapQuote:Je.quote,chainId:Je.chainId});if((0,b.useOnMount)((function(){var e,t,r=lt({hasApproveTx:!(null==tt||!tt.transaction),isTradingMoreThanNetworkFee:ct,isTradingNonNativeToken:(null==$e||null===(e=$e.transaction)||void 0===e||null===(e=e.network.asChain())||void 0===e||null===(e=e.baseAssetCurrencyCode)||void 0===e?void 0:e.toLowerCase())!==(null==$e||null===(t=$e.transaction)||void 0===t?void 0:t.currencyCode.rawValue.toLowerCase())});if(ot.value||ot.onChange(!r),"notEnoughBalanceForMinerFee"===(null==wt?void 0:wt.type)||"zeroBalanceForMinerFee"===(null==wt?void 0:wt.type)){if(null!=tt&&tt.transaction)return void Qe(Se);r?(rt.onChange(P.SwapMode.Gasless),yt()):Qe(Se)}})),!(Je&&null!=$e&&$e.transaction&&$e.wallet&&de))throw new Error("Transaction data was missing in ConfirmationPreviewStep");var dt=(0,a.useMemo)((function(){return null==et?void 0:et.map((function(e){return e.transaction}))}),[et]),pt=(0,J.g)({wallet:se,options:{shouldIgnoreSuccessRedirect:!0,mode:rt.value}}),ft=pt.generateTransactions,gt=pt.isGenerateTransactionsLoading,yt=(0,a.useCallback)(pe(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gt){e.next=4;break}return e.next=3,ft();case 3:Ee(new Date);case 4:case"end":return e.stop()}}),e)}))),[ft,gt]);(0,S.N)(yt,{interval:X.AU}),(0,a.useEffect)((function(){function e(){return(e=pe(ce().mark((function e(){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!De||gt){e.next=5;break}return Oe(!1),e.next=4,ft();case 4:Ee(new Date);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[ft,gt,rt,De]),(0,a.useEffect)((function(){Ae.includes("entry")||(Ce(["entry","confirmationPreview"]),yt())}),[Ce,Ae,yt,ge]),(0,b.useOnMount)((function(){var e=ye();(null==e?void 0:e.stepperPosition)!==re.TradeStepsEnum.CONFIRMATION_PREVIEW&&ge({key:"stepperPosition",value:re.TradeStepsEnum.CONFIRMATION_PREVIEW}),Ae.length>2&&"adjustableSlippage"===Ae[Ae.length-2]&&yt(),Ae.length>2&&"selectGasPaymentMethod"===Ae[Ae.length-2]&&Oe(!0)})),(0,a.useEffect)((function(){return function(){return Ue(!1)}}),[]);var mt=(0,w.r)(Je),vt=mt.primaryItem,ht=mt.secondaryItem,wt=(0,v.w)(ue,{swapTrade:Je,unsignedApproveTx:null==tt?void 0:tt.transaction,unsignedSwapTx:$e.transaction,intlFormatters:me}),St=(0,l.useTradeConfirmationStepTradeButtonDisabled)({chainDetails:Me}),bt=(0,l.useTradeConfirmationStepTradeCancel)({chainDetails:Me}),xt=(0,l.useTradeConfirmationStepUnlockSuccess)({chainDetails:Me}),Tt=(0,l.useTradeConfirmationStepUnlockError)({chainDetails:Me}),kt=(0,l.useTradeConfirmationStepTradeConfirmClick)({chainDetails:Me}),Ct=(0,l.useTradeConfirmationStepTradeAnyway)({chainDetails:Me}),At=(0,l.useTradeConfirmationStepTradeConfirm)({chainDetails:Me}),Mt=(0,l.useTradeConfirmationStepStandaloneError)({chainDetails:Me}),It=(0,l.useTradeConfirmationStepStandaloneConfirm)({chainDetails:Me}),Lt=(0,l.useTradeConfirmationStepLedgerError)({chainDetails:Me}),Et=(0,l.useTradeConfirmationStepLedgerConfirm)({chainDetails:Me}),jt=(0,a.useCallback)((function(){Et(),Te("status")}),[Te,Et]),Pt=(0,a.useCallback)((function(e){Lt(),(0,p.cbReportError)({error:new Error(e.message),context:"ledger-error",severity:"error",isHandled:!1}),nt.onChange(e),Te("status")}),[Te,nt,Lt]),Gt=(0,a.useCallback)((function(e){It();var t=Je.quote,r=t.fromAsset,n=t.toAsset,a=t.fromAmount,o=t.toAmount,s=t.chainId;if(Xe&&s===c.ETHEREUM_CHAIN_ID&&(0,l.logPrivatePoolTransaction)({fromAsset:r.currencyCode.code,toAsset:n.currencyCode.code,fromAssetAmount:a.toString(),toAssetAmount:o.toString(),chainId:s.toString()}),Array.isArray(e))e.forEach((function(e){var t=(0,O.createSubmitTimerName)(e.txHash);(0,O.newTimer)(t)}));else{var i=(0,O.createSubmitTimerName)(e.txHash);(0,O.newTimer)(i)}Te("status")}),[Te,Xe,Je.quote,It]),Nt=(0,a.useCallback)((function(e){Mt(),Ue(!1),Ge(e)}),[Mt]),Dt=(0,a.useCallback)((function(e){bt({userCancelledAfterError:e}),ge({key:"stepperPosition",value:"entry",itemsToRemove:[we]}),ot.onChange(!1),ke?Te("entry"):ve.goBack()}),[Te,ke,ve,ot,ge,bt]),Ot=(0,a.useCallback)((function(){Ue(!0)}),[]),Bt=(0,a.useMemo)((function(){var e="string"==typeof vt.iconSourceOrName?void 0:vt.iconSourceOrName.network,t="string"==typeof ht.iconSourceOrName?void 0:ht.iconSourceOrName.network;return{primaryItemProps:le(le({},vt),{},{network:e}),secondaryItemProps:le(le({},ht),{},{network:t})}}),[vt,ht]),Ft=Bt.primaryItemProps,Ht=Bt.secondaryItemProps,Rt=(0,a.useCallback)((function(){Te("phoneConfirmation")}),[Te]),Wt=(0,q.T)({unsignedTx:$e.transaction,unsignedApproveTx:null==tt?void 0:tt.transaction,onSignSuccess:jt,onSignError:Pt,flow:q.Z.Trade}),Vt=Wt.signAndSubmitLedger,_t=Wt.isHardwareWalletSigning,zt=(0,Q.q)(),Ut=(0,k.useSignAndSubmitStandalone)({wallet:$e.wallet,unsignedTx:$e.transaction,unsignedApproveTx:null==tt?void 0:tt.transaction,signSuccess:Gt,signError:Nt,unlockSuccess:xt,unlockError:Tt,handleUnlock:zt(se.accountId)}),Zt=Ut.signAndSubmitStandalone,Yt=Ut.isSignAndSubmitStandaloneLoading,Qt=(0,C.useSignMultipleTransactionsStandalone)({wallet:$e.wallet,unsignedTxs:dt,signSuccess:Gt,signError:Nt,unlockSuccess:xt,unlockError:Tt,handleUnlock:zt(se.accountId),skipSubmit:!1}),qt=Qt.signMultipleTransactionsStandalone,Xt=Qt.isSignMultipleTransactionsStandaloneLoading,Kt=(0,x.constructDomainSepator)(null===(n=Je.trade)||void 0===n||null===(n=n.eip712)||void 0===n?void 0:n.domain),Jt=(0,T.useSwapSignAndRelayStandalone)({wallet:$e.wallet,unsignedTx:$e.transaction,signSuccess:Gt,signError:Nt,unlockSuccess:xt,unlockError:Tt,handleUnlock:zt(se.accountId),gaslessSwapTrade:Je,domainSeparator:Kt,relayType:N.TxRelayType.SWAP,source:"extension"}),$t=Jt.signAndRelayStandalone,er=Jt.isSignAndRelayLoading,tr=(0,a.useMemo)((function(){return _t||Yt||gt||Xt||er}),[gt,_t,er,Yt,Xt]),rr=(0,a.useCallback)((function(){Re()}),[Re]),nr=(0,m.eY)({account:ie,transactionDetailError:wt,isLoading:tr,buttonAnalyticsCallbacks:{triggerAnalyticsConfirmClick:kt,triggerAnalyticsConfirmAnyway:Ct,triggerAnalyticsConfirm:At},isMultipleTxs:Boolean((null!==(o=null==et?void 0:et.length)&&void 0!==o?o:0)>1)&&se.isSolanaNetwork(),onCancelButtonPressed:Dt,onTradeButtonPressed:Ot,onWarningButtonPressed:rr,signAndSubmitStandalone:Zt,signMultipleTransactionsStandalone:qt,signAndSubmitWalletlink:Rt,signAndSubmitLedger:Vt,signAndRelayStandalone:$t,mode:rt.value,markStartPerf:Ve}),ar=(0,I.i)($e.transaction,$e.wallet),or=(0,l.useTradeConfirmationStepViewed)({chainDetails:Me}),sr=(0,l.useTradeConfirmationGasFeeViewedLegacy)({chainDetails:Me}),ir=(0,l.useTradeConfirmationGasFeeViewed1559)({chainDetails:Me}),lr=(0,l.useTradeConfirmationGasFeeNotShown)({chainDetails:Me}),ur=(0,a.useCallback)((function(e){var t=e.networkEstimatedFee,r=e.networkBaseFee,n=e.networkMaxFee;or({networkEstimatedFee:t,networkMaxFee:n,networkBaseFee:r});try{if((0,d.isETH1559Tx)($e.transaction)){var a=ar,o=a.lowerBoundFee,s=a.upperBoundFee;if(!o||!s)throw new Error("No valid lower and upper bound fees for swap 1559 transaction");ir(ar)}else{if(!ar.estimatedFee)throw new Error("No valid estimated fee for swap transaction");sr(ar)}}catch(e){lr(ar)}}),[ar,or,lr,ir,sr,$e.transaction]),cr=(0,a.useCallback)((function(){qe&&((0,l.logAdjustableSlippageRowClicked)(),Te("adjustableSlippage"))}),[Te,qe]),dr=(0,a.useCallback)((function(){(0,l.logGaslessCogPressed)(),Te("selectGasPaymentMethod")}),[Te]),pr=(0,a.useMemo)((function(){if(rt.value===P.SwapMode.Gasless){var e=vt.iconSourceOrName;return{iconUrl:e.iconUrl,currencyCode:e.currencyCode,network:e.network,showNetworkIconOverride:!1}}return{iconUrl:de.imageURL,currencyCode:de.currencyCode.value,network:de.network,showNetworkIconOverride:!1}}),[de.currencyCode,de.imageURL,de.network,rt.value,vt.iconSourceOrName]),fr=(0,a.useMemo)((function(){return(0,oe.jsx)(ae.e,{onPress:dr,gasPaymentMethod:rt.value===P.SwapMode.Gasless?Je.quote.fromAsset.currencyCode.code:de.currencyCode.code,targetTokenIcon:(0,oe.jsx)(F.Y,{asset:pr,layout:"inside-trade-row",size:"small"}),isDisabled:!ut||ot.value})}),[dr,rt.value,Je.quote.fromAsset.currencyCode.code,de.currencyCode.code,pr,ut,ot.value]),gr=(0,h.Dm)({swapTrade:Je,unsignedApproveTx:null==tt?void 0:tt.transaction,unsignedSwapTx:$e.transaction,lastUpdateTime:Le,isPageLoading:tr,isGenerateTransactionsLoading:gt,rowItemsAnalytics:ur,intlFormatters:me,onSlippageRowClick:cr,gasPaymentMethodSelector:fr,swapMode:rt.value,gasToken:de.currencyCode.code});(0,a.useEffect)((function(){var e=gr.find((function(e){return e.rowType===h.aC.NETWORK_FEE}));e&&at.value!==e.detailText&&at.onChange(e.detailText)}),[gr,at]);var yr=nt.onChange,mr=(0,a.useCallback)((function(e){yr(e),Te("status")}),[yr,Te]),vr=(0,a.useCallback)((function(){ge({key:"stepperPosition",value:"entry",itemsToRemove:[we]}),ot.onChange(!1),Te("entry")}),[Te,ot,ge]),hr=(0,a.useRef)(!1);(0,a.useEffect)((function(){"highPriceImpact"===(null==wt?void 0:wt.type)&&null!=wt&&wt.analytics&&!hr.current&&(hr.current=!0,(0,u.logEvent)(wt.analytics.eventName,wt.analytics.eventProperties))}),[wt,hr]);var wr=(0,q.T)({unsignedTx:$e.transaction,onSignSuccess:function(){},onSignError:mr,flow:q.Z.Trade}).hardwareWalletScreen,Sr=(0,y.f)(Me.chainId),br=(0,a.useMemo)((function(){return Sr?be(he.subTitle,{numSources:Sr}):""}),[be,Sr]),xr=(0,a.useMemo)((function(){return se.isSolanaNetwork()?(0,oe.jsx)(H.b,{message:be(he.longSolanaTxMessage)}):null}),[be,se]),Tr=(0,a.useMemo)((function(){return nr.filter((function(e){return"warningConfirmButton"!==e.name}))}),[nr]),kr=(0,a.useCallback)((function(){(0,l.logEntryStepDepositGasButtonClicked)({chainDetails:Me,source:l.Source.EXTENSION}),Te("depositGas")}),[Me,Te]),Cr=(0,a.useMemo)((function(){return[{name:"topUpFlowButton",onPress:kr,testID:"swap-top-up-flow-button",children:be(he.topUpButtonText,{cryptoSymbol:null==de?void 0:de.currencyCode.value})}]}),[null==de?void 0:de.currencyCode.value,be,kr]),Ar=(0,a.useMemo)((function(){return wt?"zeroBalanceForMinerFee"!==wt.type&&"notEnoughBalanceForMinerFee"!==wt.type||!Ye?void 0:(0,oe.jsx)(z.VStack,{spacingHorizontal:3,width:"100%",spacingTop:2,children:(0,oe.jsx)(z.Box,{justifyContent:"flex-end",maxHeight:75,children:(0,oe.jsx)(U.TextLegal,{as:"p",color:"negative",spacingBottom:1,children:wt.message})})}):null}),[Ye,wt]),Mr=(0,a.useMemo)((function(){return nr.find((function(e){return"warningConfirmButton"===e.name}))}),[nr]),Ir=(0,a.useCallback)((function(e){var t;"warning"===(null==wt?void 0:wt.type)&&(We(),(0,l.logIgnoredSwapSimulationWarning)({fromAsset:Je.quote.fromAsset.name,toAsset:Je.quote.toAsset.name,chainId:Number(Je.chainId)}),null==Mr||null===(t=Mr.onPress)||void 0===t||t.call(Mr,e))}),[Je.chainId,Je.quote.fromAsset.name,Je.quote.toAsset.name,We,null==wt?void 0:wt.type,Mr]),Lr=(0,a.useCallback)((function(){chrome.tabs.create({url:M.SWAP_LEARN_MORE_URL})}),[]);return _t?wr:Fe?(0,oe.jsx)(te.S,{onSubmit:Ir,toggleOff:We,title:be(he.warningTitle),description:be(he.warningDescription),subDescription:be(he.warningSubDescription,{link:(0,oe.jsx)(U.Link,{testID:"warning-screen-learn-more-link",onPress:Lr,children:be(he.learnMoreLabel)})}),primaryButtonText:be(he.swapAnywayButton),secondaryButtonText:be(he.cancelButton),primaryButtonVariant:"negative",pictogramName:"strongWarning"}):(0,oe.jsx)(Y.O,{headerText:be(he.title),subHeaderText:br,detailRowItems:gr,error:wt,customError:Ar,infoBanner:xr,buttonProps:Ye?Cr:Tr,onPrimaryButtonDisabled:St,handleBackButton:vr,signAndSubmitError:Pe,disableBackBtn:ze,topSection:(0,oe.jsx)(Z.d,{primaryItem:Ft,secondaryItem:Ht,error:wt})})}ve(Se,"useAccountById{account}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseGetFeeWallet{feeWallet}\nusePersistTradeContext{persistTradeContext}\nuseRetrieveTradeContext{retrieveTradeContext}\nuseIntl{intl}\nuseHistory{history}\nuseIsDexDepositGasEnabled{isDepositGasEnabled}\nuseStepper{{\n    goToStep,\n    hasPreviousStep,\n    setContextHistory,\n    history: stepperHistory,\n  }}\nuseSwapAnalyticsDetails{chainDetails}\nuseState{[lastUpdateTime, setLastUpdateTime](new Date())}\nuseState{[signAndSubmitError, setSignAndSubmitError](null)}\nuseState{[shouldRegenerateTx, setShouldRegenerateTx](false)}\nuseToggler{[\n    warningScreenVisible,\n    { toggleOn: toggleWarningScreenOn, toggleOff: toggleWarningScreenOff },\n  ]}\nuseExtensionPerfMark{{ start: markStartSwapwPerf }}\nuseState{[isTradeInFlight, setIsTradeInFlight](false)}\nuseState{[shouldDisplayTopUpFlow, setShouldDisplayTopUpFlow](false)}\nuseIsAdjustableSlippageEligible{isAdjustableSlippageEnabled}\nuseIsPrivatePoolEligible{isPrivatePoolEligible}\nuseFields{{\n    swapTradeResponse: { value: swapTradeResponse },\n    unsignedSwapTxResult: { value: unsignedSwapTxResult },\n    unsignedSwapTxResults: { value: unsignedSwapTxResults },\n    unsignedApproveTxResult: { value: unsignedApproveTxResult },\n    mode,\n    ledgerSwapError,\n    networkFeeInFiat,\n    isGaslessToggleDisabled,\n    selectedNetwork,\n  }}\nuseGaslessSwapEnabled{{ getIsGaslessSwapEligible, isGaslessSwapEnabled }}\nuseIsTradingMoreThanNetworkFee{isTradingMoreThanNetworkFee}\nuseOnMount{}\nuseMemo{unsignedTxs}\nuseConvertGenerateTransactions{{ generateTransactions, isGenerateTransactionsLoading }}\nuseCallback{refreshNetworkFeeCallback}\nuseIntervalForPromises{}\nuseEffect{}\nuseEffect{}\nuseOnMount{}\nuseEffect{}\nuseTransactionOverviewItems{{ primaryItem, secondaryItem }}\nuseTransactionDetailErrors{transactionDetailError}\nuseTradeConfirmationStepTradeButtonDisabled{triggerAnalyticsTradeButtonDisabled}\nuseTradeConfirmationStepTradeCancel{triggerAnalyticsTradeCancel}\nuseTradeConfirmationStepUnlockSuccess{triggerAnalyticsUnlockSuccess}\nuseTradeConfirmationStepUnlockError{triggerAnalyticsUnlockError}\nuseTradeConfirmationStepTradeConfirmClick{triggerAnalyticsConfirmClick}\nuseTradeConfirmationStepTradeAnyway{triggerAnalyticsConfirmAnyway}\nuseTradeConfirmationStepTradeConfirm{triggerAnalyticsConfirm}\nuseTradeConfirmationStepStandaloneError{triggerAnalyticsStandaloneError}\nuseTradeConfirmationStepStandaloneConfirm{triggerAnalyticsStandaloneConfirm}\nuseTradeConfirmationStepLedgerError{triggerAnalyticsLedgerError}\nuseTradeConfirmationStepLedgerConfirm{triggerAnalyticsLedgerConfirm}\nuseCallback{onLedgerSigningSuccess}\nuseCallback{onLedgerSigningError}\nuseCallback{onStandaloneSigningSuccess}\nuseCallback{onStandaloneSigningError}\nuseCallback{onCancelButtonPressed}\nuseCallback{handleTradeButtonPressed}\nuseMemo{{ primaryItemProps, secondaryItemProps }}\nuseCallback{signAndSubmitWalletlink}\nuseSignAndSubmitLedger{{ signAndSubmitLedger, isHardwareWalletSigning }}\nuseHandleUnlockForSigning{handleUnlock}\nuseSignAndSubmitStandalone{{ signAndSubmitStandalone, isSignAndSubmitStandaloneLoading }}\nuseSignMultipleTransactionsStandalone{{ signMultipleTransactionsStandalone, isSignMultipleTransactionsStandaloneLoading }}\nuseSwapSignAndRelayStandalone{{ signAndRelayStandalone, isSignAndRelayLoading }}\nuseMemo{isPageLoading}\nuseCallback{handleWarningButtonPressed}\nuseTransactionDetailButtons{buttonOptions}\nuseAnalyticsFeeData{analyticsFeeData}\nuseTradeConfirmationStepViewed{triggerAnalyticsConfirmationStep}\nuseTradeConfirmationGasFeeViewedLegacy{triggerAnalyticsGasFeeViewedLegacy}\nuseTradeConfirmationGasFeeViewed1559{triggerAnalyticsGasFeeViewed1559}\nuseTradeConfirmationGasFeeNotShown{triggerAnalyticsGasFeeNotShown}\nuseCallback{transationRowItemsAnalytics}\nuseCallback{handleSlippageRowClick}\nuseCallback{handleCogPress}\nuseMemo{assetLike}\nuseMemo{gasPaymentMethodSelector}\nuseTransactionDetailRowItems{detailRows}\nuseEffect{}\nuseCallback{signError}\nuseCallback{handleGoBack}\nuseRef{hasLoggedPriceImpactEvent}\nuseEffect{}\nuseSignAndSubmitLedger{{ hardwareWalletScreen }}\nuseNumSourcesByChain{numSourcesByChain}\nuseMemo{numSourcesLabel}\nuseMemo{infoBanner}\nuseMemo{filteredButtonOptions}\nuseCallback{handleDepositGasPress}\nuseMemo{topUpFlowButtonProps: ButtonPropsType[]}\nuseMemo{customError}\nuseMemo{warningConfirmButton}\nuseCallback{handleWarningConfirm}\nuseCallback{handleLinkPress}",(function(){return[A.useAccountById,D.useActiveWalletGroupId,E.useGetFeeWallet,$.usePersistTradeContext,ee.useRetrieveTradeContext,s.Z,i.useHistory,g.useIsDexDepositGasEnabled,W.useStepper,ne.useSwapAnalyticsDetails,_.useToggler,R.useExtensionPerfMark,f.C,G.useIsPrivatePoolEligible,V.Z,L.useGaslessSwapEnabled,j.z,b.useOnMount,J.g,S.N,b.useOnMount,w.r,v.w,l.useTradeConfirmationStepTradeButtonDisabled,l.useTradeConfirmationStepTradeCancel,l.useTradeConfirmationStepUnlockSuccess,l.useTradeConfirmationStepUnlockError,l.useTradeConfirmationStepTradeConfirmClick,l.useTradeConfirmationStepTradeAnyway,l.useTradeConfirmationStepTradeConfirm,l.useTradeConfirmationStepStandaloneError,l.useTradeConfirmationStepStandaloneConfirm,l.useTradeConfirmationStepLedgerError,l.useTradeConfirmationStepLedgerConfirm,q.T,Q.q,k.useSignAndSubmitStandalone,C.useSignMultipleTransactionsStandalone,T.useSwapSignAndRelayStandalone,m.eY,I.i,l.useTradeConfirmationStepViewed,l.useTradeConfirmationGasFeeViewedLegacy,l.useTradeConfirmationGasFeeViewed1559,l.useTradeConfirmationGasFeeNotShown,h.Dm,q.T,y.f]})),(ye="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(ye.register(he,"messages","/workspaces/apps/extension/src/screens/Trade/steps/ConfirmationPreviewStep/ConfirmationPreviewStep.tsx"),ye.register(we,"swapTradeResponseKey","/workspaces/apps/extension/src/screens/Trade/steps/ConfirmationPreviewStep/ConfirmationPreviewStep.tsx"),ye.register(Se,"ConfirmationPreviewStep","/workspaces/apps/extension/src/screens/Trade/steps/ConfirmationPreviewStep/ConfirmationPreviewStep.tsx")),(me="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&me(e)},284168:(e,t,r)=>{r.d(t,{e:()=>y});var n,a=r(239398),o=r(783112),s=r(606058),i=r(48972),l=r(881336),u=r(661641),c=r(552322);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var d,p,f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},g=(0,a.defineMessages)({gaslessSwitchDescription:{id:"hrGxqb",defaultMessage:[{type:0,value:"Paid in "},{type:1,value:"gasPaymentMethod"}]}});function y(e){var t=e.onPress,r=e.gasPaymentMethod,n=e.targetTokenIcon,a=e.isDisabled,d=void 0!==a&&a,p=(0,o.Z)().formatMessage;return(0,c.jsxs)(i.HStack,{spacingTop:1,gap:1,alignItems:"center",children:[n,(0,c.jsxs)(i.HStack,{gap:1,children:[(0,c.jsx)(u.TextBody,{as:"p",color:"foregroundMuted",children:p(g.gaslessSwitchDescription,{gasPaymentMethod:r})}),d?null:(0,c.jsx)(l.PressableOpacity,{onPress:t,children:(0,c.jsx)(s.Icon,{name:"gear",size:"s",color:"foreground",testID:"gas-token-selector-cog"})})]})]})}f(y,"useIntl{{ formatMessage }}",(function(){return[o.Z]})),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(d.register(g,"messages","/workspaces/apps/extension/src/screens/Trade/steps/ConfirmationPreviewStep/GasPaymentMethodSelector.tsx"),d.register(y,"GasPaymentMethodSelector","/workspaces/apps/extension/src/screens/Trade/steps/ConfirmationPreviewStep/GasPaymentMethodSelector.tsx")),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)},685841:(e,t,r)=>{r.d(t,{S:()=>f});var n,a=r(446048),o=r(61517),s=r(960723),i=r(941368),l=r(48972),u=r(661641),c=r(552322);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var d,p;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function f(e){var t=e.toggleOff,r=e.onSubmit,n=e.onSecondaryButtonPress,d=e.isButtonLoading,p=e.pictogramName,f=e.primaryButtonText,g=e.secondaryButtonText,y=e.title,m=e.description,v=e.subDescription,h=e.primaryButtonVariant,w=void 0===h?"primary":h,S=e.secondaryButtonVariant,b=void 0===S?"secondary":S;return(0,c.jsxs)(l.VStack,{height:o.IR,children:[(0,c.jsx)(a.w,{onBack:t}),(0,c.jsxs)(l.VStack,{spacingHorizontal:3,gap:2,alignItems:"center",spacingBottom:3,height:"100%",justifyContent:"space-between",children:[(0,c.jsxs)(l.VStack,{gap:2,alignItems:"center",children:[(0,c.jsx)(i.Pictogram,{name:p,dimension:"96x96"}),(0,c.jsx)(l.Box,{children:(0,c.jsx)(u.TextTitle3,{as:"p",children:y})}),(0,c.jsxs)(l.VStack,{spacingHorizontal:3,gap:2,spacingBottom:2,children:[m?(0,c.jsx)(u.TextBody,{as:"p",align:"center",color:"foregroundMuted",children:m}):null,v?(0,c.jsx)(u.TextBody,{as:"p",align:"center",color:"foregroundMuted",children:v}):null]})]}),(0,c.jsxs)(l.VStack,{width:"100%",gap:2,children:[(0,c.jsx)(s.Button,{variant:w,onPress:r,testID:"warning-screen-primary-button",block:!0,loading:d,children:f}),(0,c.jsx)(s.Button,{variant:b,onPress:null!=n?n:t,testID:"warning-screen-secondary-button",block:!0,children:g})]})]})]})}(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&d.register(f,"WarningConfirmation","/workspaces/apps/extension/src/screens/Trade/steps/ConfirmationPreviewStep/WarningConfirmation.tsx"),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)},878992:(e,t,r)=>{r.d(t,{e:()=>R});var n,a=r(202784),o=r(239398),s=r(783112),i=r(107267),l=r(902721),u=r(101620),c=r(813003),d=r(559440),p=r(205418),f=r(674017),g=r(230438),y=r(591100),m=r(485016),v=r(446048),h=r(61517),w=r(735103),S=r(95898),b=r(960723),x=r(470986),T=r(48972),k=r(661641),C=r(443862),A=r(728209),M=r(182955),I=r(664217),L=r(810435),E=r(552322);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function P(){P=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,s=Object.create(o.prototype),i=new E(n||[]);return a(s,"_invoke",{value:A(e,r,i)}),s}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var p="suspendedStart",f="suspendedYield",g="executing",y="completed",m={};function v(){}function h(){}function w(){}var S={};u(S,s,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(G([])));x&&x!==r&&n.call(x,s)&&(S=x);var T=w.prototype=v.prototype=Object.create(S);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(a,o,s,i){var l=d(e[a],e,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==j(c)&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,s,i)}),(function(e){r("throw",e,s,i)})):t.resolve(c).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var a=p;return function(o,s){if(a===g)throw new Error("Generator is already running");if(a===y){if("throw"===o)throw s;return{value:e,done:!0}}for(n.method=o,n.arg=s;;){var i=n.delegate;if(i){var l=M(i,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=g;var u=d(t,r,n);if("normal"===u.type){if(a=n.done?y:f,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=y,n.method="throw",n.arg=u.arg)}}}function M(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,M(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=d(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function G(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(j(t)+" is not iterable")}return h.prototype=w,a(T,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:h,configurable:!0}),h.displayName=u(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,u(e,l,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},k(C.prototype),u(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var s=new C(c(e,r,n,a),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},k(T),u(T,l,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=G,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return i.type="throw",i.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var l=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(l&&u){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;L(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:G(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function G(e,t,r,n,a,o,s){try{var i=e[o](s),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function N(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){G(o,n,a,s,i,"next",e)}function i(e){G(o,n,a,s,i,"throw",e)}s(void 0)}))}}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var D,O,B="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},F=(0,o.defineMessages)({title:{id:"/OJF46",defaultMessage:[{type:0,value:"Let's top up your "},{type:1,value:"cryptoSymbol"},{type:0,value:" balance"}]},main:{id:"GJmTtm",defaultMessage:[{type:0,value:"Buy or transfer from Coinbase"}]},finePrint:{id:"NtJETL",defaultMessage:[{type:0,value:"Coinbase.com\u2019s account link feature is subject to coinbase.com "},{type:1,value:"userAgreement"},{type:0,value:" and "},{type:1,value:"privacyPolicy"},{type:0,value:"."}]},userAgreement:{id:"V6jvi1",defaultMessage:[{type:0,value:"User Agreement"}]},privacyPolicy:{id:"0ROee6",defaultMessage:[{type:0,value:"Privacy Policy"}]},buttonCta:{id:"rV4uVX",defaultMessage:[{type:0,value:"Buy with Coinbase Pay"}]},otherButton:{id:"IykAaN",defaultMessage:[{type:0,value:"Transfer from another wallet"}]},defaultError:{id:"fnBlFk",defaultMessage:[{type:0,value:"Buy or transfer funds from Coinbase or another wallet."}]},zeroBalanceSubtitle:{id:"ZZAIvI",defaultMessage:[{type:0,value:"You need "},{type:1,value:"cryptoSymbol"},{type:0,value:" before you can make a transaction on the "},{type:1,value:"networkName"},{type:0,value:" network."}]},notEnoughBalanceSubtitle:{id:"R6shrI",defaultMessage:[{type:0,value:"You need an additional ~"},{type:1,value:"cryptoAmountNeeded"},{type:0,value:" ("},{type:1,value:"fiatAmountNeeded"},{type:0,value:") to cover the network fee."}]}}),H="ALL_TOKENS";function R(e){var t,r,n,o,j=e.wallet,G=(0,s.Z)().formatMessage,D=(0,i.useHistory)(),O=(0,w.useStepper)(M.stepper).goBack,B=(0,c.useDestinationWallets)({include:{shared:"ETH",blockchains:["AVAX","MATIC","OP"]}}),R=(0,u.useCurrencyFormatter)(),W=(0,L.useSwapAnalyticsDetails)();(0,l.useDepositGasStepViewed)({chainDetails:W});var V=(0,S.Z)(M.form),_=V.selectedNetwork,z=V.formDepositAmount,U=(0,I.g)({wallet:j,options:{shouldIgnoreSuccessRedirect:!0}}),Z=U.generateTransactions,Y=U.isGenerateTransactionsLoading,Q=(0,g.useActiveWalletGroupId)(),q=(0,f.useGetFeeWallet)(Q,_.value),X=(null==_||null===(t=_.value)||void 0===t||null===(t=t.asChain())||void 0===t?void 0:t.chainId)===p.EVMChain.BSC,K=(null==_||null===(r=_.value)||void 0===r||null===(r=r.asChain())||void 0===r?void 0:r.chainId)===p.EVMChain.OPTIMISM,J=(0,a.useCallback)(N(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=q&&q.balance&&q.balance>0n&&j)){e.next=3;break}return e.next=3,Z();case 3:case"end":return e.stop()}}),e)}))),[q,j,Z]);(0,d.N)(J,{interval:3e4});var $=(0,a.useMemo)((function(){var e;return K?m.LegacyIdToBlockchainId.OP:m.LegacyIdToBlockchainId[(null===(e=_.value.asChain())||void 0===e?void 0:e.baseAssetCurrencyCode)||"ETH"]}),[K,_.value]),ee=null!==(n=(0,m.parseDestinationWallets)({destinationWallets:B,tokenId:H}))&&void 0!==n?n:B,te=(0,a.useMemo)((function(){return ee.map((function(e){return{address:e.address,assets:null!=q&&q.currencyCode.rawValue?[null==q?void 0:q.currencyCode.rawValue]:void 0,supportedNetworks:[$]}}))}),[null==q?void 0:q.currencyCode.rawValue,$,ee]),re=(0,a.useMemo)((function(){if(null==q||!q.currencyCode||!z.value)return 0;var e=R.fiatValue(null==q?void 0:q.currencyCode,null==q?void 0:q.decimals,z.value,null==q?void 0:q.contractAddress,null==q?void 0:q.network),t=null==e?void 0:e.toNumber();return t?t+(25-t%25)%25:0}),[R,null==q?void 0:q.contractAddress,null==q?void 0:q.currencyCode,null==q?void 0:q.decimals,null==q?void 0:q.network,z.value]),ne=(0,C.useCoinbasePay)({destinationWallets:te,experienceLoggedOut:"popup",amount:JSON.stringify(re)}),ae=(0,a.useCallback)((function(){var e;(0,l.logDepositGasStepCBPayButtonClicked)({chainDetails:W,source:l.Source.EXTENSION}),null===(e=ne.current)||void 0===e||e.open()}),[ne,W]),oe=(0,a.useCallback)((function(){(0,l.logDepositGasStepTransferButtonClicked)({chainDetails:W,source:l.Source.EXTENSION}),D.push(A.RoutesEnum.RECEIVE)}),[W,D]),se=(0,a.useCallback)((function(){O()}),[O]),ie=(0,a.useCallback)(N(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",chrome.tabs.create({url:y.LINK_USER_AGREEMENT,active:!1}));case 1:case"end":return e.stop()}}),e)}))),[]),le=(0,a.useCallback)(N(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",chrome.tabs.create({url:y.PRIVACY_POLICY_URL,active:!1}));case 1:case"end":return e.stop()}}),e)}))),[]),ue=(0,a.useMemo)((function(){var e,t;if(void 0!==z.value){var r=void 0!==(null==q?void 0:q.balance)&&null!=q&&q.currencyCode?R.formatToCrypto({currencyCode:q.currencyCode,decimals:q.decimals,value:z.value,network:q.network}):"",n=void 0!==(null==q?void 0:q.balance)&&null!=q&&q.currencyCode?R.formatToFiat(q.currencyCode,q.decimals,z.value,!1,q.contractAddress,q.network,!0,!0):"";return G(F.notEnoughBalanceSubtitle,{cryptoAmountNeeded:r,fiatAmountNeeded:n})}return G(F.zeroBalanceSubtitle,{cryptoSymbol:null===(e=_.value)||void 0===e||null===(e=e.asChain())||void 0===e?void 0:e.baseAssetCurrencyCode,networkName:null===(t=_.value)||void 0===t||null===(t=t.asChain())||void 0===t?void 0:t.displayName})}),[R,q,z.value,G,_.value]);return(0,E.jsxs)(T.VStack,{height:h.UV,children:[(0,E.jsx)(v.w,{onBack:se,spacingBottom:0}),(0,E.jsxs)(T.VStack,{alignItems:"center",width:"100%",spacingHorizontal:2,children:[(0,E.jsx)(k.TextTitle3,{as:"h1",spacingBottom:1,align:"center",children:G(F.title,{cryptoSymbol:null===(o=_.value)||void 0===o||null===(o=o.asChain())||void 0===o?void 0:o.baseAssetCurrencyCode})}),(0,E.jsx)(k.TextBody,{as:"p",color:"foregroundMuted",align:"center",testID:"deposit-gas-message",children:ue}),(0,E.jsx)(T.HStack,{alignItems:"center",justifyContent:"center",spacingVertical:6,children:(0,E.jsx)(x.SpotRectangle,{name:"primeEarn"})})]}),(0,E.jsxs)(T.VStack,{alignItems:"center",width:"100%",children:[(0,E.jsxs)(b.ButtonGroup,{accessibilityLabel:"Transfer Funds",block:!0,vertical:!0,children:[X?null:(0,E.jsx)(b.Button,{onPress:ae,loading:Y,children:(0,E.jsx)(T.HStack,{alignItems:"center",gap:1,children:G(F.buttonCta)})}),(0,E.jsx)(b.Button,{onPress:oe,variant:"secondary",children:G(F.otherButton)})]}),(0,E.jsx)(k.TextLegal,{as:"p",color:"foregroundMuted",align:"center",spacingTop:2,children:G(F.finePrint,{userAgreement:(0,E.jsx)(k.Link,{variant:"legal",color:"primary",onPress:ie,children:G(F.userAgreement)}),privacyPolicy:(0,E.jsx)(k.Link,{variant:"legal",color:"primary",onPress:le,children:G(F.privacyPolicy)})})})]})]})}B(R,"useIntl{{ formatMessage }}\nuseHistory{history}\nuseStepper{{ goBack }}\nuseDestinationWallets{destinationWallets}\nuseCurrencyFormatter{currencyFormatter}\nuseSwapAnalyticsDetails{chainDetails}\nuseDepositGasStepViewed{}\nuseFields{{ selectedNetwork, formDepositAmount }}\nuseConvertGenerateTransactions{{ generateTransactions, isGenerateTransactionsLoading }}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseGetFeeWallet{feeWallet}\nuseCallback{refreshNetworkFeeCallback}\nuseIntervalForPromises{}\nuseMemo{cbPayNetwork}\nuseMemo{destinationWalletsWithAsset}\nuseMemo{nextMultipleOf25}\nuseCoinbasePay{cbPayInstance}\nuseCallback{handleConnectCoinbaseClick}\nuseCallback{handleOtherClick}\nuseCallback{handleBackClick}\nuseCallback{handleClickUserAgreement}\nuseCallback{handleClickPrivacyPolicy}\nuseMemo{subtitle}",(function(){return[s.Z,i.useHistory,w.useStepper,c.useDestinationWallets,u.useCurrencyFormatter,L.useSwapAnalyticsDetails,l.useDepositGasStepViewed,S.Z,I.g,g.useActiveWalletGroupId,f.useGetFeeWallet,d.N,C.useCoinbasePay]})),(D="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(D.register(F,"messages","/workspaces/apps/extension/src/screens/Trade/steps/DepositGasStep/DepositGasStep.tsx"),D.register(H,"tokenId","/workspaces/apps/extension/src/screens/Trade/steps/DepositGasStep/DepositGasStep.tsx"),D.register(R,"DepositGasStep","/workspaces/apps/extension/src/screens/Trade/steps/DepositGasStep/DepositGasStep.tsx")),(O="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&O(e)},257437:(e,t,r)=>{r.d(t,{s:()=>ee,y:()=>te});var n,a=r(202784),o=r(239398),s=r(783112),i=r(107267),l=r(601848),u=r(101620),c=r(557847),d=r(656695),p=r(305738),f=r(692687),g=r(926581),y=r(230438),m=r(266654),v=r(976974),h=r(254073),w=r.n(h),S=r(983717),b=r(995136),x=r(352871),T=r(746425),k=r(790424),C=r(627240),A=r(40217),M=r(735103),I=r(95898),L=r(960723),E=r(162346),j=r(29904),P=r(661641),G=r(268708),N=r(853097),D=r(182955),O=r(664217),B=r(233396),F=r(335657),H=r(907075),R=r(810435),W=r(510860),V=r(26679),_=r(333304),z=r(552322);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){Q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==U(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===U(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,s,i=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var K,J,$="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},ee=(0,o.defineMessages)({title:{id:"wFzAcF",defaultMessage:[{type:0,value:"Swap"}]},availableAmount:{id:"oQMg3g",defaultMessage:[{type:1,value:"amount"},{type:0,value:" available"}]},ctaButtonLabel:{id:"nDQ7wN",defaultMessage:[{type:0,value:"Find the best price"}]},noAmountError:{id:"8xcZm0",defaultMessage:[{type:0,value:"Please enter an amount."}]},transactionCanceled:{id:"hcNb7U",defaultMessage:[{type:0,value:"Transaction canceled"}]},tryAgain:{id:"oKQtsu",defaultMessage:[{type:0,value:"Try again"}]},goBackHome:{id:"pHyRag",defaultMessage:[{type:0,value:"Go back home"}]},fillGas:{id:"C4PoVL",defaultMessage:[{type:0,value:"Fill Gas"}]},bestPriceText:{id:"9han78",defaultMessage:[{type:0,value:"Find the best price"}]},priceEstimateLabel:{id:"mqpZxy",defaultMessage:[{type:0,value:"Price estimate"}]},topUpButtonText:{id:"nuMeii",defaultMessage:[{type:0,value:"Top up your "},{type:1,value:"cryptoSymbol"},{type:0,value:" balance"}]},a11yToLabel:{id:"w6MK2R",defaultMessage:[{type:0,value:"To "},{type:1,value:"amount"}]},a11yFromLabel:{id:"5BoVL3",defaultMessage:[{type:0,value:"From "},{type:1,value:"amount"}]}});function te(e){var t,r=e.wallet,n=(0,B.usePersistTradeContext)(),o=(0,F.useRetrieveTradeContext)(),h=q((0,a.useState)(!1),2),U=h[0],Z=h[1],Q=(0,i.useHistory)().goBack,X=(0,M.useStepper)(D.stepper).goToStep,K=(0,s.Z)().formatMessage,J=(0,I.Z)(D.form),$=J.cryptoAmount,te=J.enteredAmount,re=J.isFiat,ne=J.selectedNetwork,ae=J.targetAssetId,oe=J.sourceWalletId,se=J.shouldUpdateCryptoAmount,ie=J.mode,le=J.browserMode,ue=J.isGaslessToggleDisabled,ce=J.aggregatorID,de=(0,u.useCurrencyFormatter)(),pe=q((0,a.useState)(),2),fe=pe[0],ge=pe[1],ye=(0,y.useActiveWalletGroupId)(),me=(0,f.ez)(ye,{network:ne.value}),ve=(0,V.Q)(r),he=(0,_.a)(r),we=(0,W.U)(r),Se=we.toggleAssets,be=we.isDisabled,xe=(0,R.useSwapAnalyticsDetails)(),Te=(0,l.useEntryStepPreviewButtonClicked)({chainDetails:xe}),ke=(0,l.useGetMaxValueButton)({chainDetails:xe}),Ce=(0,l.useSwitchDisplayButton)({chainDetails:xe}),Ae=(0,l.useEntryStepBackButton)({chainDetails:xe,walletCurrencyCode:null==r?void 0:r.currencyCode.code}),Me=(0,l.useEntryStepNotEnoughBalance)({chainDetails:xe}),Ie=(0,l.useEntryStepQuoteError)({chainDetails:xe}),Le=(0,l.useEntryStepPreviewButtonEnabled)({chainDetails:xe,source:l.Source.EXTENSION}),Ee=(0,A.useExtensionPerfMark)((0,v.toExtensionName)(v.PERF_MARKS.swap),v.SWAP_MARKS.load_preview,{logMetric:!0}).start;(0,G.V)((0,v.toExtensionName)(v.PERF_MARKS.swap),v.SWAP_MARKS.launch_swap,{type:"end"});var je=(0,a.useCallback)((function(e){$.value>0n&&e&&ge(e)}),[$]),Pe=(0,a.useCallback)((function(e){ue.onChange(e)}),[]),Ge=(0,a.useCallback)((function(e){ce.onChange(e)}),[]);(0,d.useOnMount)((function(){var e=o();(null==e?void 0:e.stepperPosition)!==H.TradeStepsEnum.ENTRY&&n({key:"stepperPosition",value:H.TradeStepsEnum.ENTRY}),r&&oe.onChange(r.id)}));var Ne=(0,m.useWalletById)(ye,oe.value),De=(0,g.F)({sourceWallet:Ne,target:he.swapAsset,mode:ie.value,cryptoAmount:$.value,analyticsError:Ie,handleEntrySelectorError:je,handleGaslessQuoteError:Pe,handleQuoteSuccess:Ge}),Oe=De.isLoading,Be=De.fromCryptoAmount,Fe=De.toCryptoAmount,He=(0,O.g)({wallet:r,options:{mode:ie.value}}),Re=He.generateTransactions,We=He.generateTransactionsError,Ve=He.isGenerateTransactionsLoading,_e=(0,a.useCallback)((function(){var e,t,a,s,i,l,u,c=o();Te({cryptoAmount:$.value.toString(),currentBalance:null==r||null===(e=r.balance)||void 0===e?void 0:e.toString(),sourceCurrencyCode:null==ve||null===(t=ve.swapAsset)||void 0===t?void 0:t.currencyCode.code,sourceChainId:null==ve||null===(a=ve.swapAsset)||void 0===a?void 0:a.chainId.toString(),sourceChainDisplayName:null==ve||null===(s=ve.swapAsset)||void 0===s||null===(s=s.network.asChain())||void 0===s?void 0:s.displayName,targetCurrencyCode:null==he||null===(i=he.swapAsset)||void 0===i?void 0:i.currencyCode.code,targetChainId:null==he||null===(l=he.swapAsset)||void 0===l?void 0:l.chainId.toString(),targetChainDisplayName:null==he||null===(u=he.swapAsset)||void 0===u||null===(u=u.network.asChain())||void 0===u?void 0:u.displayName}),Ee(),Re(),c&&!c.sourceWalletId&&r&&n({key:"sourceWalletId",value:r.id}),c&&!c.selectedNetwork&&n({key:"selectedNetwork",value:ne.value.rawValue.split("/")[0]})}),[$,ve,he,Te,Re,Ee,n,o,r,ne]),ze=(0,p.useAddTrackedExchangeRate)();(0,a.useEffect)((function(){var e;he.swapAsset&&ze(he.swapAsset.currencyCode,he.swapAsset.chainId,null===(e=he.swapAsset.address)||void 0===e?void 0:e.rawValue)}),[ze,he.swapAsset]),(0,l.useEntryStepViewed)({chainDetails:xe,walletCurrencyCode:null==r?void 0:r.currencyCode.code});var Ue=void 0!==(null==r?void 0:r.balance)?de.formatToFiat(r.currencyCode,r.decimals,r.balance,!1,r.contractAddress,r.network):"",Ze=(0,a.useMemo)((function(){var e=$.value&&Be?Be:ve.secondaryLabel;return Y(Y({},ve),{},{dataElementHandle:"dex-from-selector",a11yLabel:K(ee.a11yFromLabel,{amount:e}),isLoading:Oe,secondaryLabel:e,onPress:function(){X("selectWallet")}})}),[$.value,K,Be,X,Oe,ve]),Ye=(0,a.useMemo)((function(){var e=$.value&&Fe?Fe:he.secondaryLabel;return Y(Y({},he),{},{dataElementHandle:"dex-to-selector",isLoading:Oe,a11yLabel:K(ee.a11yToLabel,{amount:e}),secondaryLabel:e,onPress:function(){X("selectAsset")}})}),[$.value,K,X,Oe,he,Fe]),Qe=(0,a.useMemo)((function(){var e,t,r;return void 0!==We||U||0n===$.value||Boolean(fe)||!he.swapAsset||!ve.swapAsset||(null===(e=ve.swapAsset)||void 0===e?void 0:e.swapId)===(null===(t=he.swapAsset)||void 0===t?void 0:t.swapId)||Ve||!(null!==(r=Ye.swapAsset)&&void 0!==r&&r.swappable)||Oe}),[$.value,fe,U,Ve,null===(t=Ye.swapAsset)||void 0===t?void 0:t.swappable,ve.swapAsset,he.swapAsset,We,Oe]);(0,a.useEffect)((function(){var e,t;Qe||Le({cryptoAmount:$.value.toString(),sourceChainId:null==ve||null===(e=ve.swapAsset)||void 0===e?void 0:e.chainId.toString(),targetChainId:null==he||null===(t=he.swapAsset)||void 0===t?void 0:t.chainId.toString()})}),[Qe]);var qe=(0,a.useCallback)((function(){Ae(),Q()}),[Q,Ae]),Xe=(0,a.useCallback)((function(){X("selectNetwork")}),[X]);(0,a.useEffect)((function(){U&&w()((function(){var e,t,n;Me({amount:$.value.toString(),currentBalance:null==r||null===(e=r.balance)||void 0===e?void 0:e.toString(),sourceSwapId:null===(t=ve.swapAsset)||void 0===t?void 0:t.swapId,targetSwapId:null===(n=he.swapAsset)||void 0===n?void 0:n.swapId})}),500)()}),[U]);var Ke=(0,a.useCallback)((function(e){var t=o();null!=t&&t.sourceWalletId||!r||n({key:"sourceWalletId",value:r.id}),null!=t&&t.selectedNetwork||n({key:"selectedNetwork",value:ne.value.rawValue.split("/")[0]}),n({key:"cryptoAmount",value:e.toString()}),ge(void 0)}),[o,ne.value.rawValue,n,r]),Je=(0,a.useMemo)((function(){return!(0n===$.value||!oe.value.length||!ae.value)}),[$.value,oe.value,ae.value]),$e=me;return(0,z.jsxs)(k.lL,{header:(0,z.jsx)(x.l2,{variant:"secondary",centerTitle:!0,title:K(ee.title),handleBack:le.value?void 0:qe}),height:"100%",children:[(0,z.jsx)(j.VStack,{justifyContent:"center",children:(0,z.jsx)(T.l,{network:ne.value,onPress:Xe,chainDetails:xe})}),(0,z.jsxs)(j.VStack,{flexGrow:1,justifyContent:"center",spacingHorizontal:3,gap:3,children:[(0,z.jsx)(j.VStack,{flexGrow:1,justifyContent:"center",children:r?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(S._Z,{context:"trade",wallet:r,onInsufficientFund:Z,cryptoAmount:$,enteredAmount:te,isFiat:re,analyticsGetMaxValue:ke,analyticsSwitchDisplay:Ce,onChange:Ke,shouldUpdateCryptoAmount:se,txType:c.GasEstimateTxType.SWAP}),Ue?(0,z.jsx)(P.TextLabel2,{as:"p",color:"foregroundMuted",align:"center",spacingTop:1,children:K(ee.availableAmount,{amount:Ue})}):null]}):(0,z.jsx)(b.BF,{})}),(0,z.jsxs)(j.VStack,{gap:3,children:[Je&&(0,z.jsx)(P.TextLabel2,{as:"p",spacingBottom:.5,children:K(ee.priceEstimateLabel)}),(0,z.jsx)(N.rb,{onClickSwitcher:Se,isSwitchDisabled:be,error:fe||We,row1:Ze,row2:Ye,onClickSwitcherIcon:"arrowsVertical",tooltipContent:$e?(0,z.jsx)(C.W,{network:null==ne?void 0:ne.value,zeroBaseAssetError:me}):void 0})]})]}),(0,z.jsx)(E.HStack,{alignItems:"stretch",spacingHorizontal:3,spacingBottom:3,width:"100%",children:(0,z.jsx)(L.Button,{block:!0,disabled:!Ve&&Qe,loading:Ve,onPress:_e,testID:"dex-entry-preview-button",children:K(ee.ctaButtonLabel)})})]})}$(te,"usePersistTradeContext{persistTradeContext}\nuseRetrieveTradeContext{retrieveTradeContext}\nuseState{[hasInsufficientFund, setHasInsufficientFund](false)}\nuseHistory{{ goBack }}\nuseStepper{{ goToStep }}\nuseIntl{{ formatMessage }}\nuseFields{{\n    cryptoAmount,\n    enteredAmount,\n    isFiat,\n    selectedNetwork,\n    targetAssetId,\n    sourceWalletId,\n    shouldUpdateCryptoAmount,\n    mode,\n    browserMode,\n    isGaslessToggleDisabled,\n    aggregatorID,\n  }}\nuseCurrencyFormatter{currencyFormatter}\nuseState{[entrySelectorError, setEntrySelectorError]}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseBaseAssetZeroBalanceError{zeroBaseAssetError}\nuseSourceSelector{sourceSelector}\nuseTargetSelector{targetSelector}\nuseAssetsToggler{{ toggleAssets, isDisabled }}\nuseSwapAnalyticsDetails{chainDetails}\nuseEntryStepPreviewButtonClicked{triggerAnalyticsPreviewButtonClicked}\nuseGetMaxValueButton{triggerAnalyticsGetMaxValue}\nuseSwitchDisplayButton{triggerAnalyticsSwitchDisplay}\nuseEntryStepBackButton{triggerAnalyticsBackButton}\nuseEntryStepNotEnoughBalance{triggerAnalyticsNotEnoughBalance}\nuseEntryStepQuoteError{triggerAnalyticsQuoteError}\nuseEntryStepPreviewButtonEnabled{triggerAnalyticsPreviewEnabled}\nuseExtensionPerfMark{{ start: markStartLoadPreviewPerf }}\nusePerfMarkOnMount{}\nuseCallback{handleEntrySelectorError}\nuseCallback{handleGaslessQuoteError}\nuseCallback{handleQuoteSuccess}\nuseOnMount{}\nuseWalletById{sourceWallet}\nuseQuote{{\n    isLoading: isQuoteLoading,\n    fromCryptoAmount,\n    toCryptoAmount,\n  }}\nuseConvertGenerateTransactions{{ generateTransactions, generateTransactionsError, isGenerateTransactionsLoading }}\nuseCallback{handlePreviewClick}\nuseAddTrackedExchangeRate{addTrackedRate}\nuseEffect{}\nuseEntryStepViewed{}\nuseMemo{row1Props}\nuseMemo{row2Props}\nuseMemo{isTradeButtonDisabled}\nuseEffect{}\nuseCallback{handleGoBack}\nuseCallback{onNetworkSelectionSubheaderPress}\nuseEffect{}\nuseCallback{handleAmountChange}\nuseMemo{hasPriceEstimate}",(function(){return[B.usePersistTradeContext,F.useRetrieveTradeContext,i.useHistory,M.useStepper,s.Z,I.Z,u.useCurrencyFormatter,y.useActiveWalletGroupId,f.ez,V.Q,_.a,W.U,R.useSwapAnalyticsDetails,l.useEntryStepPreviewButtonClicked,l.useGetMaxValueButton,l.useSwitchDisplayButton,l.useEntryStepBackButton,l.useEntryStepNotEnoughBalance,l.useEntryStepQuoteError,l.useEntryStepPreviewButtonEnabled,A.useExtensionPerfMark,G.V,d.useOnMount,m.useWalletById,g.F,O.g,p.useAddTrackedExchangeRate,l.useEntryStepViewed]})),(K="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(K.register(ee,"messages","/workspaces/apps/extension/src/screens/Trade/steps/EntryStep/EntryStep.tsx"),K.register(te,"EntryStep","/workspaces/apps/extension/src/screens/Trade/steps/EntryStep/EntryStep.tsx")),(J="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&J(e)},799759:(e,t,r)=>{r.d(t,{T:()=>g});var n,a,o,s=r(783112),i=r(87550),l=r(171618),u=r(960723),c=r(48972),d=r(156169),p=r(257437),f=r(552322);function g(){var e=(0,s.Z)().formatMessage;return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(c.VStack,{height:"100%",justifyContent:"space-between",children:[(0,f.jsx)(l.Z,{}),(0,f.jsxs)(c.VStack,{alignContent:"center",spacingHorizontal:3,children:[(0,f.jsx)(i.O,{}),(0,f.jsx)(c.Spacer,{})]}),(0,f.jsxs)(c.VStack,{spacing:3,children:[(0,f.jsx)(d.m,{}),(0,f.jsx)(u.Button,{block:!0,disabled:!0,children:e(p.s.ctaButtonLabel)})]})]})})}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(g,"useIntl{{ formatMessage }}",(function(){return[s.Z]})),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(g,"EntryStepFallback","/workspaces/apps/extension/src/screens/Trade/steps/EntryStep/EntryStepFallback.tsx"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)},26679:(e,t,r)=>{r.d(t,{Q:()=>m});var n,a=r(202784),o=r(239398),s=r(783112),i=r(866392),l=r(334291),u=r.n(l),c=r(661641),d=r(552322);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var p,f,g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},y=(0,o.defineMessages)({from:{id:"bHEvFB",defaultMessage:[{type:0,value:"From"}]},chooseCoin:{id:"HahwaV",defaultMessage:[{type:0,value:"Choose asset"}]}});function m(e){var t,r=(0,s.Z)().formatMessage,n=(0,i.useSwapAsset)({contractAddress:null==e?void 0:e.contractAddress,chainId:null==e||null===(t=e.network.asChain())||void 0===t?void 0:t.chainId.toString()}),o=(0,a.useMemo)((function(){return(0,d.jsx)(c.TextLabel1,{as:"p",onClick:u(),testID:"default-from-selector",children:r(y.chooseCoin)})}),[r]);return(0,a.useMemo)((function(){var e;return{secondaryLabel:null!==(e=null==n?void 0:n.currencyCode.code)&&void 0!==e?e:o,primaryLabel:r(y.from),image:null==n?void 0:n.imageURL,onPress:u(),dataElementHandle:"convert-from-selector",swapAsset:n}}),[r,n,o])}g(m,"useIntl{{ formatMessage }}\nuseSwapAsset{sourceAsset}\nuseMemo{ChooseCoinLink}\nuseMemo{}",(function(){return[s.Z,i.useSwapAsset]})),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(p.register(y,"messages","/workspaces/apps/extension/src/screens/Trade/steps/EntryStep/hooks/useSourceSelector.tsx"),p.register(m,"useSourceSelector","/workspaces/apps/extension/src/screens/Trade/steps/EntryStep/hooks/useSourceSelector.tsx")),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&f(e)},333304:(e,t,r)=>{r.d(t,{a:()=>h});var n,a=r(202784),o=r(239398),s=r(783112),i=r(866392),l=r(334291),u=r.n(l),c=r(95898),d=r(661641),p=r(182955),f=r(552322);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var g,y,m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},v=(0,o.defineMessages)({to:{id:"tMX/lG",defaultMessage:[{type:0,value:"To"}]},chooseCoin:{id:"8dKBrJ",defaultMessage:[{type:0,value:"Choose asset"}]}});function h(e){var t,r=(0,s.Z)().formatMessage,n=(0,c.Z)(p.form),o=n.targetAssetId,l=n.targetAssetContractAddress,g=(0,i.useSwapAsset)({contractAddress:l.value,chainId:null==e||null===(t=e.network.asChain())||void 0===t?void 0:t.chainId.toString()}),y=(null==e?void 0:e.swapId)!==o.value&&o.value?g:void 0,m=(0,a.useMemo)((function(){return(0,f.jsx)(d.TextLabel1,{as:"p",color:"primary",onClick:u(),children:r(v.chooseCoin)})}),[r]);return(0,a.useMemo)((function(){var e;return{secondaryLabel:null!==(e=null==y?void 0:y.currencyCode.code)&&void 0!==e?e:m,primaryLabel:r(v.to),image:null==y?void 0:y.imageURL,onPress:u(),dataElementHandle:"convert-to-selector",swapAsset:y}}),[y,m,r])}m(h,"useIntl{{ formatMessage }}\nuseFields{{ targetAssetId, targetAssetContractAddress }}\nuseSwapAsset{asset}\nuseMemo{ChooseCoinLink}\nuseMemo{}",(function(){return[s.Z,c.Z,i.useSwapAsset]})),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(g.register(v,"messages","/workspaces/apps/extension/src/screens/Trade/steps/EntryStep/hooks/useTargetSelector.tsx"),g.register(h,"useTargetSelector","/workspaces/apps/extension/src/screens/Trade/steps/EntryStep/hooks/useTargetSelector.tsx")),(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&y(e)},297727:(e,t,r)=>{r.d(t,{I:()=>A});var n,a=r(202784),o=r(239398),s=r(783112),i=r(107267),l=r(601848),u=r(763353),c=r(352871),d=r(790424),p=r(735103),f=r(960723),g=r(853052),y=r(606058),m=r(470986),v=r(29904),h=r(661641),w=r(182955),S=r(552322);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var b,x,T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},k=(0,o.defineMessages)({nuxTitle:{id:"dMXm4n",defaultMessage:[{type:0,value:"Low on ETH or MATIC? Help is on the way."}]},networkFeeSimpleLabel:{id:"9sygiV",defaultMessage:[{type:0,value:"Network fees made simple"}]},networkFeeSimpleDescription:{id:"6gQjAY",defaultMessage:[{type:0,value:"If you're swapping on Ethereum or Polygon, now you can pay the fee with the token you're swapping instead of ETH or MATIC."}]},neverPayFailedLabel:{id:"mzigKd",defaultMessage:[{type:0,value:"Never pay for failed transactions"}]},neverPayFailedDescription:{id:"ZbcLh1",defaultMessage:[{type:0,value:"As a bonus, if your transaction fails, you won't have to pay network fees."}]},oneSwapRequiredLabel:{id:"Y86TKZ",defaultMessage:[{type:0,value:"One standard swap required"}]},oneSwapRequiredDescription:{id:"gONue6",defaultMessage:[{type:0,value:"You need to pay the standard network fee the first time you swap a token. After that, you can swap without ETH or MATIC."}]},swapButton:{id:"7kEyER",defaultMessage:[{type:0,value:"Swap now"}]},learnMoreButton:{id:"KhQxU2",defaultMessage:[{type:0,value:"Learn more"}]},btnGroupA11yText:{id:"0ElHKg",defaultMessage:[{type:0,value:"Action buttons"}]}}),C={spacingVertical:0,spacingHorizontal:1};function A(){var e=(0,s.Z)().formatMessage,t=(0,i.useHistory)().goBack,r=(0,p.useStepper)(w.stepper).goToStep;(0,l.useLogGaslessSwapNuxViewed)();var n=(0,a.useCallback)((function(){(0,l.logGaslessSwapNuxSwapClicked)(),r("entry")}),[r]),o=(0,a.useCallback)((function(){t()}),[t]),b=(0,a.useCallback)((function(){(0,l.logGaslessSwapNuxLearnMoreClicked)(),chrome.tabs.create({url:u.SWAP_LEARN_MORE_URL,active:!1})}),[]);return(0,S.jsxs)(d.lL,{header:(0,S.jsx)(c.l2,{handleBack:o}),height:"100%",children:[(0,S.jsxs)(v.VStack,{alignItems:"center",spacingHorizontal:3,overflow:"scroll",children:[(0,S.jsx)(m.SpotRectangle,{name:"gasFeesNetworkFees"}),(0,S.jsx)(v.VStack,{spacingTop:1,width:250,children:(0,S.jsx)(h.TextTitle3,{as:"h1",spacingTop:1,spacingBottom:1,align:"center",children:e(k.nuxTitle)})}),(0,S.jsx)(g.ContentCell,{title:e(k.networkFeeSimpleLabel),description:e(k.networkFeeSimpleDescription),media:(0,S.jsx)(y.Icon,{name:"checkmark",size:"s",color:"foreground",spacingTop:.5}),compact:!0,reduceHorizontalSpacing:!0,outerSpacing:C}),(0,S.jsx)(g.ContentCell,{title:e(k.neverPayFailedLabel),description:e(k.neverPayFailedDescription),media:(0,S.jsx)(y.Icon,{name:"checkmark",size:"s",color:"foreground",spacingTop:.5}),compact:!0,reduceHorizontalSpacing:!0,outerSpacing:C}),(0,S.jsx)(g.ContentCell,{title:e(k.oneSwapRequiredLabel),description:e(k.oneSwapRequiredDescription),media:(0,S.jsx)(y.Icon,{name:"checkmark",size:"s",color:"foreground",spacingTop:.5}),compact:!0,reduceHorizontalSpacing:!0,outerSpacing:C})]}),(0,S.jsx)(v.VStack,{spacingHorizontal:3,spacingBottom:3,children:(0,S.jsxs)(f.ButtonGroup,{block:!0,vertical:!0,accessibilityLabel:e(k.btnGroupA11yText),children:[(0,S.jsx)(f.Button,{block:!0,onPress:n,testID:"gasless-swap-nux-swap-button",compact:!0,children:e(k.swapButton)}),(0,S.jsx)(f.Button,{block:!0,compact:!0,onPress:b,testID:"gasless-swap-nux-learn-more-button",variant:"secondary",children:e(k.learnMoreButton)})]})})]})}T(A,"useIntl{{ formatMessage }}\nuseHistory{{ goBack }}\nuseStepper{{ goToStep }}\nuseLogGaslessSwapNuxViewed{}\nuseCallback{handlePress}\nuseCallback{handleGoBack}\nuseCallback{handleLearnMorePress}",(function(){return[s.Z,i.useHistory,p.useStepper,l.useLogGaslessSwapNuxViewed]})),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(b.register(k,"messages","/workspaces/apps/extension/src/screens/Trade/steps/GaslessSwapNux/GaslessSwapNux.tsx"),b.register(C,"zeroCellSpacing","/workspaces/apps/extension/src/screens/Trade/steps/GaslessSwapNux/GaslessSwapNux.tsx"),b.register(A,"GaslessSwapNux","/workspaces/apps/extension/src/screens/Trade/steps/GaslessSwapNux/GaslessSwapNux.tsx")),(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&x(e)},364170:(e,t,r)=>{r.d(t,{F:()=>M});var n,a=r(202784),o=r(239398),s=r(783112),i=r(107267),l=r(601848),u=r(656695),c=r(241515),d=r(868789),p=r(735103),f=r(182955),g=r(810435),y=r(5627),m=r(552322);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(){S=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,s=Object.create(o.prototype),i=new P(n||[]);return a(s,"_invoke",{value:I(e,r,i)}),s}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var p="suspendedStart",f="suspendedYield",g="executing",y="completed",m={};function h(){}function w(){}function b(){}var x={};u(x,s,(function(){return this}));var T=Object.getPrototypeOf,k=T&&T(T(G([])));k&&k!==r&&n.call(k,s)&&(x=k);var C=b.prototype=h.prototype=Object.create(x);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function r(a,o,s,i){var l=d(e[a],e,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==v(c)&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,s,i)}),(function(e){r("throw",e,s,i)})):t.resolve(c).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function I(t,r,n){var a=p;return function(o,s){if(a===g)throw new Error("Generator is already running");if(a===y){if("throw"===o)throw s;return{value:e,done:!0}}for(n.method=o,n.arg=s;;){var i=n.delegate;if(i){var l=L(i,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=g;var u=d(t,r,n);if("normal"===u.type){if(a=n.done?y:f,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=y,n.method="throw",n.arg=u.arg)}}}function L(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=d(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function G(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(v(t)+" is not iterable")}return w.prototype=b,a(C,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:w,configurable:!0}),w.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},A(M.prototype),u(M.prototype,i,(function(){return this})),t.AsyncIterator=M,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var s=new M(c(e,r,n,a),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},A(C),u(C,l,"Generator"),u(C,s,(function(){return this})),u(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=G,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return i.type="throw",i.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var l=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(l&&u){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;j(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:G(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function b(e,t,r,n,a,o,s){try{var i=e[o](s),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function x(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){b(o,n,a,s,i,"next",e)}function i(e){b(o,n,a,s,i,"throw",e)}s(void 0)}))}}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var T,k,C="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},A=(0,o.defineMessages)({title:{id:"VwWGjG",defaultMessage:[{type:0,value:"Confirm on phone"}]},description:{id:"In3vOT",defaultMessage:[{type:0,value:"Open Coinbase Wallet on your phone to confirm this transaction."}]},retry:{id:"jvhzSF",defaultMessage:[{type:0,value:"Resend notification"}]},dontSeeNotification:{id:"epKk4O",defaultMessage:[{type:0,value:"Don't see the notification?"}]}});function M(){var e=(0,i.useHistory)(),t=(0,s.Z)().formatMessage,r=(0,p.useStepper)(f.stepper),n=r.goBack,o=r.hasPreviousStep,v=(0,g.useSwapAnalyticsDetails)(),b=(0,l.usePhoneConfirmationStepBackButton)({chainDetails:v}),T=(0,l.usePhoneConfirmationStepRetry)({chainDetails:v}),k=(0,a.useRef)(!1);(0,l.usePhoneConfirmationStepViewed)({chainDetails:v});var C=(0,a.useCallback)((function(){b(),o?n():e.goBack()}),[b,o,n,e]),M=(0,y.k)(),I=M.signAndSubmitViaWalletlink,L=M.errorStateProps,E=(0,a.useCallback)(x(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(),e.next=3,I();case 3:case"end":return e.stop()}}),e)}))),[I,T]);(0,u.useOnMount)((function(){L||I()}));var j=(0,a.useMemo)((function(){return{label:t(A.retry),onClick:(e=x(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.current=!0,e.next=3,E();case 3:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})};var e}),[t,E]);return L&&!k.current?(0,m.jsx)(c.T,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},L)):(0,m.jsx)(d.n,{title:t(A.title),description:t(A.description),onDismiss:C,secondaryActionLabel:t(A.dontSeeNotification),retryAction:j})}C(M,"useHistory{history}\nuseIntl{{ formatMessage }}\nuseStepper{{ goBack, hasPreviousStep }}\nuseSwapAnalyticsDetails{chainDetails}\nusePhoneConfirmationStepBackButton{triggerAnalyticsBackButton}\nusePhoneConfirmationStepRetry{triggerAnalyticsRetry}\nuseRef{isUserCancelled}\nusePhoneConfirmationStepViewed{}\nuseCallback{onDismiss}\nuseSignAndSubmitViaWalletlink{{ signAndSubmitViaWalletlink, errorStateProps }}\nuseCallback{retryAction}\nuseOnMount{}\nuseMemo{retryActionProps}",(function(){return[i.useHistory,s.Z,p.useStepper,g.useSwapAnalyticsDetails,l.usePhoneConfirmationStepBackButton,l.usePhoneConfirmationStepRetry,l.usePhoneConfirmationStepViewed,y.k,u.useOnMount]})),(T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(T.register(A,"messages","/workspaces/apps/extension/src/screens/Trade/steps/PhoneConfirmationStep/PhoneConfirmationStep.tsx"),T.register(M,"PhoneConfirmationStep","/workspaces/apps/extension/src/screens/Trade/steps/PhoneConfirmationStep/PhoneConfirmationStep.tsx")),(k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&k(e)},975479:(e,t,r)=>{r.d(t,{E:()=>Z});var n,a=r(202784),o=r(239398),s=r(783112),i=r(497814),l=r(601848),u=r(990481),c=r(763353),d=r(283747),p=r(626553),f=r(254073),g=r.n(f),y=r(388758),m=r(352871),v=r(746425),h=r(790424),w=r(145753),S=r(735103),b=r(95898),x=r(992259),T=r(48972),k=r(318882),C=r(16418),A=r(182955),M=r(233396),I=r(810435),L=r(685841),E=r(552322);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function P(){P=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,s=Object.create(o.prototype),i=new E(n||[]);return a(s,"_invoke",{value:A(e,r,i)}),s}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var p="suspendedStart",f="suspendedYield",g="executing",y="completed",m={};function v(){}function h(){}function w(){}var S={};u(S,s,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(G([])));x&&x!==r&&n.call(x,s)&&(S=x);var T=w.prototype=v.prototype=Object.create(S);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(a,o,s,i){var l=d(e[a],e,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==j(c)&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,s,i)}),(function(e){r("throw",e,s,i)})):t.resolve(c).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function A(t,r,n){var a=p;return function(o,s){if(a===g)throw new Error("Generator is already running");if(a===y){if("throw"===o)throw s;return{value:e,done:!0}}for(n.method=o,n.arg=s;;){var i=n.delegate;if(i){var l=M(i,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=g;var u=d(t,r,n);if("normal"===u.type){if(a=n.done?y:f,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=y,n.method="throw",n.arg=u.arg)}}}function M(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,M(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=d(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function G(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(j(t)+" is not iterable")}return h.prototype=w,a(T,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:h,configurable:!0}),h.displayName=u(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,u(e,l,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},k(C.prototype),u(C.prototype,i,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var s=new C(c(e,r,n,a),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},k(T),u(T,l,"Generator"),u(T,s,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=G,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return i.type="throw",i.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var l=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(l&&u){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;L(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:G(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function G(e,t,r,n,a,o,s){try{var i=e[o](s),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function N(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){G(o,n,a,s,i,"next",e)}function i(e){G(o,n,a,s,i,"throw",e)}s(void 0)}))}}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==j(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===j(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,s,i=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return i}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?W(e,t):void 0}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var V,_,z="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},U=(0,o.defineMessages)({title:{id:"pEywIZ",defaultMessage:[{type:0,value:"To asset"}]},unverifiedLabel:{id:"e3GdQE",defaultMessage:[{type:0,value:"Unverified"}]},unverifiedDescription:{id:"THpkF7",defaultMessage:[{type:0,value:"We don't recognize these tokens. Verify them before swapping."}]},warningTitle:{id:"1GJmYT",defaultMessage:[{type:0,value:"This is an unverified token"}]},continueButton:{id:"26uMJp",defaultMessage:[{type:0,value:"Continue"}]},verifyButton:{id:"4lSPl6",defaultMessage:[{type:0,value:"Verify on "},{type:1,value:"blockExplorerName"}]},warningDescription:{id:"C2PBKN",defaultMessage:[{type:0,value:"Before you continue, we recommend verifying this token with a block explorer to be sure it\u2019s the one you want."}]},blockExplorerLabel:{id:"RwBARF",defaultMessage:[{type:0,value:"block explorer"}]}});function Z(e){var t,r,n=e.selectedWallet,o=(0,M.usePersistTradeContext)(),f=(0,S.useStepper)(A.stepper),j=f.goBack,G=f.goToStep,D=(0,s.Z)().formatMessage,B=(0,b.Z)(A.form),R=B.targetAssetId,W=B.selectedNetwork,V=B.targetAssetContractAddress,_=H((0,a.useState)(""),2),z=_[0],Z=_[1],Y=H((0,a.useState)(""),2),Q=Y[0],q=Y[1],X=(0,I.useSwapAnalyticsDetails)(),K=(0,l.useTradeSelectAsset)({chainDetails:X}),J=(0,l.useTradeSelectUnsupportedAsset)({chainDetails:X}),$=H((0,x.useToggler)(!1),2),ee=$[0],te=$[1],re=te.toggleOn,ne=te.toggleOff,ae=H((0,a.useState)(),2),oe=ae[0],se=ae[1],ie=(0,a.useCallback)(g()((function(e){return q(e)}),300),[]),le=(0,u.a)({chainId:X.chainId.toString(),limit:100,search:Q}),ue=le.swapAssets,ce=le.isLoading,de=le.isFetching,pe=le.isFetchingNextPage,fe=le.fetchNextPage,ge=le.hasNextPage,ye=(0,a.useCallback)((function(e){Z(e),ie(e)}),[ie]),me=(0,d.C)(),ve=(0,a.useCallback)((function(e){var t,r,n;e.swappable?K({selectedAssetId:e.swapId}):J({selectedAssetId:e.swapId}),e.unverified&&(0,l.logSelectAssetStepUnverifiedAssetSelected)({chainDetails:X}),o({key:"targetAssetId",value:e.swapId}),R.onChange(e.swapId),o({key:"targetAssetContractAddress",value:null===(t=e.address)||void 0===t?void 0:t.rawValue}),V.onChange(null!==(r=null===(n=e.address)||void 0===n?void 0:n.rawValue)&&void 0!==r?r:"undefined"),me(e),G("entry")}),[X,G,me,o,V,R,K,J]),he=(0,a.useCallback)((function(e){return function(){if(e.unverified)return re(),(0,l.logSelectAssetStepUnverifiedAssetClicked)({chainDetails:X}),void se(e);ve(e)}}),[X,ve,re]),we=(0,a.useMemo)((function(){return ue.filter((function(e){return!e.unverified}))}),[ue]),Se=(0,a.useMemo)((function(){if(!z)return ue;var e=ue.filter((function(e){return e.unverified}));return[].concat(F(we),F(e))}),[z,ue,we]),be=(0,a.useCallback)((function(e){var t,r=e.key,a=e.index,o=e.style,s=z&&a===we.length,i=z&&a>we.length,l=o.top,u=l%C.Xx==0?l+C.$s:l,c=O(O({},s?O(O({},o),{},{height:C.Xx+C.$s}):o),i?{top:u}:{});return(0,E.jsxs)("div",{style:c,children:[s?(0,E.jsx)(k.M,{label:D(U.unverifiedLabel),description:D(U.unverifiedDescription)}):null,(0,E.jsx)(y.p,{onSelect:he(Se[a]),asset:Se[a],disabled:(null==n?void 0:n.swapId)===(null===(t=Se[a])||void 0===t?void 0:t.swapId)||!Se[a].swappable,testID:"dex-to-asset-item-".concat(Se[a].network.rawValue,"-").concat(Se[a].currencyCode.rawValue),type:y.E.SWAP_TO_ASSET})]},r)}),[z,we.length,D,he,Se,null==n?void 0:n.swapId]),xe=(0,a.useCallback)((function(){G("selectNetwork")}),[G]),Te=(0,a.useCallback)(N(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:de||pe||!ge||ce||fe();case 1:case"end":return e.stop()}}),e)}))),[fe,ge,de,pe,ce]),ke=(0,a.useCallback)((function(e){var t=e.index;return Boolean(ue[t])}),[ue]),Ce=Se.length+(ge?100:0),Ae=(0,a.useCallback)((function(){if(oe){var e=(0,p.B)(oe);chrome.tabs.create({url:e})}}),[oe]),Me=(0,a.useCallback)((function(){oe&&ve(oe)}),[ve,oe]),Ie=(0,a.useCallback)((function(e){var t=e.index;return z&&t===we.length?C.Xx+C.$s:C.Xx}),[z,we]);return ee?(0,E.jsx)(L.S,{toggleOff:ne,onSubmit:Me,pictogramName:"warning",title:D(U.warningTitle),primaryButtonText:D(U.continueButton),secondaryButtonText:D(U.verifyButton,{blockExplorerName:D(null!==(t=c.BLOCK_EXPLORER_LABEL_MAP[null!==(r=null==oe?void 0:oe.chainId.toString())&&void 0!==r?r:"1"])&&void 0!==t?t:U.blockExplorerLabel)}),description:D(U.warningDescription),onSecondaryButtonPress:Ae}):(0,E.jsxs)(h.lL,{overflow:"hidden",height:"100%",header:(0,E.jsx)(m.l2,{variant:"secondary",title:D(U.title),handleBack:j}),children:[W.value?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(v.l,{network:W.value,onPress:xe,chainDetails:X}),(0,E.jsx)(T.Spacer,{vertical:2})]}):null,(0,E.jsx)(w.G,{query:z,onChange:ye}),(0,E.jsx)(i.b2,{threshold:10,rowCount:Ce,isRowLoaded:ke,loadMoreRows:Te,children:function(e){var t,r=e.onRowsRendered,n=e.registerChild;return(0,E.jsx)(i.aV,{rowCount:null!==(t=Se.length)&&void 0!==t?t:0,width:C.Nz,height:C.eX,rowHeight:Ie,rowRenderer:be,overscanRowCount:20,ref:n,onRowsRendered:r})}})]})}z(Z,"usePersistTradeContext{persistTradeContext}\nuseStepper{{ goBack, goToStep }}\nuseIntl{{ formatMessage }}\nuseFields{{ targetAssetId, selectedNetwork, targetAssetContractAddress }}\nuseState{[searchBarText, setSearchBarText]('')}\nuseState{[debouncedQuery, setDebouncedQuery]('')}\nuseSwapAnalyticsDetails{chainDetails}\nuseTradeSelectAsset{triggerAnalyticsSelectAsset}\nuseTradeSelectUnsupportedAsset{triggerAnalyticsSelectUnsupportedAsset}\nuseToggler{[\n    warningScreenVisible,\n    { toggleOn: warningScreenToggleOn, toggleOff: warningScreenToggleOff },\n  ]}\nuseState{[unverifiedAsset, setUnverifiedAsset]}\nuseCallback{debounceQuery}\nuseGetPaginatedSwapAssets{{ swapAssets, isLoading, isFetching, isFetchingNextPage, fetchNextPage, hasNextPage }}\nuseCallback{handleSearchChange}\nusePersistAssetSelection{persistSelection}\nuseCallback{selectAsset}\nuseCallback{getHandleSelect}\nuseMemo{verifiedAssets}\nuseMemo{orderedAssets}\nuseCallback{rowRenderer}\nuseCallback{onNetworkSelectionSubheaderPress}\nuseCallback{loadMoreRows}\nuseCallback{handleIsRowLoaded}\nuseCallback{handleVerifyPress}\nuseCallback{handleWarningButtonSubmit}\nuseCallback{getRowHeight}",(function(){return[M.usePersistTradeContext,S.useStepper,s.Z,b.Z,I.useSwapAnalyticsDetails,l.useTradeSelectAsset,l.useTradeSelectUnsupportedAsset,x.useToggler,u.a,d.C]})),(V="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(V.register(U,"messages","/workspaces/apps/extension/src/screens/Trade/steps/SelectAssetStep/SelectAssetStep.tsx"),V.register(Z,"SelectAssetStep","/workspaces/apps/extension/src/screens/Trade/steps/SelectAssetStep/SelectAssetStep.tsx")),(_="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&_(e)},999402:(e,t,r)=>{r.d(t,{P:()=>N});var n,a=r(202784),o=r(239398),s=r(783112),i=r(902721),l=r(101620),u=r(86296),c=r(969321),d=r(692687),p=r(674017),f=r(230156),g=r(230438),y=r(158856),m=r(352871),v=r(790424),h=r(735103),w=r(95898),S=r(960723),b=r(853052),x=r(540380),T=r(606058),k=r(48972),C=r(661641),A=r(182955),M=r(810435),I=r(552322);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var L,E,j="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},P=75,G=(0,o.defineMessages)({title:{id:"PebBTr",defaultMessage:[{type:0,value:"How do you want to pay the network fee?"}]},description:{id:"LJFG8E",defaultMessage:[{type:0,value:"You can pay with "},{type:1,value:"networkName"},{type:0,value:"'s native token ("},{type:1,value:"baseAssetCurrencyCode"},{type:0,value:"), or the asset you're swapping ("},{type:1,value:"sourceCurrencyCode"},{type:0,value:")."}]},availableAmount:{id:"LeAoJ1",defaultMessage:[{type:1,value:"amount"},{type:0,value:" available"}]},availableBalanceFromSwap:{id:"qPO3K0",defaultMessage:[{type:0,value:"Deduct from your swap"}]},primaryCTAButton:{id:"SKh0Nx",defaultMessage:[{type:0,value:"Continue"}]},secondaryCTAButton:{id:"vG8d4T",defaultMessage:[{type:0,value:"Cancel"}]},topUpButtonText:{id:"nuMeii",defaultMessage:[{type:0,value:"Top up your "},{type:1,value:"cryptoSymbol"},{type:0,value:" balance"}]}});function N(){var e,t,r,n,o,L,E,j=(0,s.Z)().formatMessage,N=(0,h.useStepper)(A.stepper),D=N.goToStep,O=N.goBack,B=(0,g.useActiveWalletGroupId)(),F=(0,y.useWalletsForWalletGroupId)(B),H=(0,l.useCurrencyFormatter)(),R=(0,w.Z)(A.form),W=R.mode,V=R.selectedNetwork,_=R.sourceWalletId,z=R.transactionDetailError,U=(0,p.useGetFeeWallet)(B,V.value),Z=(0,c.useIsDexDepositGasEnabled)(),Y=(0,d.ez)(B,{network:V.value}),Q=(0,M.useSwapAnalyticsDetails)();(0,i.useLogGasPaymentMethodViewed)();var q=(0,a.useMemo)((function(){var e;return Z&&("notEnoughBalanceForMinerFee"===(null==z||null===(e=z.value)||void 0===e?void 0:e.code)||Y)}),[Z,null==z||null===(e=z.value)||void 0===e?void 0:e.code,Y]),X=(0,a.useCallback)((function(e){return function(){(0,i.logGasPaymentOptionPressed)(e),W.onChange(e?f.SwapMode.Normal:f.SwapMode.Gasless),q&&e||D("confirmationPreview")}}),[D,q,W]),K=(0,a.useMemo)((function(){var e;return null==z||null===(e=z.value)||void 0===e?void 0:e.message}),[z]),J=(0,a.useMemo)((function(){return F.find((function(e){return e.id===_.value}))}),[_.value,F]),$=(0,a.useMemo)((function(){var e=V.value.asChain(),t=F.find((function(t){var r;return t.isBaseAsset&&t.currencyCode.code===(null==e?void 0:e.baseAssetCurrencyCode)&&(null===(r=t.network.asChain())||void 0===r?void 0:r.chainId.toString())===(null==e?void 0:e.chainId.toString())}));return t&&J?[t,J].map((function(e){var r,n=e.id===t.id,a=void 0!==e.balance?H.formatToFiat(e.currencyCode,e.decimals,e.balance,!1,e.contractAddress,e.network):"",o=W.value===f.SwapMode.Gasless&&e.id===J.id||W.value===f.SwapMode.Normal&&n,s=n?G.availableAmount:G.availableBalanceFromSwap;return(0,I.jsxs)(k.HStack,{bordered:!0,borderRadius:"roundedLarge",width:"100%",borderColor:o?"primary":void 0,spacing:0,testID:"swap-mode-option-box",justifyContent:"space-between",children:[(0,I.jsx)(x.ListCell,{testID:"swap-mode-option-".concat(e.currencyCode.code),media:(0,I.jsx)(b.CellMedia,{type:"asset",source:null!==(r=null==e?void 0:e.imageURL)&&void 0!==r?r:""}),title:null==e?void 0:e.currencyCode.code,description:j(s,{amount:a}),onPress:X((null==e?void 0:e.id)===(null==t?void 0:t.id))}),o?(0,I.jsx)(k.Box,{justifyContent:"center",alignItems:"center",spacingEnd:2,children:(0,I.jsx)(T.Icon,{name:"checkmark",size:"s"})}):null]},e.id)})):((0,u.cbReportError)({context:"swap-error",error:new Error("Unable to find native token wallet or source token wallet"),isHandled:!1,severity:"error"}),null)}),[H,j,X,W.value,V.value,J,F]),ee=(0,a.useCallback)((function(){(0,i.logEntryStepDepositGasButtonClicked)({chainDetails:Q,source:i.Source.EXTENSION}),D("depositGas")}),[Q,D]);return(0,I.jsxs)(v.lL,{header:(0,I.jsx)(m.l2,{variant:"secondary",handleBack:O}),height:"100%",children:[(0,I.jsxs)(k.VStack,{spacingHorizontal:3,height:"100%",children:[(0,I.jsx)(k.HStack,{alignItems:"center",gap:.5,children:(0,I.jsx)(C.TextTitle3,{as:"h1",children:j(G.title)})}),(0,I.jsx)(C.TextBody,{as:"p",color:"foregroundMuted",spacingTop:1,spacingBottom:3,children:j(G.description,{networkName:null!==(t=null==V||null===(r=V.value.asChain())||void 0===r?void 0:r.displayName)&&void 0!==t?t:"",baseAssetCurrencyCode:null!==(n=null==V||null===(o=V.value.asChain())||void 0===o?void 0:o.baseAssetCurrencyCode)&&void 0!==n?n:"",sourceCurrencyCode:null!==(L=null==J?void 0:J.currencyCode.code)&&void 0!==L?L:""})}),(0,I.jsx)(k.VStack,{justifyContent:"center",alignItems:"center",spacingVertical:1,gap:2,children:$})]}),q&&null!=U&&U.network&&W.value===f.SwapMode.Normal?(0,I.jsxs)(k.VStack,{spacingHorizontal:3,width:"100%",spacingVertical:2,children:[(0,I.jsx)(k.Box,{justifyContent:"flex-end",maxHeight:P,offsetHorizontal:1,spacingBottom:1,children:K?(0,I.jsx)(C.TextLegal,{as:"p",color:"negative",spacingHorizontal:2,children:K}):(0,I.jsx)(k.Spacer,{})}),(0,I.jsx)(S.Button,{block:!0,testID:"dex-confirmation-top-up-balance-button",onPress:ee,children:j(G.topUpButtonText,{cryptoSymbol:null==U||null===(E=U.network.asChain())||void 0===E?void 0:E.baseAssetCurrencyCode})})]}):null]})}j(N,"useIntl{{ formatMessage }}\nuseStepper{{ goToStep, goBack }}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseWalletsForWalletGroupId{wallets}\nuseCurrencyFormatter{currencyFormatter}\nuseFields{{ mode, selectedNetwork, sourceWalletId, transactionDetailError }}\nuseGetFeeWallet{feeWallet}\nuseIsDexDepositGasEnabled{isDepositGasEnabled}\nuseBaseAssetZeroBalanceError{zeroNativeAssetError}\nuseSwapAnalyticsDetails{chainDetails}\nuseLogGasPaymentMethodViewed{}\nuseMemo{isDepositGasButtonVisible}\nuseCallback{handlePress}\nuseMemo{errorMessage}\nuseMemo{sourceTokenWallet}\nuseMemo{gasTokenOptions}\nuseCallback{handleDepositGasPress}",(function(){return[s.Z,h.useStepper,g.useActiveWalletGroupId,y.useWalletsForWalletGroupId,l.useCurrencyFormatter,w.Z,p.useGetFeeWallet,c.useIsDexDepositGasEnabled,d.ez,M.useSwapAnalyticsDetails,i.useLogGasPaymentMethodViewed]})),(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(L.register(P,"MAX_SWAP_ERROR_HEIGHT","/workspaces/apps/extension/src/screens/Trade/steps/SelectGasPaymentMethod/SelectGasPaymentMethod.tsx"),L.register(G,"messages","/workspaces/apps/extension/src/screens/Trade/steps/SelectGasPaymentMethod/SelectGasPaymentMethod.tsx"),L.register(N,"SelectGasPaymentMethod","/workspaces/apps/extension/src/screens/Trade/steps/SelectGasPaymentMethod/SelectGasPaymentMethod.tsx")),(E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&E(e)},343001:(e,t,r)=>{r.d(t,{M:()=>D});var n,a=r(202784),o=r(239398),s=r(783112),i=r(497814),l=r(601848),u=r(51950),c=r(886855),d=r(546767),p=r(230438),f=r(158856),g=r(952180),y=r(352871),m=r(790424),v=r(609957),h=r(735103),w=r(95898),S=r(48972),b=r(661641),x=r(823245),T=r(182955),k=r(233396),C=r(810435),A=r(552322);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var M,I,L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},E=60,j=(0,o.defineMessages)({title:{id:"yGY9eN",defaultMessage:[{type:0,value:"Select network"}]},learnMoreMessage:{id:"zClqkq",defaultMessage:[{type:0,value:"Not sure? Learn the difference between Ethereum, Polygon, and other networks in our help center."}]},learnMore:{id:"o0ymWu",defaultMessage:[{type:0,value:"Learn more"}]}}),P="https://www.coinbase.com/wallet/getting-started-extension";function G(){var e=(0,s.Z)().formatMessage,t=(0,C.useSwapAnalyticsDetails)(),r=(0,l.useNetworkSwitcherLearnMore)({chainDetails:t}),n=(0,a.useCallback)((function(){r(),chrome.tabs.create({url:P,active:!1})}),[r]);return(0,A.jsx)(S.VStack,{spacingHorizontal:3,spacingBottom:3,children:(0,A.jsxs)(b.TextLabel2,{as:"span",spacingTop:2,color:"foregroundMuted",children:[e(j.learnMoreMessage)," ",(0,A.jsx)(b.Link,{testID:"trade-select-network-learn-more",to:P,onPress:n,children:e(j.learnMore)})]})})}function N(){var e=(0,k.usePersistTradeContext)(),t=(0,s.Z)().formatMessage,r=(0,p.useActiveWalletGroupId)(),n=(0,f.useWalletsForWalletGroupId)(r),o=(0,x.EP)().supportedChains,b=(0,w.Z)(T.form),M=b.selectedNetwork,I=b.targetAssetId,L=b.targetAssetContractAddress,P=b.shouldUpdateCryptoAmount,N=(0,u.useNetworkBalances)(n),D=(0,C.useSwapAnalyticsDetails)(),O=(0,l.useNetworkSwitcherClose)({chainDetails:D}),B=(0,l.useNetworkSwitcherToggleNetwork)({chainDetails:D}),F=(0,l.useNetworkSwitcherToggleNetworkError)({chainDetails:D}),H=(0,h.useStepper)(T.stepper).goBack,R=(0,a.useRef)(null),W=(0,a.useCallback)((function(){O(),H()}),[H,O]),V=(0,a.useCallback)((function(t){var r=M.value.asChain(),n=null==t?void 0:t.asChain(),a={previousChainId:null==r?void 0:r.chainId,nextChainId:null==n?void 0:n.chainId};t?(e({key:"selectedNetwork",value:t.rawValue.split("/")[0],clearPreviousContext:!0}),B(a),M.onChange(t),I.onChange(""),L.onChange(""),M.value!==t&&P.onChange(!0),H()):F(a)}),[M,e,B,I,L,H,F,P]),_=(0,a.useCallback)((function(e){var t,r,n=e.key,a=e.index,s=e.style,i=null!==(t=o[a])&&void 0!==t?t:void 0;if(i){var l=c.Network.fromSupportedChain(i),u=null!==(r=N.get(l.rawValue))&&void 0!==r?r:new g.Decimal(0),p=d.NetworkWithBalance.fromSupportedChainWithBalance(i,u);return(0,A.jsx)("div",{style:s,children:(0,A.jsx)(v.h,{network:p,selected:c.Network.isEqual(M.value,l),onPress:V,disabled:i.isDisabled})},n)}}),[N,V,M.value,o]);return(0,A.jsxs)(m.lL,{header:(0,A.jsx)(y.l2,{variant:"secondary",title:t(j.title),handleBack:W}),height:"100%",children:[(0,A.jsx)(S.VStack,{ref:R,flexGrow:1,spacingHorizontal:3,children:(0,A.jsx)(i._K,{scrollElement:R.current,children:function(e){var t=e.height,r=e.scrollTop;return(0,A.jsx)(i.qj,{disableHeight:!0,defaultHeight:t,children:function(e){var t=e.width,n=e.height;return(0,A.jsx)(i.aV,{autoHeight:!0,height:n||300,width:t||345,scrollTop:r,rowHeight:E,rowRenderer:_,rowCount:o.length,overscanRowCount:5})}})}})},"select-network-step-scroller"),(0,A.jsx)(G,{})]})}function D(){return(0,A.jsx)(a.Suspense,{fallback:null,children:(0,A.jsx)(N,{})})}L(G,"useIntl{{ formatMessage }}\nuseSwapAnalyticsDetails{chainDetails}\nuseNetworkSwitcherLearnMore{triggerAnalyticsLearnMore}\nuseCallback{onLearnMorePress}",(function(){return[s.Z,C.useSwapAnalyticsDetails,l.useNetworkSwitcherLearnMore]})),L(N,"usePersistTradeContext{persistTradeContext}\nuseIntl{{ formatMessage }}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseWalletsForWalletGroupId{wallets}\nuseConvertContext{{ supportedChains }}\nuseFields{{ selectedNetwork, targetAssetId, targetAssetContractAddress, shouldUpdateCryptoAmount }}\nuseNetworkBalances{networkBalanceMap}\nuseSwapAnalyticsDetails{chainDetails}\nuseNetworkSwitcherClose{triggetAnalyticsClose}\nuseNetworkSwitcherToggleNetwork{triggerAnalyticsToggle}\nuseNetworkSwitcherToggleNetworkError{triggerAnalyticsToggleError}\nuseStepper{{ goBack }}\nuseRef{container}\nuseCallback{onGoBack}\nuseCallback{onItemSelected}\nuseCallback{renderRow}",(function(){return[k.usePersistTradeContext,s.Z,p.useActiveWalletGroupId,f.useWalletsForWalletGroupId,x.EP,w.Z,u.useNetworkBalances,C.useSwapAnalyticsDetails,l.useNetworkSwitcherClose,l.useNetworkSwitcherToggleNetwork,l.useNetworkSwitcherToggleNetworkError,h.useStepper]})),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(M.register(E,"LIST_ITEM_SIZE","/workspaces/apps/extension/src/screens/Trade/steps/SelectNetworkStep/SelectNetworkStep.tsx"),M.register(j,"messages","/workspaces/apps/extension/src/screens/Trade/steps/SelectNetworkStep/SelectNetworkStep.tsx"),M.register(P,"LEARN_MORE_LINK","/workspaces/apps/extension/src/screens/Trade/steps/SelectNetworkStep/SelectNetworkStep.tsx"),M.register(G,"LearnMoreSection","/workspaces/apps/extension/src/screens/Trade/steps/SelectNetworkStep/SelectNetworkStep.tsx"),M.register(N,"SelectNetworkStepContent","/workspaces/apps/extension/src/screens/Trade/steps/SelectNetworkStep/SelectNetworkStep.tsx"),M.register(D,"SelectNetworkStep","/workspaces/apps/extension/src/screens/Trade/steps/SelectNetworkStep/SelectNetworkStep.tsx")),(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&I(e)},265887:(e,t,r)=>{r.d(t,{o:()=>x});var n,a=r(202784),o=r(239398),s=r(783112),i=r(601848),l=r(283747),u=r(230438),c=r(782581),d=r(735103),p=r(95898),f=r(381445),g=r(182955),y=r(233396),m=r(810435),v=r(552322);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var h,w,S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},b=(0,o.defineMessages)({title:{id:"YnPiDU",defaultMessage:[{type:0,value:"From asset"}]}});function x(){var e=(0,y.usePersistTradeContext)(),t=(0,s.Z)().formatMessage,r=(0,d.useStepper)(g.stepper),n=r.goBack,o=r.goToStep,h=(0,p.Z)(g.form),w=h.sourceWalletId,S=h.targetAssetId,x=h.cryptoAmount,T=h.selectedNetwork,k=h.shouldUpdateCryptoAmount,C=(0,u.useActiveWalletGroupId)(),A=(0,c.useSwappableWallets)(C,{network:T.value}),M=(0,m.useSwapAnalyticsDetails)(),I=(0,i.useTradeSelectWallet)({chainDetails:M}),L=(0,l.C)(),E=(0,a.useCallback)((function(t){I({selectedWallet:t.id}),w.onChange(t.id),w.value!==t.id&&k.onChange(!0),e({key:"sourceWalletId",value:t.id}),e({key:"cryptoAmount",value:Number(x.value)}),L(t),o("entry")}),[I,w,e,x.value,L,o,k]);return(0,v.jsx)(f.i,{testIdPrefix:"dex-from",showNetworkSelection:!0,wallets:A,onBack:n,onSelect:E,network:T.value,customNavTitle:t(b.title),targetAssetId:S.value,context:f.g.Swap})}S(x,"usePersistTradeContext{persistTradeContext}\nuseIntl{{ formatMessage }}\nuseStepper{{ goBack, goToStep }}\nuseFields{{ sourceWalletId, targetAssetId, cryptoAmount, selectedNetwork, shouldUpdateCryptoAmount }}\nuseActiveWalletGroupId{walletGroupId}\nuseSwappableWallets{wallets}\nuseSwapAnalyticsDetails{chainDetails}\nuseTradeSelectWallet{triggerAnalyticsSelectWallet}\nusePersistAssetSelection{persistSelection}\nuseCallback{handleSelect}",(function(){return[y.usePersistTradeContext,s.Z,d.useStepper,p.Z,u.useActiveWalletGroupId,c.useSwappableWallets,m.useSwapAnalyticsDetails,i.useTradeSelectWallet,l.C]})),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(h.register(b,"messages","/workspaces/apps/extension/src/screens/Trade/steps/SelectSourceStep/SelectSourceStep.tsx"),h.register(x,"SelectSourceStep","/workspaces/apps/extension/src/screens/Trade/steps/SelectSourceStep/SelectSourceStep.tsx")),(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&w(e)},449513:(e,t,r)=>{r.d(t,{_:()=>D});var n,a=r(202784),o=r(239398),s=r(783112),i=r(107267),l=r(601848),u=r(760933),c=r(656695),d=r(230156),p=r(976974),f=r(613958),g=r(335184),y=r(40217),m=r(735103),v=r(95898),h=r(186387),w=r(488869),S=r(182955),b=r(233396),x=r(335657),T=r(907075),k=r(810435),C=r(252844),A=r(552322);function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==M(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===M(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var j,P,G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},N=(0,o.defineMessages)({title:{id:"mjtgmK",defaultMessage:[{type:0,value:"You're swapping "},{type:1,value:"formattedTitleAmounts"},{type:0,value:" to"}]},gaslessTitle:{id:"qlRiA7",defaultMessage:[{type:0,value:"Initiated a swap from "},{type:1,value:"formattedTitleAmounts"},{type:0,value:" to"}]},gaslessDescription:{id:"DI3D/V",defaultMessage:[{type:1,value:"networkFee"},{type:0,value:" deducted from your swap to cover the "},{type:1,value:"network"},{type:0,value:" network fee"}]},done:{id:"r5qei9",defaultMessage:[{type:0,value:"Done"}]},viewTransactions:{id:"7gEbQd",defaultMessage:[{type:0,value:"View transactions"}]},viewOnExtension:{id:"/fDoaf",defaultMessage:[{type:0,value:"The status of this transaction is available in your Coinbase Wallet browser extension."}]}});function D(){var e=(0,s.Z)().formatMessage,t=(0,v.Z)(S.form),r=t.cryptoAmount,n=t.targetAssetId,o=t.sourceWalletId,M=t.ledgerSwapError,I=t.swapTradeResponse.value,E=t.browserMode,j=t.selectedNetwork.value,P=t.mode.value,G=t.networkFeeInFiat.value,D=(0,k.useSwapAnalyticsDetails)(),O=(0,l.useStatusStepViewed)({chainDetails:D}),B=(0,m.useStepper)(S.stepper).goBack,F=(0,i.useHistory)(),H=(0,w.useLaunchSprig)(),R=(0,y.useExtensionPerfMark)((0,p.toExtensionName)(p.PERF_MARKS.swap),p.SWAP_MARKS.trigger_swap,{logMetric:!0}).end;if((0,a.useEffect)((function(){!M.value&&I&&R()}),[M,R,I]),!I)throw new Error("swapTradeResponse was missing in StatusStep");var W=(0,u.useFormatTradeAmounts)(I),V=W.sourceFiatAmount,_=W.sourceCryptoAmount,z=W.targetFiatAmount,U=W.targetCryptoAmount,Z=(0,b.usePersistTradeContext)(),Y=(0,x.useRetrieveTradeContext)();(0,c.useOnMount)((function(){var e=Y();return(null==e?void 0:e.stepperPosition)!==T.TradeStepsEnum.STATUS&&Z({key:"stepperPosition",value:T.TradeStepsEnum.STATUS}),O({cryptoAmount:Number(r.value),sourceWalletId:o.value,targetAssetId:n.value,sourceFiatAmount:V,sourceCryptoAmount:_,targetFiatAmount:z,targetCryptoAmount:U}),(0,l.logPreserveStateTxSuccess)(),function(){M.value&&(null==M||M.onChange(void 0))}}));var Q=(0,a.useCallback)((function(){H("makeDEXTrade"),F.replace("/portfolio")}),[F,H]),q=(0,a.useCallback)((function(){H("makeDEXTrade"),F.replace("/transactions")}),[F,H]),X=(0,a.useMemo)((function(){return{key:"done-button",name:"doneButton",onPress:Q,loading:!1,variant:"primary",block:!0,children:e(N.done)}}),[e,Q]),K=(0,a.useMemo)((function(){return{key:"view-transactions-button",name:"viewTransactionsButton",onPress:q,loading:!1,testID:"status-view-transactions-button",variant:"secondary",block:!0,children:e(N.viewTransactions)}}),[e,q]),J=(0,a.useMemo)((function(){var e=V?"(".concat(V,")"):"";return"".concat(_," ").concat(e)}),[_,V]),$=(0,a.useMemo)((function(){var e=z?"(".concat(z,")"):"";return"".concat(U," ").concat(e)}),[U,z]),ee=(0,a.useMemo)((function(){var t=P===d.SwapMode.Normal?N.title:N.gaslessTitle;return e(t,{formattedTitleAmounts:J})}),[e,J,P]),te=(0,a.useMemo)((function(){var t;return E.value?e(N.viewOnExtension):P===d.SwapMode.Normal?E.value?e(N.viewOnExtension):void 0:e(N.gaslessDescription,{networkFee:G,network:null===(t=j.asChain())||void 0===t?void 0:t.displayName})}),[E.value,e,P,G,j]);if(M.value){var re,ne,ae,oe=M.value;return(0,A.jsx)(f.n,L(L({spacing:2,elevation:1},C.ng),{},{children:(0,A.jsx)(h.N,{handleBack:B,statusCode:null!==(re=oe.statusCode)&&void 0!==re?re:void 0,errorId:null!==(ne=oe.id)&&void 0!==ne?ne:void 0,errorMessage:null!==(ae=oe.message)&&void 0!==ae?ae:void 0})}))}return(0,A.jsx)(g.L,{status:g.q.SUCCESS,title:ee,description:te,subtitle:$,descriptionColor:"foregroundMuted",primaryButtonProps:E.value?void 0:X,secondaryButtonProps:E.value?void 0:K})}G(D,"useIntl{{ formatMessage }}\nuseFields{{\n    cryptoAmount,\n    targetAssetId,\n    sourceWalletId,\n    ledgerSwapError,\n    swapTradeResponse: { value: swapTradeResponse },\n    browserMode,\n    selectedNetwork: { value: selectedNetwork },\n    mode: { value: mode },\n    networkFeeInFiat: { value: networkFee },\n  }}\nuseSwapAnalyticsDetails{chainDetails}\nuseStatusStepViewed{triggerAnalyticsStatusViewed}\nuseStepper{{ goBack: goBackOneStep }}\nuseHistory{history}\nuseLaunchSprig{launchSprig}\nuseExtensionPerfMark{{ end: markEndSwapwPerf }}\nuseEffect{}\nuseFormatTradeAmounts{{ sourceFiatAmount, sourceCryptoAmount, targetFiatAmount, targetCryptoAmount }}\nusePersistTradeContext{persistTradeContext}\nuseRetrieveTradeContext{retrieveTradeContext}\nuseOnMount{}\nuseCallback{goToPortfolio}\nuseCallback{goToTransactions}\nuseMemo{primaryButtonProps: ButtonProps}\nuseMemo{secondaryButtonProps: ButtonProps}\nuseMemo{formattedTitleAmounts}\nuseMemo{subtitleFormatted}\nuseMemo{title}\nuseMemo{description}",(function(){return[s.Z,v.Z,k.useSwapAnalyticsDetails,l.useStatusStepViewed,m.useStepper,i.useHistory,w.useLaunchSprig,y.useExtensionPerfMark,u.useFormatTradeAmounts,b.usePersistTradeContext,x.useRetrieveTradeContext,c.useOnMount]})),(j="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(j.register(N,"messages","/workspaces/apps/extension/src/screens/Trade/steps/StatusStep/StatusStep.tsx"),j.register(D,"StatusStep","/workspaces/apps/extension/src/screens/Trade/steps/StatusStep/StatusStep.tsx")),(P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&P(e)},11747:(e,t,r)=>{r.d(t,{Y:()=>I});var n,a=r(202784),o=r(239398),s=r(783112),i=r(107267),l=r(601848),u=r(763353),c=r(352871),d=r(790424),p=r(266543),f=r(735103),g=r(960723),y=r(853052),m=r(606058),v=r(29904),h=r(661641),w=r(182955),S=r(121387),b=r(552322);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var x,T,k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},C=(0,o.defineMessages)({nuxTitle:{id:"1Zrxbt",defaultMessage:[{type:0,value:"Get the best price when you swap"}]},nuxSubTitleNonCBPay:{id:"Bkf6Xt",defaultMessage:[{type:0,value:"Buy or transfer crypto to your Coinbase Wallet"}]},cbPayButton:{id:"nxVfG7",defaultMessage:[{type:0,value:"Add crypto to your wallet"}]},title:{id:"vw3qM7",defaultMessage:[{type:0,value:"Get the best price on swaps"}]},label:{id:"0mbUyO",defaultMessage:[{type:0,value:"We check multiple sources to save you time and get you the lowest price."}]},swapButton:{id:"7kEyER",defaultMessage:[{type:0,value:"Swap now"}]},learnMoreButton:{id:"KhQxU2",defaultMessage:[{type:0,value:"Learn more"}]},priceCheckLabel:{id:"XNj/ck",defaultMessage:[{type:0,value:"Price checks on over 75 DEXes"}]},priceCheckDescription:{id:"9J2IuV",defaultMessage:[{type:0,value:"We check over 75 DEXes for the best route and price on your swap."}]},tokensLabel:{id:"cDt3sr",defaultMessage:[{type:0,value:"Trade over 26,000 tokens"}]},tokensDescription:{id:"MN5vko",defaultMessage:[{type:0,value:"Swap across 6 major chains including Ethereum, Polygon, BNB Chain, and Solana."}]},simulationLabel:{id:"MKSPCG",defaultMessage:[{type:0,value:"Protected with swap simulation"}]},simulationDescription:{id:"3l3Llr",defaultMessage:[{type:0,value:"Avoid losing funds with swap simulations. We\u2019ll warn you, if your swap might fail."}]},btnGroupA11yText:{id:"0ElHKg",defaultMessage:[{type:0,value:"Action buttons"}]}}),A="true",M={spacingVertical:0,spacingHorizontal:1};function I(){var e=(0,s.Z)().formatMessage,t=(0,i.useHistory)().goBack,r=(0,f.useStepper)(w.stepper).goToStep;(0,l.useLogSwapNuxViewed)();var n=(0,a.useCallback)((function(){localStorage.setItem(S.hasViewedSwapNUXLocalStorageKey,A)}),[]),o=(0,a.useCallback)((function(){n(),r("entry")}),[r,n]),x=(0,a.useCallback)((function(){n(),t()}),[t,n]),T=(0,a.useCallback)((function(){(0,l.logSwapNuxLearnMoreClicked)(),chrome.tabs.create({url:u.SWAP_LEARN_MORE_URL,active:!1})}),[]);return(0,b.jsxs)(d.lL,{header:(0,b.jsx)(c.l2,{handleBack:x}),height:"100%",children:[(0,b.jsxs)(v.VStack,{alignItems:"center",spacingHorizontal:3,overflow:"scroll",children:[(0,b.jsx)(p.x,{alt:e(C.title)}),(0,b.jsx)(v.VStack,{spacingTop:1,children:(0,b.jsx)(h.TextTitle3,{as:"h1",spacingTop:1,spacingBottom:1,children:e(C.title)})}),(0,b.jsx)(y.ContentCell,{title:e(C.priceCheckLabel),description:e(C.priceCheckDescription),media:(0,b.jsx)(m.Icon,{name:"checkmark",size:"s",color:"foreground",spacingTop:.5}),compact:!0,reduceHorizontalSpacing:!0,outerSpacing:M}),(0,b.jsx)(y.ContentCell,{title:e(C.tokensLabel),description:e(C.tokensDescription),media:(0,b.jsx)(m.Icon,{name:"checkmark",size:"s",color:"foreground",spacingTop:.5}),compact:!0,reduceHorizontalSpacing:!0,outerSpacing:M}),(0,b.jsx)(y.ContentCell,{title:e(C.simulationLabel),description:e(C.simulationDescription),media:(0,b.jsx)(m.Icon,{name:"checkmark",size:"s",color:"foreground",spacingTop:.5}),compact:!0,reduceHorizontalSpacing:!0,outerSpacing:M})]}),(0,b.jsx)(v.VStack,{spacingHorizontal:3,spacingBottom:3,children:(0,b.jsxs)(g.ButtonGroup,{block:!0,vertical:!0,accessibilityLabel:e(C.btnGroupA11yText),children:[(0,b.jsx)(g.Button,{block:!0,onPress:o,testID:"swap-nux-swap-button",compact:!0,children:e(C.swapButton)}),(0,b.jsx)(g.Button,{block:!0,compact:!0,onPress:T,testID:"swap-nux-learn-more-button",variant:"secondary",children:e(C.learnMoreButton)})]})})]})}k(I,"useIntl{{ formatMessage }}\nuseHistory{{ goBack }}\nuseStepper{{ goToStep }}\nuseLogSwapNuxViewed{}\nuseCallback{updateLocalStorage}\nuseCallback{handlePress}\nuseCallback{handleGoBack}\nuseCallback{handleLearnMorePress}",(function(){return[s.Z,i.useHistory,f.useStepper,l.useLogSwapNuxViewed]})),(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(x.register(C,"messages","/workspaces/apps/extension/src/screens/Trade/steps/SwapNux/SwapNux.tsx"),x.register(A,"localStorageValue","/workspaces/apps/extension/src/screens/Trade/steps/SwapNux/SwapNux.tsx"),x.register(M,"zeroCellSpacing","/workspaces/apps/extension/src/screens/Trade/steps/SwapNux/SwapNux.tsx"),x.register(I,"SwapNux","/workspaces/apps/extension/src/screens/Trade/steps/SwapNux/SwapNux.tsx")),(T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&T(e)},644279:(e,t,r)=>{r.d(t,{f:()=>u});var n,a=r(202784);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var o,s,i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},l={1:"28",137:"21",56:"23",43114:"11",10:"9"};function u(e){return(0,a.useMemo)((function(){return e?l[Number(e)]:""}),[e])}i(u,"useMemo{}"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(o.register(l,"SOURCES_BY_CHAIN_ID","/workspaces/libs/data/hooks/Swap/useNumSourcesByChain.tsx"),o.register(u,"useNumSourcesByChain","/workspaces/libs/data/hooks/Swap/useNumSourcesByChain.tsx")),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)},256637:(e,t,r)=>{r.d(t,{w:()=>k});var n,a=r(202784),o=r(239398),s=r(587952),i=r(306915),l=r(759301),u=r(53610),c=r(206087),d=r(101620),p=r(978857),f=r(839668),g=r(524801),y=r(21717),m=r(886855),v=r(692687),h=r(158856),w=r(395545);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var S,b,x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},T=(0,o.defineMessages)({highPriceImpactTitle:{id:"8Mrpml",defaultMessage:[{type:0,value:"High price impact"}]},highPriceImpactMessage:{id:"Hjwc8H",defaultMessage:[{type:0,value:"Due to high price impact, you\u2019ll lose a lot of value on this swap. Try a different token."}]},notEnoughBalanceForMinerFeeMessage:{id:"IZUdH3",defaultMessage:[{type:0,value:"You have "},{type:1,value:"fiatTotalAvailableBalance"},{type:0,value:" in "},{type:1,value:"cryptoSymbol"},{type:0,value:", but you need a total of "},{type:1,value:"fiatTotalTransactionValue"},{type:0,value:" to proceed."}]},learnMore:{id:"9DtuSP",defaultMessage:[{type:0,value:"Learn more"}]},failureWarningMessage:{id:"Z3+b9o",defaultMessage:[{type:0,value:"This transaction will likely fail. If it does, you'll lose the network fee."}]}});function k(e,t){var r=t.swapTrade,n=t.unsignedApproveTx,o=t.unsignedSwapTx,S=t.intlFormatters.formatMessage,b=(0,d.useCurrencyFormatter)(),x=(0,p.useCalculateNetworkFees)({unsignedEthTx:o,unsignedApproveTx:n}),k=x.networkMaxFee,C=x.networkEstimatedFee,A=(0,a.useRef)(!1),M=(0,y.useActiveAccount)().hasLocallyStoredKey,I=(0,v.ez)(e,{network:r.quote.fromAsset.network}),L=(0,h.useWalletsForWalletGroupId)(e).find((function(e){return g.CurrencyCode.isEqual(e.currencyCode,o.feeCurrencyCode)&&f.Blockchain.isEqual(e.blockchain,o.blockchain)&&m.Network.isEqual(e.network,o.network)})),E=(0,a.useMemo)((function(){var e,t,n;null!=L&&L.isSolanaNetwork()?e=r.quote.fromAsset.currencyCode.rawValue===u.SOLANA_SYMBOL?BigInt(null!==(t=r.tx.value)&&void 0!==t?t:0):0n:e=r.tx.from===(null==L?void 0:L.primaryAddress)?BigInt(null!==(n=r.tx.value)&&void 0!==n?n:0):0n;return(o instanceof l.EthereumUnsignedLegacyTx?C:k)+e}),[r.quote.fromAsset.currencyCode.rawValue,r.tx.from,r.tx.value,L,o,C,k]),j=(0,a.useMemo)((function(){return void 0!==(null==L?void 0:L.balance)&&L.balance>=E}),[L,E]),P=(0,a.useMemo)((function(){var e,t=null==L?void 0:L.network.asChain();return{highPriceImpact:{type:"highPriceImpact",title:S(T.highPriceImpactTitle),isDismissible:!1,showErrorIcon:!0,message:S(T.highPriceImpactMessage),analytics:{eventName:"trade.confirmation_preview_step.high_price_impact",eventProperties:{componentType:w.ComponentType.text,action:w.ActionType.render,chainDisplayName:null==t?void 0:t.displayName,isStandalone:M,isLayer2:null==t?void 0:t.isLayer2,isTestnet:null==t?void 0:t.isTestnet}}},notEnoughBalanceForMinerFee:{type:"notEnoughBalanceForMinerFee",isDismissible:!1,showErrorIcon:!0,message:S(T.notEnoughBalanceForMinerFeeMessage,{cryptoSymbol:o.feeCurrencyCode.code,fiatTotalAvailableBalance:void 0!==(null==L?void 0:L.balance)&&null!=L&&L.currencyCode?b.formatToFiat(L.currencyCode,L.decimals,L.balance,!1,L.contractAddress,L.network,!0,!0):"",fiatTotalTransactionValue:L?b.formatToFiat(o.feeCurrencyCode,o.feeCurrencyDecimal,E,!1,void 0,L.network):""}),analytics:{eventName:"trade.confirmation_preview_step.not_enough_eth_balance",eventProperties:{componentType:w.ComponentType.text,action:w.ActionType.render,totalEthereumRequired:Number(E)}}},zeroBalanceForMinerFee:{type:"zeroBalanceForMinerFee",message:null!==(e=null==I?void 0:I.message)&&void 0!==e?e:"",isDismissible:!1,showErrorIcon:!0},warning:{type:"warning",isDismissible:!1,showErrorIcon:!0,message:S(T.failureWarningMessage),analytics:{eventName:"trade.confirmation_preview_step.warning",eventProperties:{componentType:w.ComponentType.text,action:w.ActionType.render}}}}}),[L,S,M,o.feeCurrencyCode,o.feeCurrencyDecimal,b,E,null==I?void 0:I.message]);return(0,a.useMemo)((function(){var e=o.network.asChain(),t=0n,n=0n,a=0n;return o instanceof i.EthereumUnsigned1559Tx?(t=o.maxFeePerGas/BigInt(Math.pow(10,9)),n=BigInt(o.gasLimit)):(o instanceof l.EthereumUnsignedLegacyTx&&(t=o.gasPrice/BigInt(Math.pow(10,9)),n=o.gasLimit),o instanceof c.SolanaUnsignedTransaction&&(a=o.estimatedFee)),I?P.zeroBalanceForMinerFee:j?r.quote.warning?P.warning:r.quote.highPriceImpact?P.highPriceImpact:void 0:(A.current||(A.current=!0,(0,s.logConfirmTransactionGasPriceFailure)({blockchain:o.blockchain.rawValue,chainName:e.displayName,chainId:e.chainId.toString(10),errorType:"InsufficientBalance",errorMessage:"Insufficient balance to pay gas fee",txSource:"dex".toLocaleString(),gasPriceInGwei:t.toString(),gasLimit:n.toString(),solanaGasPrice:a.toString()})),P.notEnoughBalanceForMinerFee)}),[P.highPriceImpact,P.notEnoughBalanceForMinerFee,P.warning,P.zeroBalanceForMinerFee,j,r.quote.highPriceImpact,r.quote.warning,o,I])}x(k,"useCurrencyFormatter{currencyFormatter}\nuseCalculateNetworkFees{{ networkMaxFee, networkEstimatedFee }}\nuseRef{hasDispatchedGasAnalyticsEvent}\nuseActiveAccount{{ hasLocallyStoredKey }}\nuseBaseAssetZeroBalanceError{zeroNativeAssetError}\nuseWalletsForWalletGroupId{wallets}\nuseMemo{totalBaseAssetTokenRequired}\nuseMemo{hasEnoughBalance}\nuseMemo{errors: ErrorMap}\nuseMemo{}",(function(){return[d.useCurrencyFormatter,p.useCalculateNetworkFees,y.useActiveAccount,v.ez,h.useWalletsForWalletGroupId]})),(S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(S.register(T,"messages","/workspaces/libs/data/hooks/Swap/useTransactionDetailErrors/useTransactionDetailErrors.tsx"),S.register(k,"useTransactionDetailErrors","/workspaces/libs/data/hooks/Swap/useTransactionDetailErrors/useTransactionDetailErrors.tsx")),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&b(e)},220540:(e,t,r)=>{r.d(t,{z:()=>f});var n,a,o,s=r(202784),i=r(306915),l=r(101620),u=r(978857),c=r(355988),d=r(886855),p=r(352087);function f(e){var t=e.unsignedApproveTx,r=e.unsignedSwapTx,n=e.swapQuote,a=e.chainId,o=(0,l.useCurrencyFormatter)(),f=(0,u.useCalculateNetworkFees)({unsignedApproveTx:t,unsignedEthTx:r}),g=f.networkBaseFee,y=f.networkMaxFee,m=f.networkEstimatedFee,v=(0,s.useMemo)((function(){var e=r instanceof i.EthereumUnsigned1559Tx?r.l1GasFee:0n;return o.fiatValue(r.feeCurrencyCode,r.feeCurrencyDecimal,null!=e?e:0n,void 0,d.Network.fromChainId({chainPrefix:(0,p.getPrefix)(a),chainId:a}))}),[a,o,r]);return(0,c.s)({swapQuote:n,networkEstimateFee:m,networkBaseFee:g,networkMaxFee:y,unsignedSwapTx:r,l1GasFeeInFiat:v}).isTradingMoreThanNetworkFee}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(f,"useCurrencyFormatter{currencyFormatter}\nuseCalculateNetworkFees{{ networkBaseFee, networkMaxFee, networkEstimatedFee }}\nuseMemo{l1GasFeeInFiat}\nuseCalculateTransactionTotal{{ isTradingMoreThanNetworkFee }}",(function(){return[l.useCurrencyFormatter,u.useCalculateNetworkFees,c.s]})),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(f,"useIsTradingMoreThanNetworkFee","/workspaces/libs/data/stores/Swap/hooks/useIsTradingMoreThanNetworkFee.tsx"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)},735107:(e,t,r)=>{r.r(t),r.d(t,{useSwapAPIVersion:()=>i});var n,a,o,s=r(698431);function i(){return(0,s.useIsFeatureEnabled)("standardize_errors_dex")?3:2}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(i,"useIsFeatureEnabled{hasStandardizeErrorsDex}",(function(){return[s.useIsFeatureEnabled]})),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(i,"useSwapAPIVersion","/workspaces/libs/data/stores/Swap/hooks/useSwapAPIVersion.tsx"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)},171618:(e,t,r)=>{r.d(t,{Z:()=>p});var n,a=r(334291),o=r.n(a),s=r(586421),i=r(48972),l=r(252163),u=r(552322);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var c,d;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function p(){return(0,u.jsxs)(i.HStack,{spacingTop:3,spacingBottom:2,justifyContent:"center",alignItems:"center",position:"relative",testID:"nav-title-component",children:[(0,u.jsx)(i.Box,{position:"absolute",left:16,children:(0,u.jsx)(l.Pressable,{disabled:!0,as:"button",onPress:o(),backgroundColor:"transparent",children:(0,u.jsx)(s.Icon,{name:"caretLeft",size:"m",color:"foreground"})})}),(0,u.jsxs)(i.VStack,{width:150,position:"relative",alignItems:"center",top:0,children:[(0,u.jsx)(i.Fallback,{width:"100%",height:24}),(0,u.jsx)(i.Spacer,{vertical:.5}),(0,u.jsx)(i.Fallback,{width:"100%",height:16})]})]})}(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&c.register(p,"NavTitleFallback","/workspaces/libs/wallet-cds-extension/components/NavTitle/NavTitleFallback.tsx"),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)},73084:(e,t,r)=>{r.d(t,{b:()=>c});var n,a=r(586421),o=r(48972),s=r(661641),i=r(552322);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var l,u;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function c(e){var t=e.showInfoIcon,r=void 0===t||t,n=e.message,l=e.testID;return(0,i.jsxs)(o.VStack,{testID:"warning-banner",spacingTop:.5,children:[(0,i.jsx)(o.Divider,{direction:"horizontal",width:"100%",spacingTop:1}),(0,i.jsx)(o.HStack,{alignItems:"center",spacingTop:.5,spacingHorizontal:3,children:(0,i.jsxs)(o.HStack,{alignItems:"center",spacingTop:1,children:[r&&(0,i.jsx)(a.Icon,{name:"info",size:"s",spacingEnd:2,testID:"info-icon"}),(0,i.jsx)(s.TextLabel2,{testID:l,as:"p",children:n})]})})]})}(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&l.register(c,"TxDetailInfo","/workspaces/libs/wallet-cds-extension/components/TxDetails/TxDetailInfo.tsx"),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&u(e)},266543:(e,t,r)=>{r.d(t,{x:()=>u});const n="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGQ9Ik0zNi4zMzMgMjYuNzA1Yy0xMi43NS4xNjctMjMgMTAuNTY2LTIzIDIzLjI5NSAwIDEyLjY0NiAxMC4xNjcgMjIuOTYyIDIyLjc1IDIzLjI5NGgxMTkuMjVsLjkxNy00Ni41ODlIMzYuMzMzWiIgZmlsbD0idXJsKCNiKSIvPjxwYXRoIGQ9Ik0xNTYuNjY3IDczLjI5NEMxNjkuNTUzIDczLjI5NCAxODAgNjIuODY1IDE4MCA1MHMtMTAuNDQ3LTIzLjI5NS0yMy4zMzMtMjMuMjk1Yy0xMi44ODcgMC0yMy4zMzQgMTAuNDMtMjMuMzM0IDIzLjI5NSAwIDEyLjg2NSAxMC40NDcgMjMuMjk0IDIzLjMzNCAyMy4yOTRaIiBmaWxsPSIjMDBEMTdGIi8+PHBhdGggZD0iTTc2LjY2NyAyMC4wNWM1LjUyMyAwIDEwLTQuNDcgMTAtOS45ODMgMC01LjUxNC00LjQ3Ny05Ljk4NC0xMC05Ljk4NHMtMTAgNC40Ny0xMCA5Ljk4NGMwIDUuNTEzIDQuNDc3IDkuOTgzIDEwIDkuOTgzWiIgZmlsbD0iIzBGNkZGRiIvPjxwYXRoIGQ9Ik04My4zMzMgOTkuOTE3YzUuNTIzIDAgMTAtNC40NyAxMC05Ljk4NCAwLTUuNTEzLTQuNDc3LTkuOTgzLTEwLTkuOTgzcy0xMCA0LjQ3LTEwIDkuOTgzYzAgNS41MTQgNC40NzcgOS45ODQgMTAgOS45ODRaIiBmaWxsPSIjMDAwIi8+PHBhdGggZD0iTTE1Ni42NjcgNzMuMjk0Yy0xMi45MTcgMC0yMy4zMzQtMTAuMzk5LTIzLjMzNC0yMy4yOTQgMC0xMi44OTUgMTAuNDE3LTIzLjI5NSAyMy4zMzQtMjMuMjk1djQ2LjU5WiIgZmlsbD0iIzAwNTJGRiIvPjxwYXRoIGQ9Ik0xNTcuMDgzIDU2LjE4MyAxNTIuNDYzIDYwbC4xNjgtNS45NzUtNS45NjQtMS4xNjIgNC43ODgtMy42NTEtMi42ODgtNS4zMTIgNS43OTYgMS40OTQgMi41Mi01LjM5NCAyLjUyIDUuMzk0TDE2NS40IDQzLjlsLTIuNjg4IDUuMzEyIDQuNzg4IDMuNjUxLTUuOTY1IDEuMTYyLjE2OCA1Ljk3NS00LjYyLTMuODE3WiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xNTYuNjY3IDY2LjYzOWM5LjIwNCAwIDE2LjY2Ni03LjQ1IDE2LjY2Ni0xNi42MzkgMC05LjE5LTcuNDYyLTE2LjYzOS0xNi42NjYtMTYuNjM5QzE0Ny40NjIgMzMuMzYxIDE0MCA0MC44MTEgMTQwIDUwYzAgOS4xOSA3LjQ2MiAxNi42MzkgMTYuNjY3IDE2LjYzOVpNMTE3LjgzMyA1MEgzMS4xNjdNMTA5LjI1IDQwLjc2NWw5LjUgOS40MDEtOS41IDkuNDAxIiBzdHJva2U9IiMwQTBCMEQiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+PHBhdGggZD0iTTE0My4wODMgMGgtNjYuMjV2MjAuMDVoNjYuMjVWMFoiIGZpbGw9InVybCgjYykiLz48cGF0aCBkPSJNMzYuNzUgNzkuODY3aDQ3LjE2NnYyMC4wNUgzNi43NXYtLjAwMmwtLjE2Ny4wMDJjLTUuNTIzIDAtMTAtNC40Ny0xMC05Ljk4NCAwLTUuNTEzIDQuNDc3LTkuOTgzIDEwLTkuOTgzbC4xNjcuMDAxdi0uMDg0WiIgZmlsbD0idXJsKCNkKSIvPjxwYXRoIGQ9Ik0xNTIuMzMzIDEwLjA2N2MwIDQuOTYtNC4wMjggOC45ODMtOSA4Ljk4M3MtOS00LjAyNC05LTguOTgzYzAtNC45NiA0LjAyOC04Ljk4NCA5LTguOTg0czkgNC4wMjQgOSA4Ljk4NFpNOTIuNSA5MC4wMTdjMCA0Ljk2LTQuMDI4IDguOTgzLTkgOC45ODNzLTktNC4wMjMtOS04Ljk4M2MwLTQuOTYgNC4wMjgtOC45ODQgOS04Ljk4NHM5IDQuMDI0IDkgOC45ODRaIiBmaWxsPSIjRkZENjAwIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIvPjxwYXRoIGZpbGw9InVybCgjZSkiIGQ9Ik0wIDYuNjY3aDI2LjY2N3Y2LjY2N0gweiIvPjxwYXRoIGZpbGw9InVybCgjZikiIGQ9Ik0xODYuNjY3IDg2LjY2N0gyMDB2Ni42NjdoLTEzLjMzM3oiLz48L2c+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMTIxLjY2NyIgeTE9IjMxLjI1IiB4Mj0iNjEuMjUiIHkyPSI3Mi45MTciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9Ii4zMzMiIHN0b3AtY29sb3I9IiNGRkQyMDAiLz48c3RvcCBvZmZzZXQ9Ii43NSIgc3RvcC1jb2xvcj0iIzAwRDE3RiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjIiB4MT0iOTQuMTY3IiB5MT0iLTMuMzMzIiB4Mj0iMTI2LjI1IiB5Mj0iMjIuMDgzIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIuMjcyIiBzdG9wLWNvbG9yPSIjMEY2RkZGIi8+PHN0b3Agb2Zmc2V0PSIuNzA0IiBzdG9wLWNvbG9yPSIjNURFMkY4Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImQiIHgxPSI2Ny45MTYiIHkxPSIxMDAiIHgyPSIxMy4zMDgiIHkyPSI4MC4wNyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iLjEzNSIgc3RvcC1jb2xvcj0iI0VCQ0VGOCIvPjxzdG9wIG9mZnNldD0iLjU4OSIgc3RvcC1jb2xvcj0iI0E1MjRGQyIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJlIiB4MT0iNy41IiB5MT0iNi4yNSIgeDI9IjIyLjkxNyIgeTI9IjExLjI1IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIuMjcyIiBzdG9wLWNvbG9yPSIjNUNFMkY4Ii8+PHN0b3Agb2Zmc2V0PSIuNzA0IiBzdG9wLWNvbG9yPSIjRUJDRUY4Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImYiIHgxPSIxODYuNDU4IiB5MT0iOTMuNzUiIHgyPSIyMDAuOTIyIiB5Mj0iODguNzE5IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIuMjY0IiBzdG9wLWNvbG9yPSIjRkZEMjAwIi8+PHN0b3Agb2Zmc2V0PSIuNjAyIiBzdG9wLWNvbG9yPSIjRUJDRUY4Ii8+PC9saW5lYXJHcmFkaWVudD48Y2xpcFBhdGggaWQ9ImEiPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0wIDBoMjAwdjEwMEgweiIvPjwvY2xpcFBhdGg+PC9kZWZzPjwvc3ZnPg==";var a,o=r(386744),s=r(552322);e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var i,l;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function u(e){var t=e.alt,r=e.scaleMultiplier,a=void 0===r?1:r,i=a*o.Zl.width,l=a*o.Zl.height;return(0,s.jsx)("img",{src:n,alt:t,"data-testid":"swap-nux-miami",width:i,height:l})}(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&i.register(u,"SwapNuxMiami","/workspaces/libs/wallet-cds-web/components/MiamiIllustrationWrapper/MiamiIllustrations/SwapNuxMiami.tsx"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},16418:(e,t)=>{t.Nz=t.eX=t.Xx=t.$s=t.AU=void 0,t.AU=33e3,t.$s=45,t.Xx=80,t.eX=425,t.Nz=370},121387:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useIsFirstSwap=t.hasViewedSwapNUXLocalStorageKey=void 0;const n=r(202784);t.hasViewedSwapNUXLocalStorageKey="hasViewedSwapNUXV2",t.useIsFirstSwap=function(){return(0,n.useMemo)((()=>!localStorage.getItem(t.hasViewedSwapNUXLocalStorageKey)),[])}},196873:(e,t,r)=>{t.Qw=t.qp=void 0;const n=r(306915),a=r(759301),o=r(206087),s=r(886855),i=r(57356),l=r(373881),u=r(271126);function c(e){const t=e.split(":"),r=t[0],n=BigInt(t[1]);return s.Network.fromChainId({chainPrefix:r,chainId:n})}function d(e){const{name:t,currencyCode:r,address:n,imageURL:a,swappable:o,aggregators:s,blockchain:l,chainId:u,decimals:c}=e;return new i.SwapAsset({name:t,currencyCode:r.rawValue,address:n?.rawValue,decimals:Number(c),imageURL:a,swappable:o,aggregators:s,chainId:Number(u),blockchain:l.rawValue})}function p(e){const{transaction:{feeCurrencyDecimal:t,gasLimit:r,nonce:s,transferValue:i,walletIndex:d,weiValue:p,network:f,metadata:g,estimatedFee:y,extraFee:m},wallet:v}=e,h=Object.assign(e),w=function(e){const t=e.addresses.map((e=>{const t={...e};return t.index=BigInt((0,u.parse)(e.index)),t})),r=BigInt(e.balance),n=BigInt(e.decimals),a=BigInt(e.selectedIndex),o=c(e.network),s=e.minimumBalance?BigInt(e.minimumBalance):void 0;return new l.Wallet({primaryAddress:e.primaryAddress,addresses:t,displayName:e.displayName,currencyCode:e.currencyCode,imageURL:e.imageURL,balance:r,decimals:n,blockchain:e.blockchain,minimumBalance:s,network:o,contractAddress:e.contractAddress,selectedIndex:a,accountId:e.accountId})}(v),S=Object.assign(e.transaction);let b;if(S.metadata=new Map(g),S.feeCurrencyDecimal=BigInt(t),S.gasLimit=void 0!==r?BigInt(r):void 0,S.nonce=void 0!==s?BigInt(s):void 0,S.transferValue=BigInt(i),S.walletIndex=void 0!==d?BigInt(d):void 0,S.weiValue=void 0!==p?BigInt(p):void 0,w.isSolanaNetwork())void 0!==y&&(S.estimatedFee=BigInt(y)),void 0!==m&&(S.extraFee=BigInt(m)),b=new o.SolanaUnsignedTransaction(v.primaryAddress,S.fromDomain,S.recipientAddress??"",S.recipientDomain,0n,v.network,v.currencyCode,v.blockchain,S.txAmount,S.feeCurrencyCode,S.feeCurrencyDecimal,S.estimatedFee,S.data,S.metadata,S.instructions,S.extraFee,S.nativeDappTransaction,S.decodedInstructionsData,S.shouldSavePendingTransaction);else if(e.transaction.isEthereumUnsigned1559Tx){const{maxFeePerGas:t,maxPriorityFeePerGas:r,baseFeePerGas:a,l1GasFee:o}=e.transaction;void 0!==t&&(S.maxFeePerGas=BigInt(t)),void 0!==r&&(S.maxPriorityFeePerGas=BigInt(r)),void 0!==a&&(S.baseFeePerGas=BigInt(a)),void 0!==o&&(S.l1GasFee=BigInt(o)),b=new n.EthereumUnsigned1559Tx(S.toAddress,void 0,S.fromAddress,void 0,S.walletIndex,S.nonce,S.weiValue,S.erc20V,S.data,S.maxFeePerGas,S.maxPriorityFeePerGas,S.gasLimit,S.network,S.currencyCode,S.blockchain,S.transferValue,S.feeCurrencyCode,S.feeCurrencyDecimal,S.recipientAddress,void 0,S.metadata,S.baseFeePerGas,S.l1GasFee)}else{const{gasPrice:t,l1GasFee:r}=e.transaction;void 0!==y&&(S.estimatedFee=BigInt(y)),void 0!==t&&(S.gasPrice=BigInt(t)),void 0!==r&&(S.l1GasFee=BigInt(r)),b=new a.EthereumUnsignedLegacyTx(S.toAddress,void 0,S.fromAddress,void 0,S.walletIndex,S.nonce,S.weiValue,S.erc20Value,S.data,S.l1GasFee,S.gasPrice,S.gasLimit,S.network,S.currencyCode,S.blockchain,S.transferValue,S.feeCurrencyCode,S.feeCurrencyDecimal,S.recipientAddress,void 0,S.metadata)}return h.transaction=b,h.transaction.network=c(f),h.wallet=w,h}t.qp=c,t.Qw=function(e){const{swapTrade:t,swapTx:r,approveTx:n,swapTxs:a}=JSON.parse(e),o=function(e){const t=Object.assign(e),{chainId:r,fee:{amount:n,baseAsset:a},quote:{chainId:o,fromAmount:s,toAmount:i,fromAsset:l,toAsset:u}}=e;t.chainId=BigInt(r);const c=Object.assign(e.fee);c.amount=BigInt(n),c.baseAsset=d(a),t.fee=c;const p=Object.assign(e.quote);return p.chainId=BigInt(o),p.fromAmount=BigInt(s),p.toAmount=BigInt(i),p.fromAsset=d(l),p.toAsset=d(u),t.quote=p,t}(t),s=p(r),i=a?.map((async e=>p(e)));return{swapTrade:o,swapTx:s,approveTx:n,swapTxs:i}}},510860:(e,t,r)=>{t.U=void 0;const n=r(202784),a=r(601848),o=r(230438),s=r(782581),i=r(158856),l=r(601879),u=r(182955),c=r(233396),d=r(335657),p=r(810435);t.U=function(e){const{sourceWalletId:t,targetAssetId:r,targetAssetContractAddress:f,selectedNetwork:g}=(0,l.useFields)(u.form),y=(0,o.useActiveWalletGroupId)(),m=(0,i.useWalletsForWalletGroupId)(y),v=(0,o.useActiveWalletGroupId)(),h=(0,s.useSwappableWallets)(v,{network:g.value}),w=(0,c.usePersistTradeContext)(),S=(0,d.useRetrieveTradeContext)(),b=(0,p.useSwapAnalyticsDetails)(),x=(0,a.useEntryStepToggleAssets)({chainDetails:b});return{toggleAssets:(0,n.useCallback)((()=>{if(!e)return;const n=(m.find((e=>e.swapId===r.value))??e).id,a=m.find((t=>t.id===e.id));if(!n||!a)return;x({sourceWalletId:n,targetAssetId:a.swapId}),t.onChange(n),r.onChange(a.swapId),f.onChange(a.contractAddress??"");const o=S();o&&(o?.sourceWalletId!==n&&w({key:"sourceWalletId",value:n}),o?.targetAssetId!==a.swapId&&w({key:"targetAssetId",value:a.swapId}),o?.targetAssetContractAddress!==a.contractAddress&&w({key:"targetAssetContractAddress",value:a.contractAddress}))}),[e,m,x,t,r,f,S,w]),isDisabled:(0,n.useMemo)((()=>!r.value||void 0===h||!h.find((e=>e.swapId===r.value))),[r.value,h])}}},5627:(e,t,r)=>{t.k=void 0;const n=r(202784),a=r(647933),o=r(601848),s=r(382969),i=r(230438),l=r(930830),u=r(735103),c=r(601879),d=r(182955),p=r(810435);t.k=function(){const e=(0,a.useHistory)(),[t,r]=(0,n.useState)(null),{goBack:f,goToStep:g}=(0,u.useStepper)(d.stepper),y=(0,s.useSignAndSubmitTransactionViaWalletLink)(),{unsignedSwapTxResult:{value:m},unsignedApproveTxResult:{value:v}}=(0,c.useFields)(d.form),h=v?.transaction,w=m?.transaction,S=(0,p.useSwapAnalyticsDetails)(),b=(0,o.useTradePhoneConfirmationStepMobileApprove)({chainDetails:S}),x=(0,o.useTradePhoneConfirmationStepMobileCancel)({chainDetails:S}),T=(0,o.useTradePhoneConfirmationStepWalletLinkError)({chainDetails:S}),k=(0,i.useActiveWalletGroupId)(),C=(0,l.useTxFeeWallet)(k,w),A=(0,n.useCallback)((()=>{b(),g("status"),r(null)}),[g,b]),M=(0,n.useCallback)((t=>{"UserRejectedWalletLinkRequest"===t.name?x():T(),r({errorMessage:t.message,onPrimaryButtonPress:()=>{r(null),f()},onSecondaryButtonPress:()=>e.replace("/portfolio"),secondaryButtonText:"Go Back Home",primaryButtonText:"Try Again"})}),[f,e,x,T]),I=(0,n.useCallback)((async()=>{if(!C||!w)return null;if(h)try{await y({unsignedTx:h,wallet:C})}catch(e){M(e)}try{await y({unsignedTx:w,wallet:C}),A()}catch(e){M(e)}}),[M,A,y,h,w,C]);return(0,n.useMemo)((()=>({signAndSubmitViaWalletlink:I,errorStateProps:t})),[t,I])}},336808:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.serializeSwapAsset=void 0;const a=n(r(817620));t.serializeSwapAsset=function(e){const t=(0,a.default)(e,"isBuyableWithCBPay","swapId"),{currencyCode:r,address:n,decimals:o,chainId:s,blockchain:i}=t;return{...t,currencyCode:r.rawValue,address:n?.rawValue,decimals:Number(o),chainId:Number(s),blockchain:i.rawValue}}},760933:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useFormatTradeAmounts=void 0;const n=r(202784),a=r(101620),o=r(886855),s=r(352087);t.useFormatTradeAmounts=function(e){const t=(0,a.useCurrencyFormatter)(),r=e.quote,i="SOL"===r.fromAsset.currencyCode.rawValue?void 0:r.fromAsset.address?.rawValue,l=(0,n.useMemo)((()=>{const e=t.fiatValue(r.fromAsset.currencyCode,r.fromAsset.decimals,r.fromAmount,i,o.Network.fromChainId({chainPrefix:(0,s.getPrefix)(r.chainId),chainId:r.chainId}),2);if(e)return t.fiatValueString(e)}),[t,i,r.chainId,r.fromAmount,r.fromAsset.currencyCode,r.fromAsset.decimals]),u=(0,n.useMemo)((()=>t.formatToCrypto({currencyCode:r.fromAsset.currencyCode,decimals:r.fromAsset.decimals,value:r.fromAmount,includeCode:!0,maxDisplayDecimals:8n,minDisplayDecimals:0n})),[t,r.fromAmount,r.fromAsset.currencyCode,r.fromAsset.decimals]),c=(0,n.useMemo)((()=>{const e=t.fiatValue(r.toAsset.currencyCode,r.toAsset.decimals,r.toAmount,r.toAsset.address?.rawValue,o.Network.fromChainId({chainPrefix:(0,s.getPrefix)(r.chainId),chainId:r.chainId}),2);if(e)return t.fiatValueString(e)}),[t,r.chainId,r.toAmount,r.toAsset.address?.rawValue,r.toAsset.currencyCode,r.toAsset.decimals]),d=(0,n.useMemo)((()=>t.formatToCrypto({currencyCode:r.toAsset.currencyCode,decimals:r.toAsset.decimals,value:r.toAmount,includeCode:!0,maxDisplayDecimals:8n,minDisplayDecimals:0n})),[t,r.toAmount,r.toAsset.currencyCode,r.toAsset.decimals]);return(0,n.useMemo)((()=>({sourceFiatAmount:l,sourceCryptoAmount:u,targetFiatAmount:c,targetCryptoAmount:d})),[u,l,d,c])}},969321:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useIsDexDepositGasEnabled=void 0;const n=r(214390),a=r(245556);t.useIsDexDepositGasEnabled=function(){return!(0,n.useOverridableKillSwitch)((0,a.getKillSwitchForPlatform)("kill_dex_deposit_gas"))}},989587:(e,t,r)=>{t.r=void 0;const n=r(760933);t.r=function(e){const{sourceFiatAmount:t,sourceCryptoAmount:r,targetFiatAmount:a,targetCryptoAmount:o}=(0,n.useFormatTradeAmounts)(e),{quote:s}=e;return{primaryItem:{title:s.fromAsset.name,iconSourceOrName:{iconUrl:s.fromAsset.imageURL,currencyCode:s.fromAsset.currencyCode?.code,network:s.fromAsset.network,showNetworkIcon:s.fromAsset.network.asChain()?.isLayer2||s.fromAsset.network.asChain()?.isNonEthChain},detail:t,subDetail:r,isAsset:!0,testID:"primary"},secondaryItem:{title:s.toAsset.name,iconSourceOrName:{iconUrl:s.toAsset.imageURL,currencyCode:s.toAsset.currencyCode?.code,network:s.toAsset.network,showNetworkIcon:s.toAsset.network.asChain()?.isLayer2||s.toAsset.network.asChain()?.isNonEthChain},detail:a,subDetail:o,isAsset:!0,testID:"secondary"}}}},612321:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useConcurrentSuspense=void 0;const n=r(202784);function a(e){return e}t.useConcurrentSuspense=function(...e){const t=(0,n.useRef)(!1),r=[],o=e.map((e=>function(e){try{return e?.(a)}catch(e){if(!t.current&&e instanceof Promise)return void r.push(e);throw e}}(e)));if(r.length>0)throw Promise.all(r);return t.current=!0,o}},895493:(e,t,r)=>{var n=r(348834).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.EIP712Domain=t.constructDomainSepator=t.asSignedRelayTx=t.generateNonceParams=t.generateTxRelayEventConfig=void 0;const a=r(587952),o=r(103184),s=r(446101),i=r(211627),l=r(886855),u=r(182074),c=r(91427),d=r(458105),p=r(410189),f=r(395545);t.generateTxRelayEventConfig=function(e,t,r){return{start:a.txSubmittedStart,success:a.txSubmittedSuccess,fail:a.txSubmittedFail,data:{loggingId:"ffb80dfe-60f4-4b71-be6b-a6c24dd785ce",action:f.ActionType.measurement,componentType:f.ComponentType.unknown,currencyCode:e.currencyCode.rawValue,chainName:t.displayName,chainId:t.chainId,isContractDeploy:!e.recipientAddress,blockchain:e.blockchain.rawValue,uuid:(0,p.v4)(),type:"extension",txSource:(e.metadata.get(s.TxMetadataKey_txSource)??"").toLocaleString(),isSponsoredTx:r===u.TxRelayType.SEND,relayType:r},addSuccessDataToLog:({Token:e})=>({Token:e})}},t.generateNonceParams=function(){return{nonce:`0x${n.from(crypto.getRandomValues(new Uint8Array(32))).toString("hex")}`,validAfter:0,validBefore:Math.round((new Date).getTime()/1e3)+300}},t.asSignedRelayTx=async function({unsignedTx:e,ethereumChain:t}){const r=await(0,o.getConfirmedEthereumTransactionCount)(e.fromAddress,l.Network.fromChainId({chainId:BigInt(t.chainId)}));return new i.EthereumSignedTx((0,p.v4)(),e.fromAddress,e.recipientAddress,r,BigInt(t.chainId),n.from([]),"",0n,e.transferValue,s.EthereumBlockchain,e.currencyCode,c.TxState.PENDING,0n)},t.constructDomainSepator=function(e){return e?d._TypedDataEncoder.hashDomain(e):"0x"},t.EIP712Domain=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}]},519454:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useSignAndRelayStandaloneCallback=void 0;const n=r(202784);t.useSignAndRelayStandaloneCallback=function(e,t,r,a,o){return(0,n.useCallback)((function(){return o(!0),e({unlockSuccess:function(){r?.(),t()},unlockError:function(e){e&&a?.(e),o(!1)}})}),[e,o,t,a,r])}},826179:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useSwapSignAndRelayStandalone=void 0;const a=r(202784),o=r(919630),s=r(446101),i=r(223933),l=r(785669),u=r(86296),c=r(519454),d=r(163785),p=r(345162),f=r(251728),g=r(937529),y=r(182074),m=r(752897),v=r(63504),h=n(r(817620)),w=r(59390),S=r(336808),b=r(895493);t.useSwapSignAndRelayStandalone=function({wallet:e,unsignedTx:t,signSuccess:r,signError:n,handleUnlock:x,domainSeparator:T,unlockSuccess:k,unlockError:C,gaslessSwapTrade:A,source:M}){const[I,L]=(0,a.useState)(!1),E=(0,f.useSaveTransactions)(),j=(0,a.useCallback)((async function(){try{if(!T)throw new Error("Missing domain separator");if(!t)throw new Error("Unsigned tx generation failed");if(!(0,l.isETHLegacyTx)(t)&&!(0,i.isETH1559Tx)(t))throw new Error("EIP-712 relays can only be performed on ETH Transactions");const n=t.network.asChain();if(!n)throw new Error(`Could not perform asChain() on network.rawValue ${t.network.rawValue} for EIP-712 relay`);if(!A)throw new Error("EIP-712 relays can only be performed on gasless swap transactions");const a=(0,d.getSigningOrDerivationMethodForAccount)(e.accountId,"signEthereumMessage"),{eip712:u}=A.trade;u.types.EIP712Domain=[...b.EIP712Domain];const c=(0,o.hashForSignTypedData_v4)({data:u}),f=await a({accountId:e.accountId,derivationPath:(0,s.ethereumAddressDerivationPath)(t.walletIndex),addPrefix:!1,message:c}),m=w.Message.recoverRSVFromBuffer(f),x=async()=>{if(!A)throw new Error("cannot sign gasless swap trade");const{chainId:e,quote:t}=A,r=(0,h.default)(t,"_highPriceImpact"),n={...(0,h.default)(A,"tx","fees"),quote:{...r,priceImpact:t.priceImpact.toString(),fromAsset:(0,S.serializeSwapAsset)(t.fromAsset),toAsset:(0,S.serializeSwapAsset)(t.toAsset),chainId:Number(t.chainId),highPriceImpact:t._highPriceImpact},chainId:Number(e),trade:{...A?.trade,signature:{v:m.v,r:m.r,s:m.s,signatureType:2}}};return(0,p.submitTxForGaslessSwapRelay)({signedTrade:n,source:M})},k=await(0,v.withEventLogging)(x,(0,b.generateTxRelayEventConfig)(t,n,y.TxRelayType.SWAP)),C=await g.Transaction.createRelayedTx(t,k.Token,t.nonce,e,void 0,y.TxRelayType.SWAP);E([C]);const I=await(0,b.asSignedRelayTx)({unsignedTx:t,ethereumChain:n});r(I,k.Token)}catch(e){const t=(0,u.coerceError)(e,"useSwapSignAndRelayStandalone");(0,u.cbReportError)({error:t,context:"sign_and_submit_transaction_error",isHandled:!1,severity:"error"}),n(m.TransactionError.GaslessSwapError)}finally{L(!1)}}),[T,t,A,e,E,r,M,n]),P=(0,c.useSignAndRelayStandaloneCallback)(x,j,k,C,L);return(0,a.useMemo)((()=>({signAndRelayStandalone:P,isSignAndRelayLoading:I})),[I,P])}},654971:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useSignMultipleTransactionsStandalone=void 0;const a=r(202784),o=r(143817),s=r(662333),i=r(251728),l=r(518413),u=n(r(334291));t.useSignMultipleTransactionsStandalone=function({wallet:e,unsignedTxs:t,signSuccess:r,signError:n,handleUnlock:c,unlockSuccess:d,unlockError:p,source:f="extension",txSubmissionType:g="original",skipSubmit:y=!0}){const[m,v]=(0,a.useState)(!1),h=(0,i.useSaveTransactions)(),w=(0,a.useCallback)((function(t){return async r=>{t&&h([t.asTransaction(r.txHash,r.nonce,e,t.metadata,g)])}}),[h,g,e]),S=(0,a.useCallback)((function(e){return 0n===e.transferValue?u.default:w(e)}),[w]),b=(0,a.useCallback)((async function(){try{if(!t||t.length<1)return null;const n=[];for(const r of t){const t=await(0,l.signAndSubmitTransaction)({unsignedTx:r,wallet:e,txSubmissionType:"original",skipSubmit:y,onSubmit:S(r),source:f});y||await(0,o.getTransaction)({signature:t.txHash,mainAccountAddress:t.fromAddress,performRetry:!0,commitment:s.SolanaCommitmentLevel.CONFIRMED,walletIndex:e.selectedIndex??0n,accountId:e.accountId}),n.push(t)}r(n)}catch(e){n(e)}finally{v(!1)}}),[t,r,e,y,S,f,n]),x=(0,a.useCallback)((function(){return v(!0),c({unlockSuccess:function(){d?.(),b()},unlockError:function(e){e&&p?.(e),v(!1)}})}),[c,b,p,d]);return(0,a.useMemo)((()=>({signMultipleTransactionsStandalone:x,isSignMultipleTransactionsStandaloneLoading:m})),[m,x])}},371818:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hasCBOneSubscriptionAtom=void 0;const n=r(553476);t.hasCBOneSubscriptionAtom=(0,n.atom)({key:"hasCBOneSubscriptionAtom",default:!1})},496774:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEVMGaslessSwapTrade=void 0;const n=r(103184),a=r(86296),o=r(49982),s=r(763353),i=r(577711),l=r(781399),u=r(964337);t.getEVMGaslessSwapTrade=async function({wallet:e,address:t,network:r,sourceAsset:c,targetAsset:d,cryptoAmount:p,source:f="extension",slippage:g}){const y={fromAddress:t,from:c.address?.rawValue??c.currencyCode.rawValue,to:d.address?.rawValue??d.currencyCode.rawValue,amount:p.toString(),amountReference:l.AmountBase.Source,chainId:c.chainId.toString(),source:f,...g&&{slippagePercentage:g}},{result:m}=await(0,o.getJSON)("gasless/swap/trade",y,{apiVersion:1}),{verifyingContract:v}=m.trade.eip712.domain,h=s.ZEROEX_GASLESS_VERIFYING_CONTRACT_ADDRESSES[m.chainId];if(v!==h){const e=new Error(`received unrecognized verifying contract address while building gaslessSwapTx: received ${v} but expected ${h}`);throw(0,a.cbReportError)({context:"gasless_swap_tx",error:e,severity:"error",isHandled:!1}),e}const w=new i.EVMGaslessSwapTrade(m),S=await(0,n.getConfirmedEthereumTransactionCount)(t,r),b=await(0,u.generateUnsignedSwapTx)(e,w,S,!0);return"Failure"===b?.kind&&(0,a.cbReportError)({context:"gasless_swap_tx",error:new Error(`error building gaslessSwapTx: ${b.err}`),severity:"error",isHandled:!1}),{swapTrade:w,swapTx:b,approveTx:void 0,swapTxs:[]}}},592855:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useGaslessSwapQuote=void 0;const n=r(202784),a=r(602438),o=r(49982),s=r(865879),i="gasless/swap/quote";t.useGaslessSwapQuote=function({params:e,skip:t=!1}){const{data:r,isInitialLoading:l,error:u}=(0,a.useQuery)([i,e],(async function(){if(e&&!t)return async function(e){const{result:t}=await(0,o.getJSON)(i,e,{apiVersion:1});return t.quote}(e)}),{enabled:!!e,staleTime:3e4,retry:0}),c=(0,n.useMemo)((()=>r?new s.SwapQuote(r):void 0),[r]);return(0,n.useMemo)((()=>({quote:c,isLoading:l,error:u})),[u,l,c])}},990481:(e,t,r)=>{t.a=void 0;const n=r(202784),a=r(800354),o=r(57356),s=r(278292);t.a=function({chainId:e,search:t,limit:r,page:i}){const{data:l,isLoading:u,isFetching:c,isFetchingNextPage:d,fetchNextPage:p,hasNextPage:f}=(0,s.usePaginatedSwapAssets)({chainId:e,search:t,limit:r,page:i}),g=(0,a.memoizeDerivedValue)(l??{},(()=>l?.pages?.flatMap((e=>e.result.flatMap((e=>new o.SwapAsset(e)))))??[]));return(0,n.useMemo)((()=>({isLoading:u,isFetching:c,isFetchingNextPage:d,hasNextPage:f,fetchNextPage:p,swapAssets:g})),[u,c,d,f,p,g])}},866392:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useGetSwapAsset=t.useSwapAsset=t.fetchSwapAsset=t.SWAP_ASSET_QUERY_KEY=void 0;const n=r(202784),a=r(946813),o=r(86296),s=r(602438),i=r(49982),l=r(57356);async function u({contractAddress:e,chainId:r}){try{const{result:n}=await(0,i.getJSON)(t.SWAP_ASSET_QUERY_KEY,{contractAddress:e??"",chainId:r??""},{apiVersion:1});return n}catch(e){return(0,o.cbReportError)({context:"swap-error",error:new Error("Failed to fetch swap asset"),severity:"error",isHandled:!1}),Promise.resolve(void 0)}}function c({chainId:e,contractAddress:r}){return[t.SWAP_ASSET_QUERY_KEY,e,r]}t.SWAP_ASSET_QUERY_KEY="swap/asset",t.fetchSwapAsset=u,t.useSwapAsset=function({contractAddress:e,chainId:t}){const r="undefined"===e?void 0:e,a=(0,s.useQuery)(c({chainId:t,contractAddress:r}),(async()=>u({contractAddress:r,chainId:t})),{suspense:!0,staleTime:3e4,notifyOnChangeProps:["data"],enabled:Boolean(t)});return(0,n.useMemo)((()=>{if(a.data)return new l.SwapAsset(a.data)}),[a])},t.useGetSwapAsset=function(){const e=(0,a.useQueryClient)();return(0,n.useCallback)((async function({contractAddress:t,chainId:r}){const n="undefined"===t?void 0:t,a=await e.fetchQuery(c({chainId:r,contractAddress:n}),(async()=>u({contractAddress:n,chainId:r})));if(a)return new l.SwapAsset(a)}),[e])}},633076:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useSwapQuote=void 0;const n=r(202784),a=r(602438),o=r(49982),s=r(865879),i="swap/quote";t.useSwapQuote=function(e){const{data:t,isInitialLoading:r,error:l}=(0,a.useQuery)([i,e],(async function(){if(e)return async function(e){const{result:t}=await(0,o.getJSON)(i,e,{apiVersion:1});return t.quote}(e)}),{enabled:!!e,staleTime:3e4}),u=(0,n.useMemo)((()=>t?new s.SwapQuote(t):void 0),[t]);return(0,n.useMemo)((()=>({quote:u,isLoading:r,error:l})),[l,r,u])}},118398:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.saveSwapAssetStat=t.getSwapAssetStat=t.getSortedSwapAssetStats=void 0;const n=r(670279),a=r(815234);function o(){return(0,n.tryGetRepository)("swap_asset_stats")}t.getSortedSwapAssetStats=async function(e){return(await o().find({where:e?{chainIdStr:e}:{}})).map((e=>a.SwapAssetStats.fromDMO(e))).sort(((e,t)=>e.selectedCount<t.selectedCount?1:-1))},t.getSwapAssetStat=async function(e){const t=await o().findOne({where:{id:a.SwapAssetStats.generateID(e.blockchain,e.chainId,e.currencyCode,e.address)}});return t?a.SwapAssetStats.fromDMO(t):void 0},t.saveSwapAssetStat=async function(e){await o().upsert(e.asDMO,["id"])}},184817:(e,t,r)=>{t.D=void 0;const n=r(202784),a=r(239398),o=r(446101),s=r(53610),i=r(101620),l=r(978857),u=r(969321),c=r(657455),d=r(371818),p=r(886855),f=r(117399),g=r(158856),y=r(186732),m=r(553476),v=r(496774),h=r(357891),w=r(230156),S=r(735107),b=(0,a.defineMessages)({cbPayNotEnoughBalanceForMinerFeeMessage:{id:"z6rH3y",defaultMessage:"You need an additional ~{cryptoAmountNeeded} ({fiatAmountNeeded}) on the {networkName} network to cover the network fee."},cbPayZeroBalanceForMinerFeeMessage:{id:"cjf4F1",defaultMessage:"You need {cryptoSymbol} before you can make a transaction on the {networkName} network."},notEnoughBalanceForMinerFeeMessage:{id:"8YvB19",defaultMessage:"You have {fiatTotalAvailableBalance} in {cryptoSymbol}, but you need {fiatTotalTransactionValue} due to gas fees"},depositMinerFeeMessage:{id:"mLulYH",defaultMessage:"You must deposit {fiatDifferenceValue} in {cryptoSymbol} to complete this transaction."}});t.D=function(e,{formatMessage:t,onSuccess:r,sourceAsset:a,targetAsset:x,cryptoAmount:T,slippage:k,updateFormData:C,onNotEnoughData:A,onRefreshFail:M,shouldIgnoreSuccessRedirect:I,onNotEnoughBalanceForMinerFee:L,onGenerateTransactionsError:E,mode:j,aggregatorID:P}){const G=(0,i.useCurrencyFormatter)(),N=(0,g.useWalletsForWalletGroupId)(e),[D,O]=(0,n.useState)(!1),[B,F]=(0,n.useState)(),[H,R]=(0,n.useState)(),W=(0,c.useRethrowError)(),V=(0,u.useIsDexDepositGasEnabled)(),[_]=(0,m.useRecoilState)(d.hasCBOneSubscriptionAtom),z=(0,S.useSwapAPIVersion)();(0,n.useEffect)((function(){F(void 0)}),[T]);const U=(0,n.useMemo)((()=>N.find((e=>e.swapId===a?.swapId))),[N,a?.swapId]),Z=(0,n.useMemo)((()=>{const e=a?.network;if(e)return N.find((t=>{const r=p.Network.isEqual(e,t.network),n=t.currencyCode.rawValue===e.asChain()?.baseAssetCurrencyCode;return r&&n}))}),[a,N]),Y=(0,n.useMemo)((()=>{if(_)return"cb1"}),[_]),Q=(0,n.useCallback)((function({swapTrade:e,approveTx:n,swapTx:a,swapTxs:o}){C?.({swapTrade:e,approveTx:n,swapTx:a,swapTxs:o});const i=e.quote.fromAsset.currencyCode.rawValue===s.SOLANA_SYMBOL,u=!e.quote.fromAsset.address||i?BigInt(`${e.tx.value}`):0n,{hasEnoughBalance:c,totalFeeAssetRequired:d}=(0,l.checkEnoughBalanceForTx)({feeWallet:Z,transactionAmount:u,unsignedTx:a?.transaction,unsignedApproveEthTx:n?.transaction,unsignedTxs:o?.map((e=>e.transaction)),accountCreationFee:e.fee.extraFee});if(!c){const e=void 0!==Z?.balance&&Z?.currencyCode?G.formatToCrypto({currencyCode:Z.currencyCode,decimals:Z.decimals,value:d-Z.balance,network:Z.network}):"",r=void 0!==Z?.balance&&Z?.currencyCode?G.formatToFiat(Z.currencyCode,Z.decimals,d-Z.balance,!1,Z.contractAddress,Z.network,!0,!0):"",n=0n===Z?.balance,a=n?t(b.cbPayZeroBalanceForMinerFeeMessage,{cryptoSymbol:Z?.currencyCode.code,networkName:Z?.displayName}):t(b.cbPayNotEnoughBalanceForMinerFeeMessage,{cryptoAmountNeeded:e,fiatAmountNeeded:r,networkName:Z?.network?.asChain()?.displayName}),o=V?a:t(b.notEnoughBalanceForMinerFeeMessage,{cryptoSymbol:Z?.currencyCode.code,fiatTotalAvailableBalance:void 0!==Z?.balance&&Z?.currencyCode?G.formatToFiat(Z.currencyCode,Z.decimals,Z.balance,!1,Z.contractAddress,Z.network,!0,!0):"",fiatTotalTransactionValue:Z?G.formatToFiat(Z.currencyCode,Z.decimals,d,!1,Z.contractAddress,Z.network):""}),s=n?"zeroBalanceForMinerFee":"notEnoughBalanceForMinerFee",i=V?t(b.cbPayNotEnoughBalanceForMinerFeeMessage,{cryptoAmountNeeded:e,fiatAmountNeeded:r,networkName:Z?.network?.asChain()?.displayName}):t(b.depositMinerFeeMessage,{cryptoSymbol:Z?.currencyCode.code,fiatDifferenceValue:r});L?.({errorMessage:o,depositAmountMessage:i,walletCurrencyCode:U?.currencyCode.code,feeCurrencyCode:Z?.currencyCode.code,balance:U?.balance?.toString(),amount:T.toString(),feeWalletBalance:Z?.balance?.toString(),totalRequired:d.toString()}),R(new Error(i)),F({message:o,code:s}),E?.({message:o,code:s},Z?.balance?d-Z.balance:void 0)}I||r?.({swapTrade:e,approveTx:n,swapTx:a,swapTxs:o})}),[C,Z,I,G,t,V,L,U?.currencyCode.code,U?.balance,T,E,r]),q=U?.primaryAddress,X=(0,n.useMemo)((()=>Boolean(U?.network&&(0,o.isNetwork1559Enabled)(U?.network))),[U]),K=(0,y.getSource)(),J=(0,n.useCallback)((async function({isReloadCall:e,overrideSlippage:t}={isReloadCall:!1,overrideSlippage:void 0}){const r=U?.network,n={network:Boolean(r),wallet:Boolean(U),address:Boolean(q),sourceAsset:Boolean(a),targetAsset:Boolean(x)};if(!(r&&U&&q&&a&&x&&Z))return e?void M?.(n):(A?.(n),W(new Error("Not enough data provided to generate transactions")));try{O(!0);const e=U.isSolanaNetwork()?h.getSolanaSwapTrade:f.getEVMSwapTrade,n=j===w.SwapMode.Normal?await e({wallet:U,feeWallet:Z,network:r,address:q,sourceAsset:a,targetAsset:x,cryptoAmount:T,is1559Enabled:X,source:K,swapFeeBasis:Y,slippage:t??k,exchange:P,apiVersion:z}):await(0,v.getEVMGaslessSwapTrade)({wallet:U,feeWallet:Z,network:r,address:q,sourceAsset:a,targetAsset:x,cryptoAmount:T,source:K,swapFeeBasis:Y,slippage:t??k,apiVersion:z});Q(n)}catch(e){F({message:e.message,code:e.code,description:e.description}),E?.({message:e.message,code:e.code,description:e.description},void 0)}finally{O(!1)}}),[U,q,a,x,Z,A,W,M,j,T,X,K,Y,k,P,z,Q,E]);return(0,n.useMemo)((()=>({generateTransactions:J,generateTransactionsError:B,generateDepositAmount:H,isGenerateTransactionsLoading:D})),[H,J,B,D])}},283747:(e,t,r)=>{t.C=void 0;const n=r(202784),a=r(118398),o=r(815234),s=r(373881),i=r(866392);t.C=function(){const e=(0,i.useGetSwapAsset)();return(0,n.useCallback)((async function(t){let r;if(r=t instanceof s.Wallet?await e({chainId:t.network?.asChain()?.chainId.toString(),contractAddress:t.contractAddress}):t,!r)return;const n=await(0,a.getSwapAssetStat)(r);let i;if(n){const e=n.selectedCount+1n;i=n,i.selectedCount=e}else i=new o.SwapAssetStats(r.blockchain,r.chainId,r.currencyCode,r.address,1n);await(0,a.saveSwapAssetStat)(i)}),[e])}},926581:(e,t,r)=>{t.F=void 0;const n=r(202784),a=r(101620),o=r(612321),s=r(663258),i=r(592855),l=r(633076),u=r(781399),c=r(186732),d=r(230156),p=r(159341);t.F=function({sourceWallet:e,target:t,includeCode:r=!0,cryptoAmount:f=0n,mode:g,analyticsError:y,handleEntrySelectorError:m,handleGaslessQuoteError:v,handleQuoteSuccess:h}){const w=(0,a.useCurrencyFormatter)(),S=e?.network.asChain()?.chainId.toString()??t?.chainId,{isGaslessSwapEnabled:b}=(0,p.useGaslessSwapEnabled)({chainId:e?.network.asChain()?.chainId.toString()??""}),x=(0,s.useDebounce)(f,300),T=(0,c.getSource)(),k=(0,n.useMemo)((()=>{if(e&&t&&!(x<=0n))return{fromAddress:e?.primaryAddress,from:e.contractAddress??e.currencyCode.rawValue,to:t.address?.rawValue??t.currencyCode.rawValue,amount:String(x),mode:"fast",amountReference:u.AmountBase.Source,chainId:String(S),directRoute:String(!1),source:T}}),[e,t,x,S,T]),C=(0,n.useMemo)((()=>e?.network.asChain()?.baseAssetCurrencyCode?.toLowerCase()===e?.currencyCode.rawValue.toLowerCase()),[e?.currencyCode.rawValue,e?.network]),[A,M]=(0,o.useConcurrentSuspense)((e=>e(l.useSwapQuote)(k)),(e=>e(i.useGaslessSwapQuote)({params:k,skip:!b||C}))),{quote:I,isLoading:L,error:E}=A,{quote:j,isLoading:P,error:G}=M,N=(0,n.useMemo)((()=>{switch(g){case d.SwapMode.Normal:return E;case d.SwapMode.Gasless:return G;default:return E}}),[G,g,E]),D=(0,n.useMemo)((()=>P||L),[P,L]),O=(0,n.useMemo)((()=>{switch(g){case d.SwapMode.Normal:return I;case d.SwapMode.Gasless:return j;default:return I}}),[j,g,I]);(0,n.useEffect)((function(){v?.(!!G)}),[G,v]),(0,n.useEffect)((function(){N&&(y?.({error:N}),m?.(N))}),[y,N,m,v,g]),(0,n.useEffect)((function(){O&&h?.(O.aggregatorID)}),[O,h]);const B=(0,n.useMemo)((()=>O?w.formatToCrypto({currencyCode:O.fromAsset.currencyCode,decimals:O.fromAsset.decimals,value:BigInt(O.fromAmount),includeCode:r,maxDisplayDecimals:8n}):""),[w,r,O]),F=(0,n.useMemo)((()=>O?w.formatToCrypto({currencyCode:O.toAsset.currencyCode,decimals:O.toAsset.decimals,value:BigInt(O.toAmount),includeCode:r,maxDisplayDecimals:8n}):""),[w,r,O]),H=(0,n.useMemo)((()=>!D&&N?N?.data?.error:void 0),[N,D]);return{quote:O,fromCryptoAmount:B,toCryptoAmount:F,isLoading:D,error:H}}},589333:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useAggregateSwappableWallets=void 0;const n=r(202784),a=r(553476),o=r(118912),s=r(634890);t.useAggregateSwappableWallets=function({network:e}){const t=(0,a.useRecoilValue)(o.walletsArraySelector),r=(0,s.useFilterSwappableWallets)({wallets:t,network:e});return(0,n.useMemo)((()=>e?r.filter((t=>t.network.rawValue===e?.rawValue)):r),[r,e])}},634890:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useFilterSwappableWallets=void 0;const n=r(202784),a=r(149644),o=r(742165),s=r(825582),i=r(375277),l=r(800354),u=r(553476);t.useFilterSwappableWallets=function({wallets:e,network:t,suspense:r=!0}){const c=(0,u.useRecoilValue)(a.isSimulatingEmptyWalletAtom),d=(0,s.useBuildChainIdToContractAddressesMap)(e),p=(0,o.useSwapAssetsForChainByContractAddress)({contractAddressesByChain:d,suspense:r,network:t}),f=(0,l.memoizeDerivedValue)(p,(()=>new Map(p.map((e=>[e.swapId,e]))))),g=(0,i.useBasePortfolioWallets)({wallets:e});return(0,n.useMemo)((()=>c?[]:g?.filter((e=>Boolean(f.get(e.swapId))))??[]),[g,c,f])}},156122:(e,t,r)=>{t.cs=void 0;const n=r(202784),a=r(782581),o=r(589333);function s({wallets:e,walletId:t,swapId:r}){return(0,n.useMemo)((()=>{if(!e?.length)return;let n;return t?n=e.find((e=>e.id===t)):r&&(n=e.find((e=>e.swapId===r))),n??e[0]}),[t,r,e])}t.cs=function(e,{walletId:t,swapId:r,network:n}){return s({wallets:(0,a.useSwappablePortfolioWallets)(e,n),walletId:t,swapId:r})}},782581:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useSwappablePortfolioWallets=t.useSwappableWallets=void 0;const n=r(375277),a=r(158856),o=r(634890);function s(e,{network:t,suspense:r=!0}){const n=(0,a.useWalletsForWalletGroupId)(e,t);return(0,o.useFilterSwappableWallets)({wallets:n,network:t,suspense:r})}t.useSwappableWallets=s,t.useSwappablePortfolioWallets=function(e,t){const r=s(e,{network:t});return(0,n.useBasePortfolioWallets)({wallets:Array.from(r.values())})}},266654:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useWalletById=t.useWallet=void 0;const n=r(839668),a=r(524801),o=r(886855),s=r(158856);t.useWallet=function(e,t,r,i,l){const u=(0,s.useWalletsForWalletGroupId)(e);if(u&&t&&r&&i)return u.find((e=>o.Network.isEqual(e.network,i)&&n.Blockchain.isEqual(e.blockchain,t)&&a.CurrencyCode.isEqual(e.currencyCode,r)&&(!l||e.contractAddress===l)))},t.useWalletById=function(e,t){return(0,s.useWalletsForWalletGroupId)(e).find((e=>e.id===t))}},963610:(e,t)=>{t.f=void 0,t.f=function(e){return!e||/^([0]?\.[5-9]|[1-8][0-9]?(\.[0-9])?|[9][0-8]?(\.[0-9])?|99)$/.test(e)}}}]);
//# sourceMappingURL=9759.js.map