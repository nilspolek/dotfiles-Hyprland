/*! For license information please see 1259.js.LICENSE.txt */
"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[1259],{353758:(e,t,n)=>{n.r(t),n.d(t,{CollectibleBuyListing:()=>y});var o,i=n(202784),r=n(475974),a=n(334291),l=n.n(a),s=n(907839),c=n(48972),u=n(471609),d=n(399657),g=n(356598),f=n(552322);e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var p,b,m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},y=(0,i.memo)(m((function(){var e=(0,i.useCallback)((function(e){var t=e.error,n=e.errorHash;(0,r.logCollectibleBuyListingGlobalError)({errorHash:n,errorMessage:t.message})}),[]),t=(0,i.useCallback)((function(e){var t=e.error;return(0,f.jsx)(u._,{error:t})}),[]);return(0,f.jsx)(c.VStack,{height:"100%",testID:"collectible-buy-listing-wrapper",overflow:"scroll",children:(0,f.jsx)(s.S,{onError:e,renderFallback:t,children:(0,f.jsx)(g.cr.Provider,{onSubmit:l(),initialValues:g.Sc,children:(0,f.jsx)(g.Ex.Provider,{children:(0,f.jsx)(d.k,{})})})})})}),"useCallback{logGlobalError}\nuseCallback{renderFallback}"));(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&p.register(y,"CollectibleBuyListing","/workspaces/apps/extension/src/screens/CollectibleBuyListing/CollectibleBuyListing.tsx"),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&b(e)},399657:(e,t,n)=>{n.d(t,{k:()=>p});var o,i=n(202784),r=n(86711),a=n(124545),l=n(642390),s=n(255835),c=n(805831),u=n(356598),d=n(552322);e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var g,f,p=(0,i.memo)((function(){return(0,d.jsxs)(u.Ex.Steps,{children:[(0,d.jsx)(c.o,{},"collectibleListingDetail"),(0,d.jsx)(a.j,{},"collectibleBuyListingInsufficientFunds"),(0,d.jsx)(r.c,{},"collectibleBuyListingConfirmation"),(0,d.jsx)(l.X,{},"collectibleBuyListingPhoneConfirmation"),(0,d.jsx)(s.i,{},"collectibleBuyListingStatus")]})}));(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&g.register(p,"CollectibleBuyListingStepper","/workspaces/apps/extension/src/screens/CollectibleBuyListing/CollectibleBuyListingStepper.tsx"),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&f(e)},86711:(e,t,n)=>{n.d(t,{c:()=>G});var o,i=n(202784),r=n(239398),a=n(783112),l=n(107267),s=n(475974),c=n(526090),u=n(656695),d=n(805173),g=n(533890),f=n(811165),p=n(281886),b=n(29512),m=n(230438),y=n(930830),C=n(976974),h=n(201324),v=n(784857),L=n(57179),x=n(40217),k=n(735103),T=n(95898),w=n(111176),E=n(340671),M=n(356598),S=n(789453),I=n(991559),B=n(552322);e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var _,P,D="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},A=(0,r.defineMessages)({buy:{id:"kBH2Wf",defaultMessage:[{type:0,value:"Buy"}]},cancel:{id:"Usjb5x",defaultMessage:[{type:0,value:"Cancel"}]},confirm:{id:"N2IrpM",defaultMessage:[{type:0,value:"Confirm"}],descriptin:"Button text for confirming a transaction"}}),G=(0,i.memo)(D((function(){var e,t=(0,a.Z)().formatMessage,n=(0,T.Z)(M.cr),o=n.unsignedTx.value,r=n.wallet.value,_=n.signedTx.onChange,P=n.txSigningError.onChange,D=n.platformDomain.value,G=(0,k.useStepper)(M.Ex).goToStep,F=(0,l.useParams)(),H=F.contractAddress,O=F.tokenId,j=F.chainId,N=F.marketplace,R=F.offchainOrderId,V=(0,i.useMemo)((function(){return{contractAddress:H,tokenId:O,chainId:j,marketplace:N,offchainOrderId:R}}),[H,O,j,N,R]),W=(0,x.useExtensionPerfMark)(C.PERF_MARKS.nft_listing_detail,C.EXPLORE_MARKS.load_collectible_listing_confirmation,{logMetric:!0}).end;if((0,u.useOnMount)((function(){W()})),(0,s.useLogCollectibleListingConfirmationViewed)(V),!o)throw new Error("CollectibleBuyListingConfirmation: unsignedTx needs to be defined");var U=(0,i.useMemo)((function(){if(!r)throw new Error("CollectibleBuyListingConfirmation: wallet needs to be defined");return r}),[r]),Z=(0,m.useActiveWalletGroupId)(),K=(0,y.useTxFeeWallet)(Z,o),q=(0,S.useTransactionDetailRowItems)({unsignedTx:o,wallet:U}),Y=(0,g.o)({unsignedTx:o,wallet:U,feeWallet:K,flow:"buyListing"}),$=(0,p.useIsTxPreviewEnabled)(),z=(0,b.j)({request:"buy-nft-listing",unsignedTx:o,wallet:U}),X=z.txScannerData,Q=z.txScannerNotices,J=z.isTxScannerLoading,ee=z.isTxScannerError,te=z.txScannerLoadStartTime,ne=z.resetLoadTimer,oe=(0,c.m)(X),ie=(0,f.B)({request:"buy-nft-listing",dappURL:D,blockchain:U.blockchain.toString(),txScannerData:X,txScannerNotices:Q,walletIndex:null===(e=U.selectedIndex)||void 0===e?void 0:e.toString(),isTxPreviewEnabled:$}),re=(0,d.useAccountById)(U.accountId),ae=re.hasLocallyStoredKey,le=re.isLedgerAccount,se=(0,i.useCallback)((function(){le?(0,s.logCollectibleBuyListingLedgerError)():ae&&(0,s.logCollectibleBuyListingStandaloneError)()}),[ae,le]),ce=(0,i.useCallback)((function(){le&&(0,s.logCollectibleBuyListingLedgerApprove)(),ae&&(0,s.logCollectibleBuyListingStandaloneConfirm)()}),[ae,le]),ue=(0,i.useCallback)((function(){G("collectibleBuyListingPhoneConfirmation")}),[G]),de=(0,i.useCallback)((function(e){se(),P(e),G("collectibleBuyListingStatus")}),[se,P,G]),ge=(0,i.useCallback)((function(e){ce(),_(e),G("collectibleBuyListingStatus")}),[ce,_,G]),fe=(0,i.useCallback)((function(){(0,s.logCollectibleListingConfirmationCancelClicked)(V),G("collectibleListingDetail")}),[G,V]),pe=(0,i.useCallback)((function(){(0,s.logCollectibleListingConfirmationConfirmClicked)(V)}),[V]),be=(0,I.x)({wallet:U,unsignedTx:o,flow:E.Z.NftBuyListing,error:Y,confirmText:t(A.buy),cancelText:t(A.cancel),goToPhoneConfirmation:ue,onSignSuccess:ge,onSignError:de,onCancel:fe,onConfirm:pe,signButtonFirst:!1}),me=be.buttonProps,ye=be.hardwareWalletScreen,Ce=be.isHardwareWalletSigning,he=(0,i.useMemo)((function(){var e,t;return!$||ee?(0,B.jsx)(v.C,{analyticsData:ie,txScannerNotices:Q}):J?(0,B.jsx)(L.B,{}):(null==X||null===(e=X.assetChangeOperations)||void 0===e?void 0:e.length)||(null==X||null===(t=X.preAuthorizeOperations)||void 0===t?void 0:t.length)?(0,B.jsx)(h.e,{resetLoadTimer:ne,txScannerLoadStartTime:null==te?void 0:te.current,parsedOperations:X,userWalletAddress:U.primaryAddress,analyticsData:ie,isRevokeOperation:oe,networkChainId:j}):(0,B.jsx)(v.C,{analyticsData:ie,txScannerNotices:Q})}),[$,ee,J,X,ie,Q,ne,te,U.primaryAddress,oe,j]);return Ce?ye:(0,B.jsx)(w.O,{headerText:t(A.buy),topSection:he,detailRowItems:q,buttonProps:me,handleBackButton:fe,error:Y})}),"useIntl{{ formatMessage }}\nuseFields{{\n    unsignedTx: { value: unsignedTx },\n    wallet: { value: walletValue },\n    signedTx: { onChange: signedTxOnChange },\n    txSigningError: { onChange: txSigningErrorOnChange },\n    platformDomain: { value: platformDomainValue },\n  }}\nuseStepper{{ goToStep }}\nuseParams{{ contractAddress, tokenId, chainId, marketplace, offchainOrderId }}\nuseMemo{collectibleListingAnalyticsData}\nuseExtensionPerfMark{{ end: endLoadListingConfirmationPerfMark }}\nuseOnMount{}\nuseLogCollectibleListingConfirmationViewed{}\nuseMemo{wallet}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseTxFeeWallet{feeWallet}\nuseTransactionDetailRowItems{detailRowItems}\nuseTransactionDetailsErrors{transactionDetailsErrors}\nuseIsTxPreviewEnabled{isTxPreviewEnabled}\nuseTxScanner{{\n    txScannerData: parsedOperations,\n    txScannerNotices,\n    isTxScannerLoading,\n    isTxScannerError,\n    txScannerLoadStartTime,\n    resetLoadTimer,\n  }}\nuseIsRevokeOperation{isRevokeOperation}\nuseSignTransactionEventData{analyticsData}\nuseAccountById{{ hasLocallyStoredKey, isLedgerAccount }}\nuseCallback{logSigningErrorEvent}\nuseCallback{logSigningSuccessEvent}\nuseCallback{handleGoToPhoneConfirmation}\nuseCallback{handleSigningError}\nuseCallback{handleSigningSuccess}\nuseCallback{handleCancel}\nuseCallback{handleBuy}\nuseCollectibleTransactionSignAndSubmit{{ buttonProps, hardwareWalletScreen, isHardwareWalletSigning }}\nuseMemo{topSection}",(function(){return[a.Z,T.Z,k.useStepper,l.useParams,x.useExtensionPerfMark,u.useOnMount,s.useLogCollectibleListingConfirmationViewed,m.useActiveWalletGroupId,y.useTxFeeWallet,S.useTransactionDetailRowItems,g.o,p.useIsTxPreviewEnabled,b.j,c.m,f.B,d.useAccountById,I.x]})));(_="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(_.register(A,"messages","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingConfirmation/CollectibleBuyListingConfirmation.tsx"),_.register(G,"CollectibleBuyListingConfirmation","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingConfirmation/CollectibleBuyListingConfirmation.tsx")),(P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&P(e)},124545:(e,t,n)=>{n.d(t,{j:()=>M});var o,i=n(202784),r=n(239398),a=n(783112),l=n(107267),s=n(475974),c=n(656695),u=n(976974),d=n(352871),g=n(790424),f=n(40217),p=n(735103),b=n(95898),m=n(960723),y=n(941368),C=n(48972),h=n(661641),v=n(356598),L=n(728209),x=n(552322);e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var k,T,w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},E=(0,r.defineMessages)({notEnoughEth:{id:"nKfvOv",defaultMessage:[{type:0,value:"You don't have enough ETH to buy this NFT"}]},notEnoughEthDescription:{id:"bA/MSM",defaultMessage:[{type:0,value:"You can buy or transfer ETH using your Coinbase account or transfer it from another wallet."}]},buyOrTransfer:{id:"TzU5tO",defaultMessage:[{type:0,value:"Buy or transfer with Coinbase"}]},transferFromAnotherWallet:{id:"d1kD9D",defaultMessage:[{type:0,value:"Transfer from another wallet"}]}}),M=(0,i.memo)(w((function(){var e=(0,b.Z)(v.cr).wallet,t=(0,a.Z)().formatMessage,n=(0,l.useHistory)().push,o=(0,p.useStepper)(v.Ex).goBack,r=(0,l.useParams)(),k=r.contractAddress,T=r.tokenId,w=r.chainId,M=(0,i.useMemo)((function(){return{contractAddress:k,tokenId:T,chainId:w}}),[k,T,w]),S=(0,f.useExtensionPerfMark)(u.PERF_MARKS.nft_listing_detail,u.EXPLORE_MARKS.load_collectible_listing_confirmation,{logMetric:!1}).clear;(0,c.useOnMount)((function(){S()})),(0,s.useLogCollectibleListingInsufficientFundsViewed)(M);var I=(0,i.useCallback)((function(){(0,s.logCollectibleListingInsufficientFundsBuyClicked)(M),n((0,l.generatePath)(L.RoutesEnum.ONRAMP_INTERSTITIAL,{mode:"nft"}))}),[M,n]),B=(0,i.useCallback)((function(){var t;(0,s.logCollectibleListingInsufficientFundsReceiveClicked)(M),n((0,l.generatePath)(L.RoutesEnum.RECEIVE_ADDRESS,{walletId:null===(t=e.value)||void 0===t?void 0:t.id}))}),[M,n,e.value]);return(0,x.jsxs)(g.lL,{header:(0,x.jsx)(d.l2,{variant:"secondary",handleBack:o}),children:[(0,x.jsxs)(C.VStack,{width:"100%",gap:2,alignItems:"center",spacingHorizontal:3,children:[(0,x.jsx)(y.HeroSquare,{name:"noFees",dimension:"200x200"}),(0,x.jsx)(h.TextTitle3,{as:"p",align:"center",children:t(E.notEnoughEth)}),(0,x.jsx)(h.TextBody,{as:"p",align:"center",color:"foregroundMuted",children:t(E.notEnoughEthDescription)})]}),(0,x.jsxs)(C.VStack,{width:"100%",spacing:2,gap:2,children:[(0,x.jsx)(m.Button,{block:!0,variant:"primary",onPress:I,children:t(E.buyOrTransfer)}),(0,x.jsx)(m.Button,{block:!0,variant:"secondary",onPress:B,children:t(E.transferFromAnotherWallet)})]})]})}),"useFields{{ wallet: walletField }}\nuseIntl{{ formatMessage }}\nuseHistory{{ push }}\nuseStepper{{ goBack }}\nuseParams{{ contractAddress, tokenId, chainId }}\nuseMemo{analyticsData}\nuseExtensionPerfMark{{ clear: clearLoadListingConfirmationPerfMark }}\nuseOnMount{}\nuseLogCollectibleListingInsufficientFundsViewed{}\nuseCallback{handleBuyPress}\nuseCallback{handleTransferPress}",(function(){return[b.Z,a.Z,l.useHistory,p.useStepper,l.useParams,f.useExtensionPerfMark,c.useOnMount,s.useLogCollectibleListingInsufficientFundsViewed]})));(k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(k.register(E,"messages","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingInsufficientFunds/CollectibleBuyListingInsufficientFunds.tsx"),k.register(M,"CollectibleBuyListingInsufficientFunds","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingInsufficientFunds/CollectibleBuyListingInsufficientFunds.tsx")),(T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&T(e)},642390:(e,t,n)=>{n.d(t,{X:()=>I});var o,i=n(202784),r=n(239398),a=n(783112),l=n(107267),s=n(475974),c=n(697893),u=n(656695),d=n(868789),g=n(735103),f=n(95898),p=n(661641),b=n(278754),m=n(356598),y=n(476700),C=n(552322);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(){v=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var r=t&&t.prototype instanceof y?t:y,a=Object.create(r.prototype),l=new P(o||[]);return i(a,"_invoke",{value:S(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var g="suspendedStart",f="suspendedYield",p="executing",b="completed",m={};function y(){}function C(){}function L(){}var x={};c(x,a,(function(){return this}));var k=Object.getPrototypeOf,T=k&&k(k(D([])));T&&T!==n&&o.call(T,a)&&(x=T);var w=L.prototype=y.prototype=Object.create(x);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function n(i,r,a,l){var s=d(e[i],e,r);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==h(u)&&o.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,l)}))}l(s.arg)}var r;i(this,"_invoke",{value:function(e,o){function i(){return new t((function(t,i){n(e,o,t,i)}))}return r=r?r.then(i,i):i()}})}function S(t,n,o){var i=g;return function(r,a){if(i===p)throw new Error("Generator is already running");if(i===b){if("throw"===r)throw a;return{value:e,done:!0}}for(o.method=r,o.arg=a;;){var l=o.delegate;if(l){var s=I(l,o);if(s){if(s===m)continue;return s}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(i===g)throw i=b,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);i=p;var c=d(t,n,o);if("normal"===c.type){if(i=o.done?b:f,c.arg===m)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(i=b,o.method="throw",o.arg=c.arg)}}}function I(t,n){var o=n.method,i=t.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),m;var r=d(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,m;var a=r.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function B(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(B,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function n(){for(;++i<t.length;)if(o.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}throw new TypeError(h(t)+" is not iterable")}return C.prototype=L,i(w,"constructor",{value:L,configurable:!0}),i(L,"constructor",{value:C,configurable:!0}),C.displayName=c(L,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===C||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,L):(e.__proto__=L,c(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},E(M.prototype),c(M.prototype,l,(function(){return this})),t.AsyncIterator=M,t.async=function(e,n,o,i,r){void 0===r&&(r=Promise);var a=new M(u(e,n,o,i),r);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(w),c(w,s,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=D,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(o,i){return l.type="throw",l.arg=t,n.next=o,i&&(n.method="next",n.arg=e),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:D(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),m}},t}function L(e,t,n,o,i,r,a){try{var l=e[r](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(o,i)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var r=e.apply(t,n);function a(e){L(r,o,i,a,l,"next",e)}function l(e){L(r,o,i,a,l,"throw",e)}a(void 0)}))}}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r,a,l=[],s=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=r.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var w,E,M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},S=(0,r.defineMessages)({title:{id:"uxLC8E",defaultMessage:[{type:0,value:"Confirm transaction"}]},confirmOnPhone:{id:"LKMb7n",defaultMessage:[{type:0,value:"Confirm on phone"}]},confirmOnPhoneDescription:{id:"In3vOT",defaultMessage:[{type:0,value:"Open Coinbase Wallet on your phone to confirm this transaction."}]},resendNotificationHelperText:{id:"ZxCo5e",defaultMessage:[{type:0,value:"Don't see the notification?"}]},stillNotSeeingYourNotificationHelperText:{id:"Gdu4kE",defaultMessage:[{type:0,value:"Still don't see the notification? "},{type:1,value:"reconnectWallet"}]},reconnectWallet:{id:"s6u5ob",defaultMessage:[{type:0,value:"Reconnect your wallet"}]},retry:{id:"td35SU",defaultMessage:[{type:0,value:"Resend notification"}]}}),I=(0,i.memo)(M((function(){var e=(0,a.Z)().formatMessage,t=(0,g.useStepper)(m.Ex),n=t.goBack,o=t.goToStep,r=(0,f.Z)(m.cr),h=r.wallet,L=r.unsignedTx,T=r.txSigningError,w=r.signedTx,E=k((0,i.useState)(0),2),M=E[0],I=E[1],B=(0,i.useContext)(b.zC).signOut,_=(0,l.useParams)(),P=_.contractAddress,D=_.tokenId,A=_.chainId,G=(0,i.useMemo)((function(){return{contractAddress:P,tokenId:D,chainId:A}}),[P,D,A]);if((0,s.useLogCollectibleListingPhoneConfirmationViewed)(G),null==h||!h.value)throw new Error("CollectibleBuyListingPhoneConfirmation: Wallet does not exist");if(!L.value)throw new Error("CollectibleBuyListingPhoneConfirmation: unsignedTx does not exist");var F=(0,i.useCallback)((function(e){(0,s.logCollectibleBuyListingPhoneConfirmationMobileApprove)(),w.onChange(e),o("collectibleBuyListingStatus")}),[o,w]),H=(0,i.useCallback)((function(e){e.name===c.EthereumError.userRejectedWalletLinkRequest.name?(0,s.logCollectibleBuyListingPhoneConfirmationMobileCancel)():(0,s.logCollectibleBuyListingPhoneConfirmationWalletlinkError)(),T.onChange(e),o("collectibleBuyListingStatus")}),[T,o]),O=(0,i.useCallback)((function(){B()}),[B]),j=(0,y.k)({wallet:h.value,unsignedTx:L.value,onSuccess:F,onError:H}),N=j.signAndSubmitViaWalletlink,R=j.isUserCancelled,V=(0,i.useCallback)(x(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,s.logCollectibleListingPhoneConfirmationRetryClicked)(G),I((function(e){return e+1})),e.next=4,N();case 4:case"end":return e.stop()}}),e)}))),[G,N]);(0,u.useOnMount)((function(){N()}));var W=(0,i.useMemo)((function(){return{label:e(S.retry),onClick:(t=x(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.current=!0,e.next=3,V();case 3:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})};var t}),[e,R,V]),U=(0,i.useMemo)((function(){return e(S.stillNotSeeingYourNotificationHelperText,{reconnectWallet:(0,C.jsx)(p.Link,{variant:"label1",color:"foregroundMuted",onPress:O,children:e(S.reconnectWallet)})})}),[e,O]),Z=(0,i.useCallback)((function(){R.current=!0,n()}),[n,R]);return(0,C.jsx)(d.n,{title:e(S.confirmOnPhone),description:e(S.confirmOnPhoneDescription),retryAction:W,secondaryActionLabel:e(S.resendNotificationHelperText),reconnectLabel:M>=4?U:void 0,onDismiss:Z})}),"useIntl{{ formatMessage }}\nuseStepper{{ goBack, goToStep }}\nuseFields{{ wallet, unsignedTx, txSigningError, signedTx }}\nuseState{[sendRetryCount, setSendRetryCount](0)}\nuseContext{{ signOut }}\nuseParams{{ contractAddress, tokenId, chainId }}\nuseMemo{analyticsData}\nuseLogCollectibleListingPhoneConfirmationViewed{}\nuseCallback{onSuccess}\nuseCallback{onError}\nuseCallback{onSignOut}\nuseSignAndSubmitViaWalletlink{{ signAndSubmitViaWalletlink, isUserCancelled }}\nuseCallback{retryAction}\nuseOnMount{}\nuseMemo{retryActionProps}\nuseMemo{reconnectLabel}\nuseCallback{handleDismiss}",(function(){return[a.Z,g.useStepper,f.Z,l.useParams,s.useLogCollectibleListingPhoneConfirmationViewed,y.k,u.useOnMount]})));(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(w.register(S,"messages","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingPhoneConfirmation/CollectibleBuyListingPhoneConfirmation.tsx"),w.register(I,"CollectibleBuyListingPhoneConfirmation","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingPhoneConfirmation/CollectibleBuyListingPhoneConfirmation.tsx")),(E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&E(e)},255835:(e,t,n)=>{n.d(t,{i:()=>w});var o,i=n(202784),r=n(239398),a=n(783112),l=n(107267),s=n(475974),c=n(101620),u=n(656695),d=n(335184),g=n(735103),f=n(95898),p=n(661641),b=n(356598),m=n(728209),y=n(552322);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==C(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==C(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===C(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var L,x,k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},T=(0,r.defineMessages)({title:{id:"Py41Hm",defaultMessage:[{type:0,value:"Your purchase is in progress"}]},failureTitle:{id:"m2ulu0",defaultMessage:[{type:0,value:"Something went wrong"}]},failureDescriptionUnknownError:{id:"5FdjQq",defaultMessage:[{type:0,value:"Please try again later."}]},goBack:{id:"H5+jZp",defaultMessage:[{type:0,value:"Go back"}]},done:{id:"6qlzBr",defaultMessage:[{type:0,value:"Done"}]},viewTranaction:{id:"G3i41f",defaultMessage:[{type:0,value:"View transaction"}]},description:{id:"jUgCi8",defaultMessage:[{type:0,value:"You paid "},{type:1,value:"eth"},{type:0,value:" to buy "},{type:1,value:"nftName"},{type:0,value:". No need to wait, we'll let you know when it's complete."}]}});function w(){var e=(0,a.Z)().formatMessage,t=(0,l.useHistory)().push,n=(0,f.Z)(b.cr),o=n.unsignedTx,r=n.signedTx,C=n.txSigningError,L=n.collectible,x=n.wallet,k=(0,g.useStepper)(b.Ex).goToStep,w=(0,l.useParams)(),E=w.contractAddress,M=w.tokenId,S=w.chainId,I=(0,i.useMemo)((function(){return{contractAddress:E,tokenId:M,chainId:S}}),[E,M,S]),B=(0,c.useCurrencyFormatter)().formatToCrypto,_=(0,i.useMemo)((function(){return r.value?d.q.SUCCESS:d.q.FAILURE}),[r.value]);(0,u.useOnMount)((function(){_===d.q.SUCCESS?(0,s.logCollectibleListingStatusSuccessViewed)(I):(0,s.logCollectibleListingStatusErrorViewed)(I)}));var P=(0,i.useCallback)((function(){(0,s.logCollectibleListingStatusViewTransactionClicked)(I),t(m.RoutesEnum.TRANSACTIONS)}),[I,t]),D=(0,i.useCallback)((function(){(0,s.logCollectibleListingStatusDoneClicked)(I),k("collectibleListingDetail")}),[I,k]),A=(0,i.useCallback)((function(){(0,s.logCollectibleListingStatusBackClicked)(I),k("collectibleListingDetail")}),[I,k]),G=(0,i.useMemo)((function(){return{key:"done",children:e(T.done),variant:"primary",onPress:D,testID:"buy-listing-success-done-btn"}}),[e,D]),F=(0,i.useMemo)((function(){return{key:"view-transaction",children:e(T.viewTranaction),variant:"secondary",onPress:P,testID:"buy-listing-view-transaction-btn"}}),[e,P]),H=(0,i.useMemo)((function(){return{key:"go-back",children:e(T.goBack),variant:"primary",onPress:A,testID:"buy-listing-failure-go-back-btn"}}),[e,A]),O=(0,i.useMemo)((function(){return B({currencyCode:x.value.currencyCode,decimals:x.value.decimals,value:o.value.transferValue,overridePrivacy:!0})}),[x.value,o.value,B]),j=(0,i.useMemo)((function(){var t,n;return _===d.q.SUCCESS?{status:_,title:(0,y.jsx)(p.TextTitle3,{as:"span",children:e(T.title)}),amount:"",description:(0,y.jsx)(p.TextBody,{as:"label",color:"foregroundMuted",children:e(T.description,{eth:O,nftName:null===(n=L.value)||void 0===n?void 0:n.name})}),primaryButtonProps:G,secondaryButtonProps:F}:{status:_,title:(0,y.jsx)(p.TextTitle3,{as:"span",children:e(T.failureTitle)}),description:(0,y.jsx)(p.TextBody,{as:"label",color:"foregroundMuted",children:(null===(t=C.value)||void 0===t?void 0:t.message)||e(T.failureDescriptionUnknownError)}),primaryButtonProps:H}}),[G,F,H,e,_,L.value,C.value,O]);return(0,y.jsx)(d.L,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},j))}k(w,"useIntl{{ formatMessage }}\nuseHistory{{ push }}\nuseFields{{\n    unsignedTx: unsignedTxField,\n    signedTx: signedTxField,\n    txSigningError: txSigningErrorField,\n    collectible: collectibleField,\n    wallet: walletField,\n  }}\nuseStepper{{ goToStep }}\nuseParams{{ contractAddress, tokenId, chainId }}\nuseMemo{analyticsData}\nuseCurrencyFormatter{{ formatToCrypto }}\nuseMemo{status}\nuseOnMount{}\nuseCallback{handleViewTransaction}\nuseCallback{handleDone}\nuseCallback{handleBack}\nuseMemo{doneButton: ButtonProps}\nuseMemo{viewTransactionButton: ButtonProps}\nuseMemo{goBackButton: ButtonProps}\nuseMemo{currencyAmountDisplay}\nuseMemo{transactionStatusProps: TransactionStatusProps}",(function(){return[a.Z,l.useHistory,f.Z,g.useStepper,l.useParams,c.useCurrencyFormatter,u.useOnMount]})),(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(L.register(T,"messages","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingStatus/CollectibleBuyListingStatus.tsx"),L.register(w,"CollectibleBuyListingStatus","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingStatus/CollectibleBuyListingStatus.tsx")),(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&x(e)},805831:(e,t,n)=>{n.d(t,{o:()=>O});var o,i=n(202784),r=n(239398),a=n(783112),l=n(107267),s=n(475974),c=n(656695),u=n(657455),d=n(548820),g=n(365051),f=n(277059),p=n(490911),b=n(390052),m=n(476463),y=n(91427),C=n(230438),h=n(158856),v=n(976974),L=n(790424),x=n(40217),k=n(735103),T=n(95898),w=n(356598),E=n(398605),M=n(304522),S=n(599341),I=n(489128),B=n(552322);e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var _,P,D="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},A=(0,r.defineMessages)({buy:{id:"PTqFaz",defaultMessage:[{type:0,value:"Buy"}]},buyInProgress:{id:"kd0nu/",defaultMessage:[{type:0,value:"Buy in progress"}]}}),G=["reservoir"],F=(0,i.memo)(D((function(e){var t=e.collectible,n=e.listingDetails,o=e.wallet,r=e.chainId,l=e.offchainOrderId,g=void 0===l?"":l,p=(0,a.Z)().formatMessage,b=(0,T.Z)(w.cr),m=b.unsignedTx.onChange,C=b.signedTx.value,h=b.wallet.onChange,L=b.collectible.onChange,M=b.platformDomain.onChange,_=(0,k.useStepper)(w.Ex).goToStep,P=(0,u.useRethrowError)(),D=(0,i.useMemo)((function(){return{contractAddress:t.contractAddress,tokenId:t.tokenId,chainId:r}}),[t,r]);(0,s.useLogCollectibleListingDetailViewed)(D);var F=(0,x.useExtensionPerfMark)(v.PERF_MARKS.nft_listing_detail,v.EXPLORE_MARKS.load_collectible_listing_detail,{logMetric:!0}).end,H=(0,x.useExtensionPerfMark)(v.PERF_MARKS.nft_listing_detail,v.EXPLORE_MARKS.load_collectible_listing_confirmation,{logMetric:!0}).start;(0,c.useOnMount)((function(){F()})),(0,i.useEffect)((function(){h(o)}),[h,o]);var O=(0,d.p)(n),j=(0,i.useMemo)((function(){return n.orderPrice||n.bestAskPrice}),[n]),N=j.platformDomain,R=j.platform,V=j.listingPrice,W=(0,i.useCallback)((function(e){var t;null!=e&&null!==(t=e.message)&&void 0!==t&&t.includes("Balance too low")?_("collectibleBuyListingInsufficientFunds"):P(e)}),[_,P]),U=(0,f.b)({contractAddress:t.contractAddress,tokenId:t.tokenId,chainId:r,wallet:o,orderId:g,platformName:R}),Z=U.fetchBuyListingData,K=U.isFetching,q=U.txs,Y=U.error,$=(0,i.useCallback)((function(){(0,s.logCollectibleListingDetailBuyClicked)(D),H(),Z()}),[D,H,Z]);(0,i.useEffect)((function(){if(Y||void 0===q)W(Y);else if(0!==q.length){var e=q[0];m(e),L(t),M(N),_("collectibleBuyListingConfirmation")}}),[q,m,L,M,_,t,Y,N,P,W]);var z=(0,i.useMemo)((function(){return!G.includes(R.toLowerCase())}),[R]),X=(0,i.useMemo)((function(){return(null==C?void 0:C.state)===y.TxState.PENDING?p(A.buyInProgress):p(A.buy)}),[p,C]);return(0,B.jsx)(E.CollectibleDetailCommerceContent,{address:t.contractAddress,tokenId:t.tokenId,chainId:r,tokenCount:"",includeOffers:!1,from:"Listing",listingAmounts:(0,B.jsx)(S.u,{listingPrice:V}),actionBar:z?(0,B.jsx)(I.q,{loading:K,disabled:(null==C?void 0:C.state)===y.TxState.PENDING,buttonText:X,onBuyPress:$,expirationTimeMessage:O.message,platform:R,platformDomain:N,bestPricePlatform:n.bestAskPrice.platform}):(0,B.jsx)(B.Fragment,{}),showNavbarExternalLinks:!0})}),"useIntl{{ formatMessage }}\nuseFields{{\n    unsignedTx: { onChange: unsignedTxOnChange },\n    signedTx: { value: signedTx },\n    wallet: { onChange: walletOnChange },\n    collectible: { onChange: collectibleOnChange },\n    platformDomain: { onChange: platformDomainOnChange },\n  }}\nuseStepper{{ goToStep }}\nuseRethrowError{rethrowError}\nuseMemo{analyticsData}\nuseLogCollectibleListingDetailViewed{}\nuseExtensionPerfMark{{ end: endLoadListingDetailPerfMark }}\nuseExtensionPerfMark{{ start: startLoadListingConfirmationPerfMark }}\nuseOnMount{}\nuseEffect{}\nuseCollectibleListingExpirationDateTime{expirationTime}\nuseMemo{{\n    platformDomain,\n    platform: platformName,\n    listingPrice,\n  }}\nuseCallback{handleGenerateListingError}\nuseGenerateCollectibleListingTransaction{{\n    fetchBuyListingData,\n    isFetching,\n    txs,\n    error: generateListingTxError,\n  }}\nuseCallback{handleBuyPress}\nuseEffect{}\nuseMemo{isBuyEnabledForMarketplace}\nuseMemo{buttonText}",(function(){return[a.Z,T.Z,k.useStepper,u.useRethrowError,s.useLogCollectibleListingDetailViewed,x.useExtensionPerfMark,x.useExtensionPerfMark,c.useOnMount,d.p,f.b]}))),H=(0,i.memo)(D((function(){var e=(0,l.useParams)(),t=e.contractAddress,n=e.tokenId,o=e.chainId,r=e.offchainOrderId,a=(0,C.useActiveWalletGroupId)(),s=(0,h.useWalletsForWalletGroupId)(a),c=(0,i.useMemo)((function(){return(0,m.getNftWalletByChainId)(s,o)}),[s,o]);if(void 0===c)throw new Error("no wallet available");var u=(0,p.b)(),d=(0,b.O)({contractAddress:t,tokenId:n,chainId:o,includeFloorPrice:u,suspense:!1,userAddress:c.primaryAddress}),f=d.data,y=d.isLoading,v=(0,g.q)({contractAddress:t,tokenId:n,chainId:o,walletAddress:c.primaryAddress,orderId:r}),L=v.data,x=v.isLoading;if(y||x)return(0,B.jsx)(M.O,{renderBlockButton:!0});if(!f)throw new Error("Unable to find collectible listing token");if(!L)throw new Error("Unable to fetch listing. Listing may be expired or deleted.");return(0,B.jsx)(F,{collectible:f,listingDetails:L,wallet:c,chainId:o,offchainOrderId:r})}),"useParams{{ contractAddress, tokenId, chainId, offchainOrderId }}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseWalletsForWalletGroupId{wallets}\nuseMemo{nftWallet}\nuseIsNFTFloorPriceEnabled{useFloorPrice}\nuseTokenDetails{{ data: collectible, isLoading: isTokenDetailsLoading }}\nuseCollectibleMarketplaceListingDetails{{ data: listingDetails, isLoading: isMarketplaceListingDetailsLoading }}",(function(){return[l.useParams,C.useActiveWalletGroupId,h.useWalletsForWalletGroupId,p.b,b.O,g.q]}))),O=(0,i.memo)((function(){return(0,B.jsx)(L.lL,{children:(0,B.jsx)(H,{})})}));(_="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(_.register(A,"messages","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleListingDetail/CollectibleListingDetail.tsx"),_.register(G,"DISABLED_BUY_LISTING_MARKETPLACES","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleListingDetail/CollectibleListingDetail.tsx"),_.register(F,"CollectibleListingDetailContent","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleListingDetail/CollectibleListingDetail.tsx"),_.register(H,"CollectibleListingDetail","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleListingDetail/CollectibleListingDetail.tsx"),_.register(O,"CollectibleListingDetailWrapper","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleListingDetail/CollectibleListingDetail.tsx")),(P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&P(e)},471609:(e,t,n)=>{n.d(t,{_:()=>f});var o,i=n(239398),r=n(783112),a=n(661641),l=n(667062),s=n(552322);e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var c,u,d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},g=(0,i.defineMessages)({errorMessage:{id:"apx9R5",defaultMessage:[{type:1,value:"Error"},{type:0,value:"Please check back later."}]},goBackHome:{id:"pHyRag",defaultMessage:[{type:0,value:"Go back home"}]}});function f(e){var t=e.error,n=(0,r.Z)().formatMessage,o="";return null!=t&&t.message&&null!=t&&t.message.endsWith(". ")?o=null==t?void 0:t.message:null!=t&&t.message&&(o="".concat(null==t?void 0:t.message,". ")),(0,s.jsx)(l.ErrorFallback,{shouldShowEscapeHatch:!1,warningDimension:"64x64",errorDetails:(0,s.jsx)(a.TextBody,{as:"p",align:"center",spacingTop:2,children:n(g.errorMessage,{Error:o})}),primaryButtonText:n(g.goBackHome)})}d(f,"useIntl{{ formatMessage }}",(function(){return[r.Z]})),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(g,"messages","/workspaces/apps/extension/src/screens/ErrorFallback/ErrorFallbackWithContext.tsx"),c.register(f,"ErrorFallbackWithContext","/workspaces/apps/extension/src/screens/ErrorFallback/ErrorFallbackWithContext.tsx")),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&u(e)},599341:(e,t,n)=>{n.d(t,{u:()=>b});var o,i=n(202784),r=n(931507),a=n(32679),l=n(606058),s=n(48972),c=n(661641),u=n(820562),d=n(552322);e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var g,f,p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},b=(0,i.memo)(p((function(e){var t=e.listingPrice,n=(0,r.h)({ethDisplayDecimals:4n,isFiatAbbreviated:!1}),o=(0,i.useMemo)((function(){var e;return(0,d.jsxs)(s.HStack,{alignItems:"center",children:[(0,d.jsx)(l.Icon,{size:"s",name:"ethereum",color:"foreground",spacingEnd:.5}),(0,d.jsx)(c.TextTitle1,{testID:"collectible-listing-eth-price",as:"p",children:null!==(e=n(t)[a.CollectionListingsCurrency.ETH])&&void 0!==e?e:u.STATS_FALLBACK})]})}),[t,n]),g=(0,i.useMemo)((function(){var e;return(0,d.jsx)(c.TextLegal,{testID:"collectible-listing-usd-price",as:"div",children:null!==(e="".concat(n(t)[a.CollectionListingsCurrency.USD]))&&void 0!==e?e:u.STATS_FALLBACK})}),[t,n]);return(0,d.jsx)(s.HStack,{justifyContent:"space-between",spacingHorizontal:3,spacingTop:2,testID:"collectible-listing-section",children:(0,d.jsx)(s.VStack,{alignItems:"flex-start",children:(0,d.jsxs)(d.Fragment,{children:[o,g]})})})}),"useGetListingPrice{getListingPrice}\nuseMemo{cryptoAmount}\nuseMemo{usdAmount}",(function(){return[r.h]})));(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&g.register(b,"CollectibleBuyListingAmounts","/workspaces/apps/extension/src/screens/Explore/components/CollectibleBuyListingAmounts/CollectibleBuyListingAmounts.tsx"),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&f(e)},489128:(e,t,n)=>{n.d(t,{q:()=>L});var o,i=n(202784),r=n(239398),a=n(783112),l=n(476463),s=n(960723),c=n(606058),u=n(48972),d=n(950018),g=n(76470),f=n(661641),p=n(265065),b=n(552322);e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var m,y,C="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},h="16px",v=(0,r.defineMessages)({bestPriceLabel:{id:"6S3s5y",defaultMessage:[{type:0,value:"Best price"}]},bestPriceTooltip:{id:"S0rT0i",defaultMessage:[{type:0,value:"Best price sourced from "},{type:1,value:"platformDomain"},{type:0,value:". We scan multiple marketplaces to find the lowest sale price for this item."}]}}),L=(0,i.memo)(C((function(e){var t=e.loading,n=e.disabled,o=e.buttonText,r=e.onBuyPress,m=e.expirationTimeMessage,y=e.platform,C=e.platformDomain,L=e.bestPricePlatform,x=(0,a.Z)().formatMessage,k=(0,i.useMemo)((function(){return(0,l.getPlatformName)({platform:y})}),[y]),T=(0,i.useMemo)((function(){return(0,l.getPlatformName)({platform:L})}),[L]),w=(0,i.useMemo)((function(){return k===T}),[k,T]),E=(0,i.useMemo)((function(){return(0,p.getPlatformIcon)(k)}),[k]);return(0,b.jsxs)(u.VStack,{spacing:2,gap:1,children:[(0,b.jsx)(s.Button,{testID:"nft-native-buy-button",onPress:r,loading:t,disabled:n,children:(0,b.jsx)(u.HStack,{gap:1,alignItems:"center",children:o})}),(0,b.jsxs)(u.HStack,{gap:3,children:[m?(0,b.jsxs)(u.HStack,{alignItems:"center",gap:1,children:[(0,b.jsx)(c.Icon,{size:"xs",name:"clock",color:"foreground"}),(0,b.jsx)(f.TextLabel2,{as:"p",children:m})]}):null,(0,b.jsxs)(u.HStack,{alignItems:"center",gap:1,children:[(0,b.jsx)(d.RemoteImage,{width:h,height:h,alt:"platform",source:E,shape:"squircle"}),w?(0,b.jsx)(f.TextLabel2,{as:"p",children:x(v.bestPriceLabel)}):k,w?(0,b.jsx)(g.Tooltip,{gap:0,content:x(v.bestPriceTooltip,{platformDomain:C}),placement:"bottom",children:(0,b.jsx)(c.Icon,{size:"xs",name:"info",color:"foreground",testID:"collectible-listing-actions-info-icon"})}):null]})]})]})}),"useIntl{{ formatMessage }}\nuseMemo{platformName}\nuseMemo{bestPricePlatformName}\nuseMemo{isBestPrice}\nuseMemo{platformIcon}",(function(){return[a.Z]})));(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(m.register(h,"ICON_SIZE","/workspaces/apps/extension/src/screens/Explore/components/CollectibleListingActions/CollectibleListingActions.tsx"),m.register(v,"messages","/workspaces/apps/extension/src/screens/Explore/components/CollectibleListingActions/CollectibleListingActions.tsx"),m.register(L,"CollectibleListingActions","/workspaces/apps/extension/src/screens/Explore/components/CollectibleListingActions/CollectibleListingActions.tsx")),(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&y(e)},356598:(e,t,n)=>{t.cr=t.Sc=t.Ex=void 0;const o=n(735103),i=n(601879);t.Ex=(0,o.createStepper)({steps:["collectibleListingDetail","collectibleBuyListingInsufficientFunds","collectibleBuyListingConfirmation","collectibleBuyListingPhoneConfirmation","collectibleBuyListingStatus"],defaultStep:"collectibleListingDetail"}),t.Sc={unsignedTx:void 0,signedTx:void 0,txSigningError:void 0,collectible:void 0,wallet:void 0,platformDomain:void 0},t.cr=(0,i.createForm)({initialValues:t.Sc})},789453:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useTransactionDetailRowItems=void 0;const i=n(202784),r=n(239398),a=n(446101),l=n(101620),s=n(258928),c=o(n(160417)),u=(0,r.defineMessages)({address:{id:"+pVL1h",defaultMessage:"Address"},walletUsed:{id:"H6R25Z",defaultMessage:"Wallet used"},network:{id:"0araSK",defaultMessage:"Network"},networkFee:{id:"/vyFO4",defaultMessage:"Network fee"}});t.useTransactionDetailRowItems=function({unsignedTx:e,wallet:t}){const{formatMessage:n}=(0,r.useIntl)(),o=(0,l.useCurrencyFormatter)(),d=e.network.asChain()?.blockExplorerUrl||"",g=(0,i.useMemo)((()=>(0,a.isNetwork1559Enabled)(t.network)),[t]),f=(0,i.useMemo)((()=>{let n="";if(g){const t=e;n=o.formatToFiatFeeRange(t.feeCurrencyCode,t.feeCurrencyDecimal,t.upperBoundFee,!1,t.lowerBoundFee,t.network)}else n=o.formatToFiat(e.feeCurrencyCode,e.feeCurrencyDecimal,e.estimatedFee,!1,void 0,t.network);return n??""}),[o,g,e,t.network]);return(0,c.default)([{label:n(u.address),detailText:{text:(0,s.abridgeAddress)(e.recipientAddress),blockExplorerUrl:`${d}/address/${e.recipientAddress}`}},{label:n(u.walletUsed),detailText:{text:(0,s.abridgeAddress)(t.primaryAddress),blockExplorerUrl:`${d}/address/${t.primaryAddress}`}},{label:n(u.network),detailText:t.network.asChain()?.displayName||""},{label:n(u.networkFee),detailText:f}])}},475974:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.logCollectibleBuyListingFetchTxDataError=t.logCollectibleBuyListingFetchTxDataInsufficientFunds=t.logCollectibleBuyListingFetchTxDataSuccess=t.logCollectibleBuyListingGenerateTxFailure=t.logCollectibleBuyListingGenerateTxSuccess=t.logCollectibleBuyListingLedgerError=t.logCollectibleBuyListingLedgerApprove=t.logCollectibleBuyListingPhoneConfirmationWalletlinkError=t.logCollectibleBuyListingPhoneConfirmationMobileCancel=t.logCollectibleBuyListingPhoneConfirmationMobileApprove=t.logCollectibleBuyListingStandaloneError=t.logCollectibleBuyListingStandaloneConfirm=t.logCollectibleBuyListingGlobalError=t.useLogCollectibleListingBestPriceInfoTrayViewed=t.logCollectibleListingBestPriceInfoClicked=t.logCollectibleListingStatusViewTransactionClicked=t.logCollectibleListingStatusBackClicked=t.logCollectibleListingStatusDoneClicked=t.logCollectibleListingStatusErrorViewed=t.logCollectibleListingStatusSuccessViewed=t.logCollectibleListingPhoneConfirmationRetryClicked=t.logCollectibleListingPhoneConfirmationBackClicked=t.useLogCollectibleListingPhoneConfirmationViewed=t.logCollectibleListingConfirmationBackClicked=t.logCollectibleListingConfirmationConfirmClicked=t.logCollectibleListingConfirmationCancelClicked=t.useLogCollectibleListingConfirmationViewed=t.logCollectibleListingInsufficientFundsReceiveClicked=t.logCollectibleListingInsufficientFundsBuyClicked=t.useLogCollectibleListingInsufficientFundsViewed=t.logCollectibleListingDetailBuyClicked=t.useLogCollectibleListingDetailViewed=void 0;const o=n(395545),i=n(160593);t.useLogCollectibleListingDetailViewed=function(e){(0,i.useLogEventOnMount)("buy_nft_listing.listing_detail.viewed",{loggingId:"534e2621-aed0-4b69-a3d0-bc19b97ad51f",action:o.ActionType.view,componentType:o.ComponentType.page,...e})},t.logCollectibleListingDetailBuyClicked=function(e){(0,i.logDataEvent)("buy_nft_listing.listing_detail.buy.clicked",{loggingId:"6bdea0a7-220b-440c-8285-1fff2aa9c949",action:o.ActionType.click,componentType:o.ComponentType.button,...e})},t.useLogCollectibleListingInsufficientFundsViewed=function(e){(0,i.useLogEventOnMount)("buy_nft_listing.insufficient_funds.viewed",{loggingId:"2154ad11-bba2-427c-ab5b-371b4b294125",action:o.ActionType.view,componentType:o.ComponentType.page,...e})},t.logCollectibleListingInsufficientFundsBuyClicked=function(e){(0,i.logDataEvent)("buy_nft_listing.insufficient_funds.buy.clicked",{loggingId:"2154ad11-bba2-427c-ab5b-371b4b294125",action:o.ActionType.click,componentType:o.ComponentType.button,...e})},t.logCollectibleListingInsufficientFundsReceiveClicked=function(e){(0,i.logDataEvent)("buy_nft_listing.insufficient_funds.receive.clicked",{loggingId:"2154ad11-bba2-427c-ab5b-371b4b294125",action:o.ActionType.click,componentType:o.ComponentType.button,...e})},t.useLogCollectibleListingConfirmationViewed=function(e){(0,i.useLogEventOnMount)("buy_nft_listing.confirmation_detail.viewed",{loggingId:"da8dd111-3eee-4264-8950-f1bc30efe471",action:o.ActionType.view,componentType:o.ComponentType.page,...e})},t.logCollectibleListingConfirmationCancelClicked=function(e){(0,i.logDataEvent)("buy_nft_listing.confirmation.cancel.clicked",{loggingId:"37678dc2-113d-4fd0-8dc6-d0611dbdf37f",action:o.ActionType.click,componentType:o.ComponentType.button,...e})},t.logCollectibleListingConfirmationConfirmClicked=function(e){(0,i.logDataEvent)("buy_nft_listing.confirmation.confirm.clicked",{loggingId:"12791a43-8859-4451-8b2b-10f1f44ec388",action:o.ActionType.click,componentType:o.ComponentType.button,...e})},t.logCollectibleListingConfirmationBackClicked=function(e){(0,i.logDataEvent)("buy_nft_listing.confirmation.back.clicked",{loggingId:"d6d56a07-31d1-49c7-8391-9723cd17eb8c",action:o.ActionType.click,componentType:o.ComponentType.button,...e})},t.useLogCollectibleListingPhoneConfirmationViewed=function(e){(0,i.useLogEventOnMount)("buy_nft_listing.phone_confirmation.viewed",{loggingId:"37f420b3-c5c4-4c16-a8cc-7e9805c7cc54",action:o.ActionType.view,componentType:o.ComponentType.page,...e})},t.logCollectibleListingPhoneConfirmationBackClicked=function(e){(0,i.logDataEvent)("buy_nft_listing.phone_confirmation.back.clicked",{loggingId:"a2664978-dbbc-41ba-b0f5-28b3ca310a18",action:o.ActionType.click,componentType:o.ComponentType.button,...e})},t.logCollectibleListingPhoneConfirmationRetryClicked=function(e){(0,i.logDataEvent)("buy_nft_listing.phone_confirmation.retry.clicked",{loggingId:"08cf6906-93e8-4f91-86eb-db1f3f4fe817",action:o.ActionType.click,componentType:o.ComponentType.button,...e})},t.logCollectibleListingStatusSuccessViewed=function(e){(0,i.logDataEvent)("buy_nft_listing.status.success.viewed",{loggingId:"43bdbe37-eb25-45a3-92e6-6483861da1e7",action:o.ActionType.view,componentType:o.ComponentType.page,...e})},t.logCollectibleListingStatusErrorViewed=function(e){(0,i.logDataEvent)("buy_nft_listing.status.error.viewed",{loggingId:"e6d91d50-0575-46e8-96e7-dba814e6191b",action:o.ActionType.view,componentType:o.ComponentType.page,...e})},t.logCollectibleListingStatusDoneClicked=function(e){(0,i.logDataEvent)("buy_nft_listing.status.done.clicked",{loggingId:"c93cf96c-e4cd-4665-8569-81adc21b9021",action:o.ActionType.click,componentType:o.ComponentType.button,...e})},t.logCollectibleListingStatusBackClicked=function(e){(0,i.logDataEvent)("buy_nft_listing.status.back.clicked",{loggingId:"309d28a0-e061-4e48-b003-329e57656bcf",action:o.ActionType.click,componentType:o.ComponentType.button,...e})},t.logCollectibleListingStatusViewTransactionClicked=function(e){(0,i.logDataEvent)("buy_nft_listing.status.view_transaction.clicked",{loggingId:"d4091d5b-70fe-4db7-99a3-ff50d1704fa9",action:o.ActionType.click,componentType:o.ComponentType.button,...e})},t.logCollectibleListingBestPriceInfoClicked=function(e){(0,i.logDataEvent)("buy_nft_listing.status.best_price_info_icon.clicked",{loggingId:"ca03cc94-fe96-40aa-b41a-5c90e77018da",action:o.ActionType.click,componentType:o.ComponentType.button,...e})},t.useLogCollectibleListingBestPriceInfoTrayViewed=function(e){(0,i.useLogEventOnMount)("buy_nft_listing.status.best_price_info_tray.viewed",{loggingId:"f1a46dc6-670b-44b1-bcde-da3163510357",action:o.ActionType.view,componentType:o.ComponentType.tray,...e})},t.logCollectibleBuyListingGlobalError=function({errorHash:e,errorMessage:t}){(0,i.logEvent)("collectible_buy_listing.full_screen_error.viewed",{errorHash:e,errorMessage:t,loggingId:"9be24857-d288-49f6-9748-d2cc77dd9889",action:o.ActionType.view,componentType:o.ComponentType.page})},t.logCollectibleBuyListingStandaloneConfirm=function(){(0,o.logMetric)({metricName:"buy_nft_listing.confirm_standalone",metricType:o.MetricType.count,value:1})},t.logCollectibleBuyListingStandaloneError=function(){(0,o.logMetric)({metricName:"buy_nft_listing.error_standalone",metricType:o.MetricType.count,value:1})},t.logCollectibleBuyListingPhoneConfirmationMobileApprove=function(){(0,o.logMetric)({metricName:"buy_nft_listing.phone_confirmation.mobile_approve",metricType:o.MetricType.count,value:1})},t.logCollectibleBuyListingPhoneConfirmationMobileCancel=function(){(0,o.logMetric)({metricName:"buy_nft_listing.phone_confirmation.mobile_cancel",metricType:o.MetricType.count,value:1})},t.logCollectibleBuyListingPhoneConfirmationWalletlinkError=function(){(0,o.logMetric)({metricName:"buy_nft_listing.phone_confirmation.wallet_link_error",metricType:o.MetricType.count,value:1})},t.logCollectibleBuyListingLedgerApprove=function(){(0,o.logMetric)({metricName:"buy_nft_listing.confirm_ledger",metricType:o.MetricType.count,value:1})},t.logCollectibleBuyListingLedgerError=function(){(0,o.logMetric)({metricName:"buy_nft_listing.error_ledger",metricType:o.MetricType.count,value:1})},t.logCollectibleBuyListingGenerateTxSuccess=function(){(0,o.logMetric)({metricName:"buy_nft_listing.generate_unsigned_tx_success",metricType:o.MetricType.count,value:1})},t.logCollectibleBuyListingGenerateTxFailure=function(){(0,o.logMetric)({metricName:"buy_nft_listing.generate_unsigned_tx_failure",metricType:o.MetricType.count,value:1})},t.logCollectibleBuyListingFetchTxDataSuccess=function(){(0,o.logMetric)({metricName:"buy_nft_listing.fetch_buy_tx_data_success",metricType:o.MetricType.count,value:1})},t.logCollectibleBuyListingFetchTxDataInsufficientFunds=function(){(0,o.logMetric)({metricName:"buy_nft_listing.fetch_buy_tx_data_insufficient_funds",metricType:o.MetricType.count,value:1})},t.logCollectibleBuyListingFetchTxDataError=function(){(0,o.logMetric)({metricName:"buy_nft_listing.fetch_buy_tx_data_error",metricType:o.MetricType.count,value:1})}},657455:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useRethrowError=void 0;const o=n(202784);t.useRethrowError=function(){const[e,t]=(0,o.useState)(null);return(0,o.useEffect)((function(){if(e)throw e}),[e]),t}},548820:(e,t,n)=>{t.p=void 0;const o=n(239398),i=n(199542),r=(0,o.defineMessages)({saleEndsIn:{id:"i+qIah",defaultMessage:"Sale ends in {time}"},saleEndsOn:{id:"Oizkka",defaultMessage:"Sale ends on {date}"}});t.p=function(e){const{formatMessage:t}=(0,o.useIntl)(),{value:n,type:a}=(0,i.useExpirationDateTimeOnly)(e?.expirationTime);return a===i.EXPIRATION_TYPE.TIME?{message:t(r.saleEndsIn,{time:n}),type:a}:n?{message:t(r.saleEndsOn,{date:n}),type:a}:{message:"",type:a}}},365051:(e,t,n)=>{t.q=void 0;const o=n(602438),i=n(29588);t.q=function({contractAddress:e,tokenId:t,chainId:n,walletAddress:r,orderId:a=""}){return(0,o.useQuery)([i.FETCH_BUY_LISTING_DATA,e,t,n,r],(async()=>(0,i.getCollectibleMarketplaceListingDetails)({contractAddress:e,tokenId:t,chainId:n,walletAddress:r,orderId:a})),{suspense:!1,useErrorBoundary:!1,staleTime:0,refetchInterval:!1,notifyOnChangeProps:["data"],retry:!1})}},277059:(e,t,n)=>{t.b=void 0;const o=n(202784),i=n(475974),r=n(536884),a=n(333937),l=n(359975);t.b=function({contractAddress:e,tokenId:t,chainId:n,wallet:s,orderId:c="",platformName:u}){const[d,g]=(0,o.useState)(!1),f=(0,o.useCallback)((e=>{e?.message?.includes("Balance too low")?(0,i.logCollectibleBuyListingFetchTxDataInsufficientFunds)():(0,i.logCollectibleBuyListingFetchTxDataError)(),g(!1)}),[]),p=(0,o.useCallback)((()=>{(0,i.logCollectibleBuyListingGenerateTxSuccess)(),g(!1)}),[]),b=(0,o.useCallback)((()=>{(0,i.logCollectibleBuyListingGenerateTxFailure)(),g(!1)}),[]),{data:m,refetch:y,error:C}=(0,l.useGetExecuteCollectibleBuyData)({contractAddress:e,tokenId:t,chainId:n,walletAddress:s.primaryAddress,orderId:c,enabled:!1,onSuccess:i.logCollectibleBuyListingFetchTxDataSuccess,onError:f,suspense:!1}),h=(0,o.useMemo)((()=>{if(m)return m.steps[0].executables.map((({transaction:e})=>e))}),[m]),{txs:v,error:L}=(0,a.useCollectibleUnsignedTxnAndGasEstimate)({wallet:s,transactions:h,platformName:u,txTokenAddress:r.ETH_TOKEN_ADDRESS,chainId:n,flow:"nftBuyListing",onGenerateUnsignedTransactionSuccess:p,onGenerateUnsignedTransactionError:b}),x=(0,o.useCallback)((function(){y(),g(!0)}),[y]);return(0,o.useMemo)((()=>({fetchBuyListingData:x,isFetching:d,txs:v,error:C??L})),[x,d,v,C,L])}},359975:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useGetExecuteCollectibleBuyData=void 0;const o=n(602438),i=n(29588);t.useGetExecuteCollectibleBuyData=function({contractAddress:e,tokenId:t,chainId:n,walletAddress:r,orderId:a,suspense:l=!0,enabled:s=!0,onSuccess:c,onError:u}){return(0,o.useQuery)([i.FETCH_COLLECTIBLE_BUY_DATA,e,t,n,r,a,l],(async()=>(0,i.getExecuteCollectibleBuyData)({contractAddress:e,tokenId:t,chainId:n,walletAddress:r,orderId:a})),{suspense:l,useErrorBoundary:!1,staleTime:0,refetchInterval:!1,notifyOnChangeProps:["data"],retry:!1,cacheTime:0,enabled:s,onSuccess:c,onError:u})}},931507:(e,t,n)=>{t.h=void 0;const o=n(202784),i=n(108389),r=n(101620),a=n(524801),l=n(32679),s=n(886855),c=4n;t.h=function({ethDisplayDecimals:e=c,isFiatAbbreviated:t=!0}){const{formatToCrypto:n,formatToFiat:u}=(0,r.useCurrencyFormatter)();return(0,o.useCallback)((function(o){return{[l.CollectionListingsCurrency.ETH]:n({currencyCode:a.CurrencyCode.ETH,decimals:i.ETHEREUM_CURRENCY_DECIMAL,value:BigInt(o),maxDisplayDecimals:e,includeCode:!1,overridePrivacy:!0}),[l.CollectionListingsCurrency.USD]:u(a.CurrencyCode.ETH,i.ETHEREUM_CURRENCY_DECIMAL,BigInt(o),t,"",s.Network.fromChainId({chainPrefix:i.ETHEREUM_PREFIX,chainId:1n}),!0,!1,!0)}}),[n,u,e,t])}},533890:(e,t,n)=>{t.o=void 0;const o=n(202784),i=n(239398),r=n(587952),a=n(446101),l=n(306915),s=n(759301),c=n(223933),u=n(529225),d=n(101620),g=n(210522),f=n(302879),p=n(839668),b=n(373881),m=n(952180),y=(0,i.defineMessages)({errorCancel:{id:"8gdsKY",defaultMessage:"Cancel"},errorConfirm:{id:"c7nwmM",defaultMessage:"Confirm"},getMoreCurrencyError:{id:"BB36LS",defaultMessage:"may be required for the transaction. Please deposit more"},sendKilledError:{id:"R6qUvO",defaultMessage:"This feature is currently unavailable. Try again later."},learnMore:{id:"9DtuSP",defaultMessage:"Learn more"}});t.o=function({wallet:e,unsignedTx:t,error:n,feeWallet:C,flow:h,isTxSponsored:v=!1}){const L=(0,d.useCurrencyFormatter)(),x=t,k=t,T=t&&p.Blockchain.isEqual(t.blockchain,u.SolanaBlockchain),{formatMessage:w}=(0,i.useIntl)(),E=(0,o.useRef)(!1),M=(0,f.useKillSwitchByEthNetwork)("kill_send"),S=(0,g.useKillSwitchByBlockchain)("kill_send"),I=(0,f.useKillSwitchByEthNetwork)("kill_dapp_tx"),B=(0,g.useKillSwitchByBlockchain)("kill_dapp_tx"),_=(0,o.useMemo)((()=>{const t=e?.network.asChain()?.chainId,n=t?BigInt(t):void 0,o=e?.blockchain.rawValue,i=C?.network.asChain()?.chainId,r=i?BigInt(i):void 0,a=C?.blockchain.rawValue;return"revoke"!==h&&("dappTx"===h?B(o)||B(a)||I(n)||I(r):S(o)||S(a)||M(n)||M(r))}),[C,h,B,I,S,M,e]),{minFee:P,maxFee:D}=(0,o.useMemo)((()=>{let e,n;if((0,c.isETH1559Tx)(t)&&t?.lowerBoundFee?(e=t.lowerBoundFee<t.upperBoundFee?t.lowerBoundFee:t.upperBoundFee,n=t.upperBoundFee):(e=t?t.estimatedFee:0n,n=t?t.estimatedFee:0n),T){n+=t.extraFee??0n}return{minFee:e,maxFee:n}}),[t,T]),A=(0,o.useMemo)((()=>{if(t)return L.fiatValue(t?.feeCurrencyCode,t?.feeCurrencyDecimal,P,void 0,e.network)}),[L,P,t,e.network]),G=(0,o.useMemo)((()=>t?L.formatToCrypto({currencyCode:t.feeCurrencyCode,decimals:t.feeCurrencyDecimal,value:BigInt(D),includeCode:!0,maxDisplayDecimals:6n}):""),[t,L,D]),F=(0,o.useMemo)((()=>{if(!t)return"";const n=L.fiatValue(t.feeCurrencyCode,t.feeCurrencyDecimal,BigInt(D),void 0,e.network);return n?.lessThan(new m.Decimal(.01))&&n?.greaterThan(new m.Decimal(0))?`<${L.fiatValueString(new m.Decimal(.01),!0)}`:L.formatToFiat(t.feeCurrencyCode,t.feeCurrencyDecimal,BigInt(D),!1,void 0,e.network)}),[t,L,D,e.network]),H=(0,o.useMemo)((()=>{if(T){const n=t;return n.feePayerAddress&&n.feePayerAddress===e.primaryAddress}return!0}),[e,T,t]),O=(0,o.useMemo)((()=>({getMoreCurrencyError:{type:"getMoreCurrencyError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:`${G}  (${F}) ${w(y.getMoreCurrencyError)} ${e.network?.asChain()?.baseAssetCurrencyCode??e.blockchain.rawValue}.`},sendKilledError:{type:"sendKilledError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:w(y.sendKilledError)},genericError:{type:"genericError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:`${n?.message}`}})),[G,F,w,e.network,e.blockchain.rawValue,n?.message]);return(0,o.useMemo)((()=>{if(!t||!C||!A)return;if(_)return O.sendKilledError;const o=x.network.asChain(),i=Array.from(t.metadata,(([e,t])=>({name:e,value:t}))),c=i.find((e=>"txSource"===e.name.keyName))?.value??"";let u=0n,d=0n;if(t instanceof l.EthereumUnsigned1559Tx?(u=x.maxFeePerGas/BigInt(10**9),d=x.gasLimit):t instanceof s.EthereumUnsignedLegacyTx&&(u=k.gasPrice/BigInt(10**9),d=k.gasLimit),n)return E.current||(E.current=!0,(0,r.logConfirmTransactionGasPriceFailure)({blockchain:a.EthereumBlockchain.rawValue,chainName:o?.displayName??"",chainId:o?.chainId?.toString(10)??"",errorType:"Error",errorMessage:`${n.name} -- ${n?.message}`,txSource:c.toLocaleString(),gasPriceInGwei:u.toString(),gasLimit:x.gasLimit.toString()})),O.genericError;const g=b.Wallet.isEqual(e,C)?D+t.transferValue:D;if((H&&(void 0===C.balance||C.balance<g)||t.transferValue<0n)&&!v)return E.current||(E.current=!0,(0,r.logConfirmTransactionGasPriceFailure)({blockchain:a.EthereumBlockchain.rawValue,chainName:o?.displayName??"",chainId:o?.chainId?.toString(10)??"",errorType:"InsufficientBalance",errorMessage:"Insufficient balance to pay gas fee",txSource:c.toLocaleString(),gasPriceInGwei:u.toString(),gasLimit:d.toString()})),O.getMoreCurrencyError;E.current&&(E.current=!0,(0,r.logConfirmTransactionGasPriceSuccess)({blockchain:a.EthereumBlockchain.rawValue,chainName:o?.displayName??"",chainId:o?.chainId?.toString(10)??""}))}),[t,C,A,x,n,D,O.sendKilledError,O.genericError,O.getMoreCurrencyError,_,k,e,H,v])}}}]);
//# sourceMappingURL=1259.js.map