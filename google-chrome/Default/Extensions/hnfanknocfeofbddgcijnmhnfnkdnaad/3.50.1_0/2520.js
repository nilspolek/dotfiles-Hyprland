/*! For license information please see 2520.js.LICENSE.txt */
"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[2520],{642520:(e,t,r)=>{r.r(t),r.d(t,{WatchAssetRequest:()=>j});var n,o=r(202784),a=r(239398),s=r(783112),i=r(495809),c=r(91322),u=r(108389),l=r(524801),d=r(343192),h=r(886855),f=r(230438),p=r(629966),g=r(258928),y=r(615729),m=r(960723),v=r(48972),b=r(950018),w=r(661641),A=r(441090),x=r(358203),k=r(552322);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function E(){E=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,s=Object.create(a.prototype),i=new I(n||[]);return o(s,"_invoke",{value:_(e,r,i)}),s}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",f="suspendedYield",p="executing",g="completed",y={};function m(){}function v(){}function b(){}var w={};u(w,s,(function(){return this}));var A=Object.getPrototypeOf,x=A&&A(A(j([])));x&&x!==r&&n.call(x,s)&&(w=x);var k=b.prototype=m.prototype=Object.create(w);function C(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(o,a,s,i){var c=d(e[o],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==S(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,s,i)}),(function(e){r("throw",e,s,i)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,i)}))}i(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function _(t,r,n){var o=h;return function(a,s){if(o===p)throw new Error("Generator is already running");if(o===g){if("throw"===a)throw s;return{value:e,done:!0}}for(n.method=a,n.arg=s;;){var i=n.delegate;if(i){var c=M(i,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var u=d(t,r,n);if("normal"===u.type){if(o=n.done?g:f,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=g,n.method="throw",n.arg=u.arg)}}}function M(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,M(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var s=a.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function j(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(S(t)+" is not iterable")}return v.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:v,configurable:!0}),v.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},C(L.prototype),u(L.prototype,i,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var s=new L(l(e,r,n,o),a);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},C(k),u(k,c,"Generator"),u(k,s,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return i.type="throw",i.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],i=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:j(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function C(e,t,r,n,o,a,s){try{var i=e[a](s),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function L(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){C(a,n,o,s,i,"next",e)}function i(e){C(a,n,o,s,i,"throw",e)}s(void 0)}))}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,s,i=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(i.push(n.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},P=(0,a.defineMessages)({dappLogoAlt:{id:"MRnPfe",defaultMessage:[{type:0,value:"DApp logo"}]},addToken:{id:"92Fo7Q",defaultMessage:[{type:0,value:"Add Suggested Token?"}]},addTokenQuestion:{id:"hU3w4L",defaultMessage:[{type:0,value:"Would you like to import this token?"}]},addTokenRequestDescription:{id:"dV/l+A",defaultMessage:[{type:0,value:"This website is requesting to add:"}]},tokenSymbol:{id:"ObUMFr",defaultMessage:[{type:0,value:"Symbol"}]},tokenAddress:{id:"8jwoaQ",defaultMessage:[{type:0,value:"Address"}]},authorizationButtonGroup:{id:"0ElHKg",defaultMessage:[{type:0,value:"Action buttons"}]},addCustomTokenButton:{id:"37e/BJ",defaultMessage:[{type:0,value:"Add Token"}]},denyActionButton:{id:"OPQ+In",defaultMessage:[{type:0,value:"Deny"}]},closeButton:{id:"+0yL9q",defaultMessage:[{type:0,value:"Close"}]},allowlistedMessage:{id:"v8N+yM",defaultMessage:[{type:0,value:"Coinbase Wallet automatically tracks token ownerships on the "},{type:1,value:"network"},{type:0,value:" network. There is no need to import "},{type:1,value:"token"},{type:0,value:"."}]}});function I(e){var t=e.symbol,r=e.chainName,n=(0,s.Z)().formatMessage,a=(0,o.useCallback)((function(){window.close()}),[]);return(0,k.jsx)("div",{"data-testid":"allowlist-prompt",children:(0,k.jsxs)(v.VStack,{spacing:4,justifyContent:"space-between",height:"100%",width:"100%",children:[(0,k.jsxs)(v.VStack,{gap:2,children:[(0,k.jsx)(w.TextTitle3,{as:"h1",align:"center",children:n(P.addToken)}),(0,k.jsx)(w.TextBody,{as:"p",color:"foregroundMuted",align:"center",children:n(P.allowlistedMessage,{network:r,token:t||"this token"})})]}),(0,k.jsx)(m.Button,{type:"button",variant:"primary","data-testid":"close-watch-asset-button",transparent:!0,onPress:a,children:n(P.closeButton)})]})})}function j(e){var t=e.options,r=_((0,o.useState)(!1),2),n=r[0],a=r[1],S=_((0,o.useState)(!1),2),C=S[0],M=S[1],T=_((0,o.useState)(null),2),j=T[0],O=T[1],N=(0,o.useCallback)((function(){return O(null)}),[O]),G=(0,s.Z)().formatMessage,B=(0,f.useActiveWalletGroupId)(),D=(0,p.Q)(B),U=(0,d.useCustomNetworkArgs)(),F=(0,o.useMemo)((function(){return U.find((function(e){var r,n=e.network;return n&&(null===(r=n.asChain())||void 0===r?void 0:r.chainId)===parseInt(t.chainId,10)}))}),[U,t.chainId]),H=(0,o.useMemo)((function(){return!F&&h.Network.fromChainId({chainId:BigInt(t.chainId)})}),[F,t.chainId]),z=(0,o.useCallback)(L(E().mark((function e(){var r,n,o,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,a=new l.CurrencyCode(null!==(r=t.symbol)&&void 0!==r?r:""),e.next=6,D(a,t.address,F,BigInt(null!==(n=t.decimals)&&void 0!==n?n:18));case 6:(0,c.triggerCustomTokenAdded)({contractAddress:t.address,tokenSymbol:a.rawValue,chainId:Number(null===(o=F.network.asChain())||void 0===o?void 0:o.chainId),chainName:F.name,fromWatchAsset:!0}),O(null),M(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),O(e.t0.message),M(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])}))),[D,F,t.address,t.decimals,t.symbol]);(0,o.useEffect)((function(){var e=x.Pubsub.subscribe((function(e){e.constructor===x.WatchAsset&&a(!1)}));return function(){return e.unsubscribe()}}),[]);var q,$=(0,o.useCallback)((function(){chrome.runtime.sendMessage({type:"extensionUIResponse",data:{id:t.eventId,action:A.ExtensionConnectionResponse.watchAssetDeny,blockchain:u.ETHEREUM_SYMBOL}}),window.close()}),[t.eventId]),V=(0,o.useCallback)((function(){M(!0),chrome.runtime.sendMessage({type:"extensionUIResponse",data:{id:t.eventId,action:A.ExtensionConnectionResponse.watchAssetApprove,chainId:t.chainId,blockchain:u.ETHEREUM_SYMBOL}}),z().then((function(){return window.close()}))}),[t.eventId,t.chainId,z]);return j?(0,k.jsx)(y.M,{resetError:N}):H?(0,k.jsx)(I,{symbol:t.symbol,chainName:null===(q=H.asChain())||void 0===q?void 0:q.displayName}):(0,k.jsxs)(v.VStack,{position:"absolute",bottom:0,right:0,width:"100%",children:[(0,k.jsx)(v.HStack,{justifyContent:"center",alignItems:"center",children:t.image?(0,k.jsx)(b.RemoteImage,{alt:G(P.dappLogoAlt),width:80,height:80,source:t.image}):(0,k.jsx)(k.Fragment,{})}),(0,k.jsx)("div",{className:(0,i.cx)(R,n&&W),"data-testid":"add-token-prompt",children:(0,k.jsxs)(v.VStack,{gap:2,children:[(0,k.jsx)(w.TextTitle3,{as:"h1",align:"center",children:G(P.addToken)}),(0,k.jsx)(w.TextBody,{as:"p",color:"foregroundMuted",align:"center",children:G(P.addTokenQuestion)}),(0,k.jsx)(v.Box,{spacingVertical:2,children:(0,k.jsxs)(v.VStack,{gap:2,children:[(0,k.jsx)(w.TextBody,{as:"p",color:"foregroundMuted",align:"start",children:G(P.addTokenRequestDescription)}),(0,k.jsxs)(w.TextBody,{as:"p",color:"foregroundMuted",align:"start",children:[G(P.tokenSymbol),": ",t.symbol]}),(0,k.jsxs)(w.TextBody,{as:"p",color:"foregroundMuted",align:"start",children:[G(P.tokenAddress),": ",(0,g.abridgeAddress)(t.address)]})]})})]})}),(0,k.jsx)(v.Box,{spacing:3,flexDirection:"column",children:(0,k.jsxs)(m.ButtonGroup,{block:!0,vertical:!0,accessibilityLabel:G(P.authorizationButtonGroup),children:[(0,k.jsx)(m.Button,{type:"button",variant:"primary",onPress:V,loading:C,"data-testid":"allow-watch-asset-button",children:G(P.addCustomTokenButton)}),(0,k.jsx)(m.Button,{type:"button",variant:"secondary",onPress:$,"data-testid":"deny-watch-asset-button",transparent:!0,children:G(P.denyActionButton)})]})})]})}T(I,"useIntl{{\n    formatMessage\n  }}\nuseCallback{closeWindow}",(function(){return[s.Z]})),T(j,"useState{[authed, setAuthed](false)}\nuseState{[authorizing, setAuthorizing](false)}\nuseState{[error, setError](null)}\nuseCallback{resetError}\nuseIntl{{\n    formatMessage\n  }}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseAddCustomEthToken{addCustomEthToken}\nuseCustomNetworkArgs{customNetworks}\nuseMemo{customNetwork}\nuseMemo{ethereumChain}\nuseCallback{addCustomToken}\nuseEffect{}\nuseCallback{denyAuthorize}\nuseCallback{allowAuthorize}",(function(){return[s.Z,f.useActiveWalletGroupId,p.Q,d.useCustomNetworkArgs]}));var O,N,R="b1kpd7hv",W="b1fu1pg";r(75819),(O="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(O.register(P,"messages","/workspaces/apps/extension/src/screens/Web3/WatchAsset/WatchAsset.tsx"),O.register(I,"AllowlistedNetworkView","/workspaces/apps/extension/src/screens/Web3/WatchAsset/WatchAsset.tsx"),O.register(j,"WatchAssetRequest","/workspaces/apps/extension/src/screens/Web3/WatchAsset/WatchAsset.tsx"),O.register(R,"body","/workspaces/apps/extension/src/screens/Web3/WatchAsset/WatchAsset.tsx"),O.register(W,"bodyExit","/workspaces/apps/extension/src/screens/Web3/WatchAsset/WatchAsset.tsx")),(N="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&N(e)},615729:(e,t,r)=>{r.d(t,{M:()=>f});var n,o=r(239398),a=r(783112),s=r(80724),i=r(960723),c=r(586421),u=r(661641),l=r(552322);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},h=(0,o.defineMessages)({connectionFailedMessage:{id:"5RXePS",defaultMessage:[{type:0,value:"Connection failed"}]},tryAgainButtonGroup:{id:"0ElHKg",defaultMessage:[{type:0,value:"Action buttons"}]},tryAgainButton:{id:"88moQ1",defaultMessage:[{type:0,value:"Try again"}]}});function f(e){var t=e.resetError,r=(0,a.Z)().formatMessage;return(0,l.jsxs)("div",{className:y,children:[(0,l.jsx)(m,{children:(0,l.jsx)(c.Icon,{name:"error",size:"l",color:"currentColor"})}),(0,l.jsxs)("div",{className:v,children:[(0,l.jsx)("div",{className:w,children:(0,l.jsx)(u.TextTitle1,{as:"h3",children:r(h.connectionFailedMessage)})}),(0,l.jsx)("div",{className:b,children:(0,l.jsx)(i.ButtonGroup,{block:!0,accessibilityLabel:r(h.tryAgainButtonGroup),children:(0,l.jsx)(i.Button,{type:"button",variant:"primary",onPress:t,"data-testid":"try-again",children:r(h.tryAgainButton)})})})]})]})}d(f,"useIntl{{\n    formatMessage\n  }}",(function(){return[a.Z]}));var p,g,y="b9dlpow",m=(0,s.z)("div")({name:"IconContainer",class:"iu69ejy",propsAsIs:!1}),v="b1hvuwxf",b="bcmu8fm",w="e1y5zb73";r(568669),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(p.register(h,"messages","/workspaces/libs/wallet-cds-extension/components/AuthorizationError.tsx"),p.register(f,"AuthorizationError","/workspaces/libs/wallet-cds-extension/components/AuthorizationError.tsx"),p.register(y,"baseContainer","/workspaces/libs/wallet-cds-extension/components/AuthorizationError.tsx"),p.register(m,"IconContainer","/workspaces/libs/wallet-cds-extension/components/AuthorizationError.tsx"),p.register(v,"buttonContainer","/workspaces/libs/wallet-cds-extension/components/AuthorizationError.tsx"),p.register(b,"buttonPosition","/workspaces/libs/wallet-cds-extension/components/AuthorizationError.tsx"),p.register(w,"errorText","/workspaces/libs/wallet-cds-extension/components/AuthorizationError.tsx")),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&g(e)},75819:(e,t,r)=>{r.r(t)},568669:(e,t,r)=>{r.r(t)},441090:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionConnectionResponse=void 0,function(e){e.requestEthereumAccountsResponse="requestEthereumAccountsResponse",e.addEthereumChainDeny="addEthereumChainDeny",e.addEthereumChainApprove="addEthereumChainApprove",e.switchEthereumChainDeny="switchEthereumChainDeny",e.switchEthereumChainApprove="switchEthereumChainApprove",e.signEthereumMessageSuccess="signEthereumMessageSuccess",e.signEthereumTransactionSuccess="signEthereumTransactionSuccess",e.submitEthereumTransactionSuccess="submitEthereumTransactionSuccess",e.watchAssetApprove="watchAssetApprove",e.watchAssetDeny="watchAssetDeny",e.selectProviderApprove="selectProviderApprove",e.selectProviderDeny="selectProviderDeny",e.dappChainSwitched="dappChainSwitched"}(t.ExtensionConnectionResponse||(t.ExtensionConnectionResponse={}))},661661:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MetricType=void 0,function(e){e.count="count",e.rate="rate",e.gauge="gauge",e.distribution="distribution",e.histogram="histogram"}(t.MetricType||(t.MetricType={}))},875316:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createWalletSetForCustomToken=void 0;const o=r(446101),a=r(327242),s=r(637420),i=r(152932),c=r(420378),u=r(373881),l=r(849117),d=n(r(160417)),h=r(220805);t.createWalletSetForCustomToken=async function(e,t,r,n,f){const p=(0,o.asNetwork)(a.EthereumNetworkMap.whitelisted.ETHEREUM_MAINNET),g=await(0,h.getAddresses)(p,f),y=(await(0,c.getAssetsSearch)(t.value,"USD")??[]).find((e=>e.symbol.toUpperCase()===t.value)),m=g.map((n=>new i.Address({index:n.index,address:n.address,balance:void 0,currencyCode:t,isChangeAddress:!1,network:r,type:o.EthereumWalletConfiguration.defaultReceiveType,derivationPath:(0,o.ethereumAddressDerivationPath)(n.index),isUsed:!0,blockchain:o.EthereumWalletConfiguration.blockchain,contractAddress:e,accountId:n.accountId})));return await(0,s.saveAddresses)(m),(0,d.default)(m).map((e=>new u.Wallet({primaryAddress:e.address,addresses:[new l.WalletAddress(o.EthereumWalletConfiguration.defaultReceiveType,e.address,e.index)],displayName:e.currencyCode.code,currencyCode:e.currencyCode,imageURL:y?.image_url,balance:e.balance,decimals:n,blockchain:o.EthereumWalletConfiguration.blockchain,minimumBalance:void 0,network:e.network,contractAddress:e.contractAddress,selectedIndex:e.index,accountId:e.accountId})))}},420378:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAssetPricesV3=t.RESOLUTIONS=t.RESOLUTION_DAY=t.getAssetsList=t.getAssetMetadata=t.getAssetsSearch=void 0;const n=r(362365),o=r(211774),a=r(49982),s=r(134813),i=`${o.CB_API_URL}/v2/assets`,c=`${o.CB_API_URL}/v3/coinbase.asset_metadata_service.v2.public.AssetMetadataPublicService`,u=`${o.CB_API_URL}/api/v3/coinbase.asset_stats_service.AssetStatsService`,l=`${o.CB_API_URL}/api/v3/coinbase.asset_stats_service.AssetStatsService/GetPriceChartForResolutions`;t.getAssetsSearch=async function(e,t){const r={query:e,base:t,country:"US",filter:"all",include_prices:"false",limit:"50",order:"asc",page:"1",resolution:"day",sort:"rank"};try{const{data:o}=await(0,a.getJSON)(`${i}/search`,r,{isThirdParty:!0});return(0,n.logPriceChartAssetLoadSucceeded)(e,t,r),o}catch(o){(0,n.logPriceChartAssetLoadFailed)(e,t,r,o)}return[]},t.getAssetMetadata=async function(e){const t={q:e};try{return await(0,a.getJSON)(`${c}/GetAssetV2`,t,{isThirdParty:!0})}catch(e){if(e instanceof s.HTTPError&&404===e.status)return;throw e}},t.getAssetsList=async function(e){const t={q:e};try{return await(0,a.getJSON)(`${u}/ListAssetStats`,t,{isThirdParty:!0})}catch(e){if(e instanceof s.HTTPError&&404===e.status)return;throw e}},t.RESOLUTION_DAY="RESOLUTION_DAY",t.RESOLUTIONS=["RESOLUTION_HOUR",t.RESOLUTION_DAY,"RESOLUTION_WEEK","RESOLUTION_MONTH","RESOLUTION_YEAR","RESOLUTION_ALL"],t.getAssetPricesV3=async function(e,r,o){try{if(!r)throw new Error(`invalid assetId provided: ${r}`);return function(e){const{priceCharts:[r],latestPrice:n,unitPriceScale:o}=e,{currency:a,priceChart:{uuid:s,symbol:i}}=r,c=i,u=s,l=function({priceCharts:e,latestPrice:r,currency:n,unitPriceScale:o}){const a=new Map,s=new Map;t.RESOLUTIONS.forEach((e=>{a.set(e,e.replace("RESOLUTION_","").toLowerCase())}));const i=e.reduce((function(e,t){const{resolution:r,priceChart:n}=t,{yAxisScalingFactor:o,percentChange:i,prices:c}=n,u=c.map((e=>[e.price,Number(e.timestamp)]));s.set(r,Number(i));const l={yAxisScalingFactor:o,percentChange:i,prices:u};return e[a.get(r)]=l,e}),{}),c={amount:r.price,currency:n,scale:o},u=[...s.entries()].reduce((function(e,[t,r]){return e[a.get(t)]=r,e}),{}),l={amount:c,percentChange:u,timestamp:r.timestamp},d=r.price;return{...i,latestPrice:l,latest:d}}({priceCharts:e.priceCharts,latestPrice:n,currency:a,unitPriceScale:o});return{base:c,baseId:u,currency:a,prices:l,unitPriceScale:o}}(await(0,a.getJSON)(`${l}`,{q:e},{isThirdParty:!0}))}catch(e){(0,n.logPriceChartPricesLoadFailed)(r??"",o,e)}}},362365:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.logPriceChartPricesLoadFailed=t.logPriceChartPricesLoadSucceeded=t.logPriceChartAssetMetaDataLoadFailed=t.logPriceChartAssetStatsLoadFailed=t.logPriceChartAssetLoadFailed=t.logPriceChartAssetMetaDataLoadSucceeded=t.logPriceChartAssetStatsLoadSucceeded=t.logPriceChartAssetLoadSucceeded=void 0;const n=r(160593),o=r(395545),a=r(661661);t.logPriceChartAssetLoadSucceeded=function(e,t,r){(0,n.logDataEvent)("price_chart.asset.load_succeeded",{loggingId:"e7348dd7-3d12-448a-93a7-feeab64dc35b",tokenSymbol:e,currencyCode:t,request:r})},t.logPriceChartAssetStatsLoadSucceeded=function(e,t){(0,n.logDataEvent)("price_chart.asset_stats_v3.load_succeeded",{loggingId:"6074c9dd-abb6-4ddc-a454-9c58bcf0e6c5",tokenSymbol:e,uuid:t})},t.logPriceChartAssetMetaDataLoadSucceeded=function(e,t){(0,n.logDataEvent)("price_chart.asset_metadata_v3.load_succeeded",{loggingId:"19d9c71a-83b8-443a-a1b8-7aa46132cd32",tokenSymbol:e,uuid:t})},t.logPriceChartAssetLoadFailed=function(e,t,r,o){(0,n.logDataEvent)("price_chart.asset.load_failed",{loggingId:"251bfaa4-4a7a-45c0-a5d3-85356e9ef793",tokenSymbol:e,currencyCode:t,request:r,error:String(o)})},t.logPriceChartAssetStatsLoadFailed=function(e,t,r){(0,n.logDataEvent)("price_chart.asset_stats_v3.load_failed",{loggingId:"2f4f42b8-c663-4e20-9192-5e1590a4be7a",tokenSymbol:e,uuid:t,error:String(r)})},t.logPriceChartAssetMetaDataLoadFailed=function(e,t,r){(0,n.logDataEvent)("price_chart.asset_metadata_v3.load_failed",{loggingId:"9f213d12-3dff-4b34-8404-1ea214674b88",tokenSymbol:e,uuid:t,error:String(r)})},t.logPriceChartPricesLoadSucceeded=function(e,t){(0,o.logMetric)({metricName:"price_chart.prices.load_succeeded",metricType:a.MetricType.count,value:1,tags:{baseAssetSymbol:e,currencyCode:t}})},t.logPriceChartPricesLoadFailed=function(e,t,r){(0,o.logMetric)({metricName:"price_chart.prices.load_failed",metricType:a.MetricType.count,value:1,tags:{baseAssetSymbol:e,currencyCode:t,error:String(r)}})}},629966:(e,t,r)=>{t.Q=void 0;const n=r(202784),o=r(236732),a=r(875316),s=r(929148),i=r(886855),c=r(279547),u=r(158856);t.Q=function(e){const t=(0,u.useWalletsForWalletGroupId)(e),r=(0,s.useActiveAccountId)();return(0,n.useCallback)((async(e,n,s,u)=>{const l=i.Network.create(s.id);if(!l)throw new Error(`Failed to create Network from custom network id ${s.id}`);if(t.find((e=>i.Network.isEqual(l,e.network)&&n===e.contractAddress)))throw new Error(`Custom token with contract address ${n} already exists`);const d=await(0,a.createWalletSetForCustomToken)(n,e,l,u,r);(0,c.saveWallets)(d);const h={network:l,index:0n,mode:{kind:"Full"},isForced:!0,accountId:r};await(0,o.refreshBalances)(h)}),[r,t])}},258928:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.abridgeAddress=void 0,t.abridgeAddress=function(e){const t=e.length;return t<20?e:`${e.substring(0,6)}...${e.substring(t-4,t)}`}}}]);
//# sourceMappingURL=2520.js.map