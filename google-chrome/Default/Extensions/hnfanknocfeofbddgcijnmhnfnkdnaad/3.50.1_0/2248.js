/*! For license information please see 2248.js.LICENSE.txt */
(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[2248],{186387:(e,t,n)=>{"use strict";n.d(t,{N:()=>L});var a,r=n(202784),o=n(239398),s=n(783112),i=n(348910),l=n(46290),u=n(404770),c=n(61517),d=n(255058),p=n(960723),f=n(941368),g=n(48972),m=n(661641),T=n(738244),b=n(391754),y=n(310666),h=n(749730),w=n(552322);e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var v,x,C="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},S="hw-trouble-connecting",k=(0,o.defineMessages)({tryAgainCTA:{id:"FazwRl",defaultMessage:[{type:0,value:"Try again"}]},backButtonAriaLabel:{id:"p72mKW",defaultMessage:[{type:0,value:"Go back"}]},errorMessage:{id:"29gmtd",defaultMessage:[{type:0,value:"Error: "},{type:1,value:"error"}]},havingTrouble:{id:"sPl3k8",defaultMessage:[{type:0,value:"Having trouble?"}]},gotIt:{id:"NYTGIb",defaultMessage:[{type:0,value:"Got it"}]}});function L(e){var t=e.statusCode,n=e.errorMessage,a=e.errorId,o=e.handleBack,v=(0,s.Z)().formatMessage,x=(0,T.useOnboardingStepper)().goBack,C=(0,i.L)();(0,y.log)("errorMessage:",n,"statusCode:",t,"errorId:",a);var L=(0,h.mapErrorToCopy)(t,a),M=(0,r.useCallback)((function(){o?o():x()}),[x,o]),I=(0,r.useCallback)((function(){(0,b.handleHavingTrouble)(l.AccountType.LEDGER)}),[]);return(0,w.jsxs)(g.VStack,{height:c.UV,justifyContent:"space-between",testID:"".concat(S,"-container"),children:[(0,w.jsxs)(g.VStack,{children:[(0,w.jsx)(g.Box,{offsetStart:1,children:(0,w.jsx)(p.IconButton,{testID:"".concat(S,"-back-btn"),name:"backArrow",onPress:M,transparent:!0,accessibilityLabel:v(k.backButtonAriaLabel)})}),(0,w.jsx)(g.VStack,{alignItems:"center",justifyContent:"flex-start",spacingTop:3,children:t===h.REJECTED_BY_USER_ERROR_CODE?(0,w.jsx)(f.SpotRectangle,{name:"ledgerSignatureRejected",scaleMultiplier:1}):(0,w.jsx)(d.m,{})})]}),(0,w.jsxs)(g.VStack,{gap:2,children:[(0,w.jsx)(m.TextTitle3,{as:"p",children:v(L[0])}),(0,w.jsx)(m.TextBody,{as:"p",color:C?"foreground":"foregroundMuted",children:v(L[1])}),void 0!==t&&!(0,h.isKnownError)(t)&&(0,w.jsx)(m.TextLabel2,{as:"p",children:v(k.errorMessage,{error:t})}),n&&(null==n?void 0:n.length)>0&&(0,w.jsx)(m.TextLabel1,{as:"p",children:v(k.errorMessage,{error:n})})]}),(0,w.jsxs)(g.VStack,{alignItems:"center",gap:2,children:[(0,w.jsx)(p.Button,{testID:"".concat(S,"-try-again-btn"),block:!0,onPress:M,children:t===h.UNSUPPORTED_SIGNING_CODE?v(k.gotIt):v(k.tryAgainCTA)}),(0,w.jsx)(u.j,{unset:!0,children:(0,w.jsx)(w.Fragment,{children:t!==h.UNSUPPORTED_SIGNING_CODE&&(0,w.jsx)(m.Link,{testID:"".concat(S,"-having-trouble"),variant:"body",color:"primary",onPress:I,children:v(k.havingTrouble)})})})]})]})}C(L,"useIntl{{ formatMessage }}\nuseOnboardingStepper{{ goBack }}\nuseMiamiIllustrationsEnabled{isMiamiIllustrationsEnabled}\nuseCallback{handleOnBackOrTryAgainPress}\nuseCallback{handleHavingTroublePress}",(function(){return[s.Z,T.useOnboardingStepper,i.L]})),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(v.register(S,"testIDPrefix","/workspaces/apps/extension/src/components/HardwareWallet/HWTroubleConnecting/HWTroubleConnecting.tsx"),v.register(k,"messages","/workspaces/apps/extension/src/components/HardwareWallet/HWTroubleConnecting/HWTroubleConnecting.tsx"),v.register(L,"HWTroubleConnecting","/workspaces/apps/extension/src/components/HardwareWallet/HWTroubleConnecting/HWTroubleConnecting.tsx")),(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&x(e)},117560:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var a,r=n(239398),o=n(783112),s=n(166902),i=n(61517),l=n(960723),u=n(586421),c=n(48972),d=n(661641),p=n(552322);e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},g=(0,r.defineMessages)({carefulWarning:{id:"InIXe9",defaultMessage:[{type:0,value:"Fraud warning"}]},allowAndContinueText:{id:"hmCtzs",defaultMessage:[{type:0,value:"Allow and continue"}]},cancel:{id:"kSix9e",defaultMessage:[{type:0,value:"Cancel"}]}});function m(e){var t=e.handlePrimaryButtonPress,n=e.isLoading,a=e.warningContent,r=e.handleCancelButtonPress,f=e.handleBackButton,m=e.analyticsData,T=(0,o.Z)().formatMessage;return(0,s.useFraudWarningConfirmationPopUpViewed)(m),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.VStack,{height:i.UV,justifyContent:"space-between",testID:"fraud-confirmation-warning-container",children:(0,p.jsxs)(c.VStack,{children:[(0,p.jsx)(c.Box,{offsetStart:1,zIndex:10,children:(0,p.jsx)(l.IconButton,{name:"backArrow",onPress:f,transparent:!0,accessibilityLabel:"back label",testID:"fraud-confirmation-warning-back-button"})}),(0,p.jsx)(c.Box,{spacingTop:4,justifyContent:"center",dangerouslySetStyle:y,children:(0,p.jsx)(u.Icon,{name:"warning",size:"l",dangerouslySetColor:"#ffd200"})}),(0,p.jsx)(d.TextTitle3,{spacingTop:10,as:"h3",align:"center",children:T(g.carefulWarning)}),(0,p.jsx)(d.TextBody,{spacingTop:2,as:"p",align:"center",children:a})]})}),(0,p.jsxs)(l.ButtonGroup,{vertical:!0,accessibilityLabel:"fraudWarningConfirmationWarningLabel",children:[(0,p.jsx)(l.Button,{type:"button",variant:"primary",onPress:r,disabled:n,children:T(g.cancel)}),(0,p.jsx)(l.Button,{testID:"confirmation-button",type:"button",variant:"negative",onPress:t,loading:n,children:T(g.allowAndContinueText)})]})]})}f(m,"useIntl{{ formatMessage }}\nuseFraudWarningConfirmationPopUpViewed{}",(function(){return[o.Z,s.useFraudWarningConfirmationPopUpViewed]}));var T,b,y={transform:"scale(3)",margin:"10px"};(T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(T.register(g,"messages","/workspaces/apps/extension/src/screens/FraudWarningConfirmation/FraudWarningConfirmation.tsx"),T.register(m,"FraudWarningConfirmation","/workspaces/apps/extension/src/screens/FraudWarningConfirmation/FraudWarningConfirmation.tsx"),T.register(y,"style","/workspaces/apps/extension/src/screens/FraudWarningConfirmation/FraudWarningConfirmation.tsx")),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&b(e)},42248:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DappTransactionRequest:()=>A});var a,r=n(202784),o=n(580082),s=n(29512),i=n(313867),l=n(991876),u=n(885197),c=n(334291),d=n.n(c),p=n(628656),f=n(48972),g=n(902818),m=n(448978),T=n(828466),b=n(421362),y=n(323912),h=n(539503),w=n(123645),v=n(552322);function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,s,i=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=o.call(n)).done)&&(i.push(a.value),i.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var S,k,L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},M=596,I={wallet:void 0,feeWallet:void 0,unsignedTx:void 0,unsignedTransactions:void 0};function A(e){var t=e.options,n=e.dappProviderType,a=x((0,r.useState)(I),2),c=a[0],C=a[1],S=l.DAPP_PROVIDER_PRIMARY_BLOCKCHAIN_MAPPING[n],k=(0,i.useAllWallets)();(0,r.useEffect)((function(){(0,o.l)({request:t.request,txSource:"extensionStandalone",wallets:k}).then((function(e){(0,m.triggerWeb3RequestShown)({request:t.kind,dappURL:t.dappURL,blockchain:S}),C(e)})).catch((function(e){(0,m.triggerWeb3RequestTxGenerationError)({request:t.kind,dappURL:t.dappURL,blockchain:S,eventData:{error:e.message}})}))}),[n,C,t,S,k]);var L=c.wallet,A=c.feeWallet,R=c.unsignedTx,E=c.unsignedTransactions,D=c.error,j=(0,s.j)({unsignedTx:R,wallet:L,request:t.kind,dappURL:(0,p.getHostNameForDapp)(t.dappURL)}),F=j.txScannerData,W=j.txScannerNotices,P=j.isTxScannerLoading,G=j.isTxScannerError,O=j.txScannerLoadStartTime,N=j.resetLoadTimer,H=(0,r.useMemo)((function(){if(F&&1===F.preAuthorizeOperations.length)return F.preAuthorizeOperations[0]}),[F]),B=n===u.SOLANA_PROVIDER_ID,q=(0,r.useMemo)((function(){return Boolean(F||P||G)}),[G,P,F]);if(!L||!A||!R||!F&&!B&&void 0===R)return(0,v.jsx)(v.Fragment,{});var U=B?(0,v.jsx)(y.L,{options:t,wallet:L,unsignedTransactions:E||[R],blockchain:S},"transactionRequest"):(0,v.jsx)(h.u,{options:t,wallet:L,feeWallet:A,unsignedTx:R,blockchain:S,parsedOperations:F,txScannerNotices:W,approveOperation:H,error:D,isTxScannerError:G,isTxScannerLoading:P,txScannerLoadStartTime:null==O?void 0:O.current,resetLoadTimer:N,isTxScannerEnabled:q},"transactionRequest");return(0,v.jsx)(g.f,{children:(0,v.jsx)(w.cr.Provider,{onSubmit:d(),children:(0,v.jsx)(w.Ex.Provider,{children:(0,v.jsx)(f.Box,{height:M,children:(0,v.jsxs)(w.Ex.Steps,{children:[U,(0,v.jsx)(b.P,{wallet:L},"adjustGasPreset"),(0,v.jsx)(T.N,{wallet:L},"adjustGasCustom")]})})})})})}L(A,"useState{[transactionContext, setTransactionContext](defaultTransactionContext)}\nuseAllWallets{wallets}\nuseEffect{}\nuseTxScanner{{\n    txScannerData,\n    txScannerNotices,\n    isTxScannerLoading,\n    isTxScannerError,\n    txScannerLoadStartTime,\n    resetLoadTimer,\n  }}\nuseMemo{approveOperation}\nuseMemo{isTxScannerEnabled}",(function(){return[i.useAllWallets,s.j]})),(S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(S.register(M,"DAPP_REQUEST_VIEWPORT_HEIGHT","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/DappTransactionRequest.tsx"),S.register(I,"defaultTransactionContext","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/DappTransactionRequest.tsx"),S.register(A,"DappTransactionRequest","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/DappTransactionRequest.tsx")),(k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&k(e)},828466:(e,t,n)=>{"use strict";n.d(t,{N:()=>f});var a,r,o,s=n(202784),i=n(871444),l=n(936991),u=n(735103),c=n(95898),d=n(123645),p=n(552322);function f(e){var t=e.wallet,n=(0,u.useStepper)(d.Ex),a=n.goBack,r=n.goToStep,o=(0,c.Z)(d.cr),f=o.toAddress,g=o.unsignedTransaction,m=o.initialGasLimit,T=(0,s.useCallback)((function(e){g.onChange(e.transaction),r("transactionRequest")}),[r,g]),b=(0,i.useMinerFeeEstimates)(m.value,t.network);if(!b)throw Error("Miner fees not defined");var y=(0,s.useMemo)((function(){return{gasLimit:m.value,maxFee:null==b?void 0:b.normal.maxFeePerGas,maxPriorityFee:null==b?void 0:b.normal.maxPriorityFeePerGas,baseFee:null==b?void 0:b.normal.baseFeePerGas}}),[b,m.value]);return(0,p.jsx)(l.C,{wallet:t,toAddress:f.value,unsignedTx:g.value,initialFees:y,handleGenerateTx:T,goBack:a,flowType:"dappTxn"})}e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(f,"useStepper{{ goBack, goToStep }}\nuseFields{{ toAddress, unsignedTransaction, initialGasLimit }}\nuseCallback{handleGenerateTx}\nuseMinerFeeEstimates{estimates}\nuseMemo{initialFees}",(function(){return[u.useStepper,c.Z,i.useMinerFeeEstimates]})),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&r.register(f,"AdjustGasCustomStep","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/AdjustGasCustomStep/AdjustGasCustomStep.tsx"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)},421362:(e,t,n)=>{"use strict";n.d(t,{P:()=>f});var a,r,o,s=n(202784),i=n(374410),l=n(491063),u=n(735103),c=n(95898),d=n(123645),p=n(552322);function f(e){var t=e.wallet,n=(0,u.useStepper)(d.Ex),a=n.goBack,r=n.goToStep,o=(0,c.Z)(d.cr),f=o.toAddress,g=o.unsignedTransaction,m=o.initialGasLimit,T="dappTxn",b=(0,s.useCallback)((function(){(0,i.triggerAdjustableGasCustomCellClicked)(T),r("adjustGasCustom")}),[r]),y=(0,s.useCallback)((function(e){g.onChange(e.transaction),r("transactionRequest")}),[r,g]);return(0,p.jsx)(l.I,{wallet:t,toAddress:f.value,unsignedTx:g.value,initialGasLimit:m.value,handleGenerateTx:y,goBack:a,goToCustom:b,flowName:T})}e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(f,"useStepper{{ goBack, goToStep }}\nuseFields{{ toAddress, unsignedTransaction, initialGasLimit }}\nuseCallback{handlePressCustom}\nuseCallback{handleGenerateTx}",(function(){return[u.useStepper,c.Z]})),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&r.register(f,"AdjustGasPresetStep","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/AdjustGasPresetStep/AdjustGasPresetStep.tsx"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)},682660:(e,t,n)=>{"use strict";n.d(t,{H:()=>k});var a,r=n(202784),o=n(239398),s=n(783112),i=n(907879),l=n(79596),u=n(178012),c=n(774600),d=n.n(c),p=n(142289),f=n(606058),g=n(48972),m=n(76470),T=n(661641),b=n(448978),y=n(552322);e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},w=(0,o.defineMessages)({transactionDetailsHeader:{id:"wEyTQs",defaultMessage:[{type:0,value:"Transaction details"}]},transactionWarning:{id:"fcgTbM",defaultMessage:[{type:0,value:"This type of request is sometimes used for malicious purposes. Make sure you fully trust this site."}]},unknownTxnTooltip:{id:"tF2L9s",defaultMessage:[{type:0,value:"This is an unknown program type. Make sure you trust this dapp."}]}});function v(e){var t=e.instructionParam,n=e.isInstructionUnknown,a="".concat(i.solanaUrls.SOLANA_MAINNET.blockExplorerUrl,"/address/"),r=n&&t.paramKey===l.PROGRAM_ID,o="string"==typeof t.paramValue&&t.paramValue.length>15?(0,u.truncateMiddle)(t.paramValue,6,4):t.paramValue;return(0,y.jsxs)(g.HStack,{spacingHorizontal:2,justifyContent:"space-between",spacingBottom:1,testID:"instruction-param-row",children:[(0,y.jsx)(T.TextLabel2,{as:"p",color:"foregroundMuted",children:d()(t.paramKey)}),(0,y.jsx)(T.TextLabel2,{as:"p",color:"foregroundMuted",children:r?(0,y.jsx)(T.Link,{to:"".concat(a).concat(t.paramValue),testID:"link-solana-explorer",openInNewWindow:!0,children:o}):o})]})}function x(e){var t=e.instruction,n=e.dappURL,a=e.request,r=(0,s.Z)().formatMessage,o="unknown"===t.instructionType.toLowerCase();return(0,b.useWeb3InstructionTypeDataViewed)({dappURL:n,request:a,instructionType:t.instructionType}),(0,y.jsxs)(p.Card,{width:"100%",elevation:1,borderedBottom:!0,spacingBottom:1,testID:"instruction-card",children:[(0,y.jsxs)(g.HStack,{alignItems:"baseline",children:[(0,y.jsx)(T.TextLabel1,{as:"p",color:"foreground",spacingStart:2,spacingTop:2,spacingBottom:1,children:d()(t.instructionType)}),o&&(0,y.jsx)(g.Box,{justifyContent:"center",children:(0,y.jsx)(m.Tooltip,{testID:"unknown-txn-tooltip",content:r(w.unknownTxnTooltip),placement:"bottom",children:(0,y.jsx)(f.Icon,{name:"info",size:"xs",color:"foreground",testID:"warning-unknown-program-icon",spacingHorizontal:.5})})})]}),t.instructionParams.map((function(e,t){return(0,y.jsx)(v,{instructionParam:e,isInstructionUnknown:o},"instruction-row-".concat(t))}))]})}h(x,"useIntl{{ formatMessage }}\nuseWeb3InstructionTypeDataViewed{}",(function(){return[s.Z,b.useWeb3InstructionTypeDataViewed]}));var C,S,k=(0,r.memo)(h((function(e){var t=e.solUnsignedTxs,n=e.dappURL,a=e.request,o=e.showTransactionWarning,i=(0,s.Z)().formatMessage,l=(0,r.useMemo)((function(){var e=[];return t.forEach((function(t,r){t.dappInstructionMetaData&&Array.isArray(t.dappInstructionMetaData)&&t.dappInstructionMetaData.forEach((function(t,o){e.push((0,y.jsx)(x,{instruction:t,dappURL:n,request:a},"instruction-info-".concat(r,",").concat(o)))}))})),e}),[t,n,a]);return(0,y.jsxs)(g.VStack,{width:"100%",gap:2,children:[(0,y.jsx)(T.TextTitle3,{as:"h3",children:i(w.transactionDetailsHeader)}),o&&(0,y.jsx)(p.Card,{testID:"txn-warning",spacingVertical:2,bordered:!0,borderRadius:"standard",children:(0,y.jsxs)(g.HStack,{justifyContent:"flex-start",children:[(0,y.jsx)(f.Icon,{testID:"txn-warning-icon",name:"info",size:"s",color:"foregroundMuted",spacingStart:2,spacingTop:.5}),(0,y.jsx)(T.TextLabel2,{as:"p",color:"foregroundMuted",spacingHorizontal:1,children:i(w.transactionWarning)})]})}),(0,y.jsx)(p.Card,{borderedHorizontal:!0,borderedTop:!0,borderRadius:"standard",children:l})]})}),"useIntl{{ formatMessage }}\nuseMemo{instructionCards}",(function(){return[s.Z]})));(C="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(C.register(w,"messages","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/SolanaTransactionRequestStep/SolanaAdvancedTxnDetails.tsx"),C.register(v,"InstructionParamRow","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/SolanaTransactionRequestStep/SolanaAdvancedTxnDetails.tsx"),C.register(x,"InstructionCard","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/SolanaTransactionRequestStep/SolanaAdvancedTxnDetails.tsx"),C.register(k,"SolanaAdvancedTxnDetails","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/SolanaTransactionRequestStep/SolanaAdvancedTxnDetails.tsx")),(S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&S(e)},323912:(e,t,n)=>{"use strict";n.d(t,{L:()=>F});var a,r=n(202784),o=n(239398),s=n(783112),i=n(60397),l=n(166902),u=n(86296),c=n(123132),d=n(654971),p=n(254453),f=n(559080),g=n(230438),m=n(930830),T=n(61517),b=n(111176),y=n(555192),h=n(448978),w=n(654851),v=n(24864),x=n(180158),C=n(757652),S=n(210449),k=n(432969),L=n(502743),M=n(682660),I=n(565972),A=n(552322);e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var R,E,D="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},j=(0,o.defineMessages)({confirmTransactionTitle:{id:"l68NyE",defaultMessage:[{type:0,value:"Confirm transaction"}]},confirmAllTransactionsTitle:{id:"LnJrm5",defaultMessage:[{type:0,value:"Confirm multiple transactions"}]},cancel:{id:"kSix9e",defaultMessage:[{type:0,value:"Cancel"}]},confirm:{id:"m1nG96",defaultMessage:[{type:0,value:"Confirm"}]},confirmAll:{id:"MvK7Qg",defaultMessage:[{type:0,value:"Confirm All"}]}});function F(e){var t=e.options,n=e.wallet,a=e.unsignedTransactions,o=e.blockchain,R=e.error,E=(0,s.Z)().formatMessage,D=n.imageURL,F=n.displayName,W=t instanceof k.SolanaSignAllTransactions,P=(0,f.useUpdateTransactionState)(),G=(0,I.U)(n,a),O=(0,y.q)(),N=(0,x.k)(),H=(0,C.useHandleNextQueuedRequest)(),B=(0,S.B)(),q=t.dappURL,U=t.dappName,_=t.kind,V=(0,r.useMemo)((function(){var e;return{dappURL:q,request:t.kind,blockchain:o,walletIndex:null===(e=n.selectedIndex)||void 0===e?void 0:e.toString()}}),[o,q,t.kind,n]);(0,l.useTransactionRequestStepViewed)(V);var Z=(0,g.useActiveWalletGroupId)(),z=(0,m.useTxFeeWallet)(Z,a[0]);if(!z)throw new Error("Something went wrong in TransactionRequestStep");var Q=(0,p.useSolTransactionDetailErrors)({wallet:n,unsignedTxs:a,error:R,feeWallet:z}),Y=(0,r.useCallback)((function(){B()?H():setTimeout((function(){return window.close()}),50)}),[B,H]),K=(0,r.useCallback)((function(e){N({eventId:t.eventId,error:e,dappURL:q,blockchain:o,request:t.kind}),Y()}),[N,t.eventId,t.kind,q,Y,o]),X=(0,r.useCallback)((function(e){var n=e.map((function(e){return e}));(0,w.H)(t,n),Y()}),[Y,t]),J=(0,l.useTriggerWeb3RequestSendingSuccessResponse)(V),$=(0,r.useCallback)((function(e){var n=e;P(e.txHash,e.blockchain,e.state),(0,v._)(t,n,J),Y()}),[Y,t,J,P]),ee=(0,l.useTriggerWeb3SignTransactionError)(V),te=(0,r.useCallback)((function(e){(0,u.cbReportError)({error:e,context:"transactions",severity:"error",isHandled:!1}),ee({errorMessage:e.message}),K(e)}),[ee,K]),ne=(0,c.useSignAndSubmitStandalone)({wallet:n,unsignedTx:a[0],signSuccess:$,signError:te,skipSubmit:"solanaSendTransaction"!==t.kind,handleUnlock:O(n.accountId),source:U}),ae=ne.signAndSubmitStandalone,re=ne.isSignAndSubmitStandaloneLoading,oe=(0,d.useSignMultipleTransactionsStandalone)({wallet:n,unsignedTxs:a,signSuccess:X,signError:te,handleUnlock:O(n.accountId),source:U}),se=oe.signMultipleTransactionsStandalone,ie=oe.isSignMultipleTransactionsStandaloneLoading,le=re||ie;(0,r.useEffect)((function(){null!=Q&&Q.isDisabled||le||(0,h.triggerWeb3RequestConfirmButtonEnabled)({dappURL:q,request:_,blockchain:o})}),[o,q,le,_,null==Q?void 0:Q.isDisabled]);var ue=(0,l.useTriggerWeb3CancelTransactionClicked)(V),ce=(0,l.useTriggerWeb3ConfirmTransactionClicked)(V),de=(0,r.useCallback)((function(){ue(),K(i.standardErrors.provider.userRejectedRequest({}))}),[K,ue]),pe=(0,r.useCallback)((function(){ce(),W?se():ae()}),[ce,W,se,ae]),fe=(0,r.useMemo)((function(){var e;return[{children:E(j.cancel),variant:"secondary",onPress:de,testID:"sol-request-cancel-button"},{children:E(W?j.confirmAll:j.confirm),variant:null!=Q&&Q.isDisabled?"secondary":"primary",disabled:null!==(e=null==Q?void 0:Q.isDisabled)&&void 0!==e?e:le,loading:le,onPress:pe,testID:"sol-request-confirm-button"}]}),[E,de,pe,W,le,null==Q?void 0:Q.isDisabled]);return n?(0,A.jsx)(b.O,{height:T.IR,headerText:E(W?j.confirmAllTransactionsTitle:j.confirmTransactionTitle),topSection:(0,A.jsx)(L.c,{dappLogoURL:t.dappLogoURL,dappLogoURLAlt:t.dappLogoURLAlt,dappURL:t.dappURL,networkBadgeURL:D,networkBadgeAlt:F}),advancedDetailsSection:(0,A.jsx)(M.H,{solUnsignedTxs:a,dappURL:t.dappURL,request:t.kind,showTransactionWarning:!0}),detailRowItems:G,disableBackBtn:!0,error:Q,buttonProps:fe,showTransactionWarning:!1,signingAddressToDisplay:n.primaryAddress}):(0,A.jsx)(A.Fragment,{})}D(F,"useIntl{{ formatMessage }}\nuseUpdateTransactionState{updateTransactionState}\nuseSolanaTransactionRequestDetails{detailRows}\nuseHandleUnlockForSigning{handleUnlock}\nuseCancel{cancel}\nuseHandleNextQueuedRequest{handleNextQueuedRequest}\nuseHasNextQueuedRequest{hasNextQueuedRequest}\nuseMemo{analyticsData}\nuseTransactionRequestStepViewed{}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseTxFeeWallet{feeWallet}\nuseSolTransactionDetailErrors{solanaTransactionDetailErrors}\nuseCallback{handleNextRequestOrCloseWindow}\nuseCallback{cancelTransaction}\nuseCallback{signMultipleSuccess}\nuseTriggerWeb3RequestSendingSuccessResponse{triggerWeb3RequestSendingSuccessResponse}\nuseCallback{signSuccess}\nuseTriggerWeb3SignTransactionError{triggerWeb3SignTransactionError}\nuseCallback{signError}\nuseSignAndSubmitStandalone{{ signAndSubmitStandalone, isSignAndSubmitStandaloneLoading }}\nuseSignMultipleTransactionsStandalone{{ signMultipleTransactionsStandalone, isSignMultipleTransactionsStandaloneLoading }}\nuseEffect{}\nuseTriggerWeb3CancelTransactionClicked{triggerWeb3CancelTransactionClicked}\nuseTriggerWeb3ConfirmTransactionClicked{triggerWeb3ConfirmTransactionClicked}\nuseCallback{handleCancelButtonPress}\nuseCallback{handlePrimaryButtonPress}\nuseMemo{buttonOptions: ButtonProps[]}",(function(){return[s.Z,f.useUpdateTransactionState,I.U,y.q,x.k,C.useHandleNextQueuedRequest,S.B,l.useTransactionRequestStepViewed,g.useActiveWalletGroupId,m.useTxFeeWallet,p.useSolTransactionDetailErrors,l.useTriggerWeb3RequestSendingSuccessResponse,l.useTriggerWeb3SignTransactionError,c.useSignAndSubmitStandalone,d.useSignMultipleTransactionsStandalone,l.useTriggerWeb3CancelTransactionClicked,l.useTriggerWeb3ConfirmTransactionClicked]})),(R="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(R.register(j,"messages","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/SolanaTransactionRequestStep/SolanaTransactionRequestStep.tsx"),R.register(F,"SolanaTransactionRequestStep","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/SolanaTransactionRequestStep/SolanaTransactionRequestStep.tsx")),(E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&E(e)},565972:(e,t,n)=>{"use strict";n.d(t,{U:()=>y});var a,r=n(202784),o=n(239398),s=n(783112),i=n(101620),l=n(301940),u=n(866799),c=n(952180),d=n.n(c),p=n(160417),f=n.n(p);e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var g,m,T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},b=(0,o.defineMessages)({walletUsedLabel:{id:"o99uP8",defaultMessage:[{type:0,value:"Wallet used"}]},networkFeeLabel:{id:"jbv0bT",defaultMessage:[{type:0,value:"Total network fee"}]},networkNameLabel:{id:"MWZ9F7",defaultMessage:[{type:0,value:"Network"}]},unknownNetwork:{id:"Kdb7tZ",defaultMessage:[{type:0,value:"Unknown network"}]},transactionSpeedLabel:{id:"sSDDvu",defaultMessage:[{type:0,value:"Transaction speed"}]},addressLabel:{id:"Lk+qm8",defaultMessage:[{type:0,value:"Address"}]}});function y(e,t){var n,a=(0,s.Z)().formatMessage,o=(0,i.useCurrencyFormatter)(),c=t[0],p=(0,l.useNetworkFeeTooltipMessages)(null===(n=c.network.asChain())||void 0===n?void 0:n.chainId).networkFeeTooltip,g=(0,r.useMemo)((function(){var e,n,a,r=t.reduce((function(e,t){return e+t.estimatedFee}),0n);n=o.formatToFiat(c.feeCurrencyCode,c.feeCurrencyDecimal,r,!1,void 0,c.network),a=o.formatToCrypto({currencyCode:c.feeCurrencyCode,decimals:c.feeCurrencyDecimal,value:r,network:c.network,includeCode:!0});var s=o.fiatValue(c.feeCurrencyCode,c.feeCurrencyDecimal,r,void 0,c.network),i=new(d())(.01);return null!==(e=null!=s&&s.greaterThanOrEqualTo(i)?n:a)&&void 0!==e?e:""}),[o,c.feeCurrencyCode,c.feeCurrencyDecimal,c.network,t]),m=(0,r.useMemo)((function(){var t=e.network.asChain();return t?t.displayName:a(b.unknownNetwork)}),[a,e]);return(0,r.useMemo)((function(){var t;return f()([{label:a(b.walletUsedLabel),detailText:(0,u.getTruncatedAddress)(null===(t=e.primaryAddress)||void 0===t?void 0:t.toString())},{label:a(b.networkNameLabel),detailText:null==m?void 0:m.toString()},{label:a(b.networkFeeLabel),detailText:g.toString(),tooltipText:a(p)}])}),[a,p,g,m,e.primaryAddress])}T(y,"useIntl{{ formatMessage }}\nuseCurrencyFormatter{formatter}\nuseNetworkFeeTooltipMessages{{ networkFeeTooltip }}\nuseMemo{formattedNetworkFee}\nuseMemo{formattedNetworkName}\nuseMemo{}",(function(){return[s.Z,i.useCurrencyFormatter,l.useNetworkFeeTooltipMessages]})),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(g.register(b,"messages","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/SolanaTransactionRequestStep/useSolanaTransactionRequestDetails.tsx"),g.register(y,"useSolanaTransactionRequestDetails","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/SolanaTransactionRequestStep/useSolanaTransactionRequestDetails.tsx")),(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&m(e)},539503:(e,t,n)=>{"use strict";n.d(t,{u:()=>be});var a,r=n(202784),o=n(239398),s=n(783112),i=n(60397),l=n(374410),u=n(166902),c=n(446101),d=n(223933),p=n(86296),f=n(526090),g=n(656695),m=n(123132),T=n(389960),b=n(839668),y=n(524801),h=n(805173),w=n(587617),v=n(886855),x=n(705890),C=n(533890),S=n(811165),k=n(281886),L=n(613958),M=n(201324),I=n(784857),A=n(57179),R=n(61517),E=n(628656),D=n(735103),j=n(95898),F=n(627763),W=n(586421),P=n(48972),G=n(252163),O=n(186387),N=n(111176),H=n(732319),B=n(555192),q=n(766578),U=n(340671),_=n(489040),V=n(117560),Z=n(123645),z=n(160831),Q=n(448978),Y=n(982586),K=n(180158),X=n(757652),J=n(210449),$=n(252844),ee=n(713403),te=n(502743),ne=n(321640),ae=n(552322);function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==re(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==re(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===re(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(){le=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var o=t&&t.prototype instanceof b?t:b,s=Object.create(o.prototype),i=new R(a||[]);return r(s,"_invoke",{value:L(e,n,i)}),s}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var p="suspendedStart",f="suspendedYield",g="executing",m="completed",T={};function b(){}function y(){}function h(){}var w={};u(w,s,(function(){return this}));var v=Object.getPrototypeOf,x=v&&v(v(E([])));x&&x!==n&&a.call(x,s)&&(w=x);var C=h.prototype=b.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(r,o,s,i){var l=d(e[r],e,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==re(c)&&a.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(c).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,i)}))}i(l.arg)}var o;r(this,"_invoke",{value:function(e,a){function r(){return new t((function(t,r){n(e,a,t,r)}))}return o=o?o.then(r,r):r()}})}function L(t,n,a){var r=p;return function(o,s){if(r===g)throw new Error("Generator is already running");if(r===m){if("throw"===o)throw s;return{value:e,done:!0}}for(a.method=o,a.arg=s;;){var i=a.delegate;if(i){var l=M(i,a);if(l){if(l===T)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===p)throw r=m,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=g;var u=d(t,n,a);if("normal"===u.type){if(r=a.done?m:f,u.arg===T)continue;return{value:u.arg,done:a.done}}"throw"===u.type&&(r=m,a.method="throw",a.arg=u.arg)}}}function M(t,n){var a=n.method,r=t.iterator[a];if(r===e)return n.delegate=null,"throw"===a&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),T;var o=d(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,T;var s=o.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,T):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,T)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function E(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(a.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(re(t)+" is not iterable")}return y.prototype=h,r(C,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:y,configurable:!0}),y.displayName=u(h,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},S(k.prototype),u(k.prototype,i,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,a,r,o){void 0===o&&(o=Promise);var s=new k(c(e,n,a,r),o);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},S(C),u(C,l,"Generator"),u(C,s,(function(){return this})),u(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=E,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(a,r){return i.type="throw",i.arg=t,n.next=a,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var l=a.call(s,"catchLoc"),u=a.call(s,"finallyLoc");if(l&&u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,T):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),T},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),T}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;A(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={iterator:E(t),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=e),T}},t}function ue(e,t,n,a,r,o,s){try{var i=e[o](s),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(a,r)}function ce(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function s(e){ue(o,a,r,s,i,"next",e)}function i(e){ue(o,a,r,s,i,"throw",e)}s(void 0)}))}}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,s,i=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=o.call(n)).done)&&(i.push(a.value),i.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var fe,ge,me="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},Te=(0,o.defineMessages)({title:{id:"cYyX/U",defaultMessage:[{type:0,value:"Confirm request"}]},cancel:{id:"kSix9e",defaultMessage:[{type:0,value:"Cancel"}]},confirm:{id:"m1nG96",defaultMessage:[{type:0,value:"Confirm"}]},carefulWarning:{id:"HLft3N",defaultMessage:[{type:0,value:"Be careful!"}]},allowAndContinueText:{id:"hmCtzs",defaultMessage:[{type:0,value:"Allow and continue"}]}});function be(e){var t,n,a,o=e.options,re=e.wallet,oe=e.feeWallet,ie=e.unsignedTx,ue=e.blockchain,pe=e.approveOperation,fe=e.error,ge=e.isTxScannerLoading,me=e.parsedOperations,be=e.txScannerNotices,ye=e.isTxScannerError,he=e.txScannerLoadStartTime,we=e.resetLoadTimer,ve=e.isTxScannerEnabled,xe=de((0,r.useState)(),2),Ce=xe[0],Se=xe[1],ke=(0,w.Kg)(),Le=(0,j.Z)(Z.cr),Me=Le.toAddress,Ie=Le.unsignedTransaction,Ae=Le.initialGasLimit,Re=(0,D.useStepper)(Z.Ex).goToStep,Ee=(0,s.Z)().formatMessage,De=o.request,je=o.dappURL,Fe=o.dappName,We=(0,X.useHandleNextQueuedRequest)(),Pe=(0,J.B)(),Ge=(0,K.k)(),Oe=(0,r.useContext)(H.H).disableConfirmButton,Ne=de((0,F.useToggler)(!1),2),He=Ne[0],Be=Ne[1],qe=Be.toggleOn,Ue=Be.toggleOff,_e=(0,k.useIsTxPreviewEnabled)(),Ve=(0,S.B)({request:De.method,dappURL:(0,E.getHostNameForDapp)(je),blockchain:null===(t=Ie.value)||void 0===t?void 0:t.blockchain.rawValue,txScannerData:me,isTxPreviewEnabled:_e,txScannerNotices:be,walletIndex:null===(n=re.selectedIndex)||void 0===n?void 0:n.toString()});(0,r.useEffect)((function(){Oe||(0,Q.triggerWeb3RequestConfirmButtonEnabled)({dappURL:je,request:De.method,blockchain:ue})}),[ue,je,Oe,De.method]),(0,u.useTransactionRequestStepViewed)(Ve);var Ze=(0,T.e)(null==me?void 0:me.preAuthorizeOperations,be),ze=(0,x.i)(ie,re),Qe=(0,u.useTriggerWeb3FraudWarningConfirmationClicked)(Ve),Ye=(0,r.useCallback)((function(){Qe(),qe()}),[qe,Qe]),Ke=(0,r.useCallback)((function(e){Ge({eventId:o.eventId,request:De.method,error:e,dappURL:je,blockchain:ue}),Pe()?We():setTimeout((function(){return window.close()}),50)}),[Ge,o.eventId,De.method,je,We,Pe,ue]),Xe=(0,u.useTriggerWeb3SignTransactionError)(Ve),Je=(0,r.useCallback)((function(e){(0,p.cbReportError)({error:e,context:"transactions",severity:"error",isHandled:!1}),Xe({errorMessage:e.message}),Ke(e)}),[Xe,Ke]),$e=(0,r.useCallback)((function(e){(0,p.cbReportError)({error:new Error(e.message),context:"ledger-error",severity:"error",isHandled:!1}),"EthAppPleaseEnableContractData"===e.name?Se(e.message):Je(e)}),[Je]),et=(0,r.useCallback)((function(){Se(void 0),ke(!1),Ue()}),[ke,Ue]),tt=(0,u.useTriggerWeb3RequestSendingSuccessResponse)(Ve),nt=(0,r.useCallback)(function(){var e=ce(le().mark((function e(t){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Y._)(o,t,tt);case 2:Pe()?We():setTimeout((function(){return window.close()}),50);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,tt,Pe,We]),at=(0,B.q)(),rt=(0,h.useAccountById)(re.accountId),ot=rt.hasLocallyStoredKey,st=rt.isLedgerAccount,it=(0,m.useSignAndSubmitStandalone)({wallet:re,unsignedTx:Ie.value,signSuccess:nt,signError:Je,skipSubmit:!o.request.params.shouldSubmit,handleUnlock:at(re.accountId),source:Fe}),lt=it.signAndSubmitStandalone,ut=it.isSignAndSubmitStandaloneLoading,ct=(0,U.T)({flow:U.Z.Dapp,unsignedTx:ie,onSignSuccess:nt,onSignError:$e,dappURL:je,source:Fe}),dt=ct.signAndSubmitLedger,pt=ct.isHardwareWalletSigning,ft=ct.hardwareWalletScreen,gt=null!=ut?ut:pt;if(!oe)throw new Error("Something went wrong in TransactionRequestStep");(0,g.useOnMount)((function(){if(!Ie.value&&(Me.onChange(De.params.toAddress),Ie.onChange(ie),(0,d.isETH1559Tx)(ie))){var e=ie;Ae.onChange(e.gasLimit)}}));var mt=(0,r.useMemo)((function(){return(0,c.isNetwork1559Enabled)(re.network)}),[re.network]),Tt=(0,q.A)(),bt=ot&&mt&&(!(0,ee.isProd)()||Tt),yt=(0,r.useCallback)((function(){(0,l.triggerAdjustableGasDappTxnFlowEntryClicked)(),Re("adjustGasPreset")}),[Re]),ht=(0,r.useMemo)((function(){return bt?(0,ae.jsx)(G.Pressable,{as:"button",onPress:yt,backgroundColor:"transparent",children:(0,ae.jsx)(W.Icon,{name:"gear",size:"s",color:"foreground",spacingStart:1})}):null}),[bt,yt]),wt=(0,ne.q)(re,ge,Ie.value,me,Ze,ht),vt=(0,C.o)({wallet:re,unsignedTx:Ie.value,error:fe,feeWallet:oe,flow:"dappTx"}),xt=(0,u.useTriggerFraudWarningConfirmationBackButtonClicked)(Ve),Ct=(0,r.useCallback)((function(){xt(),Ue()}),[Ue,xt]),St=(0,u.useTriggerWeb3CancelTransactionClicked)(Ve),kt=(0,u.useTriggerWeb3ConfirmTransactionClicked)(Ve),Lt=(0,r.useCallback)((function(){St(),Ke(i.standardErrors.provider.userRejectedRequest({}))}),[Ke,St]),Mt=(0,r.useCallback)(ce(le().mark((function e(){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kt(),!ot){e.next=3;break}return e.abrupt("return",lt());case 3:if(!st){e.next=5;break}return e.abrupt("return",dt());case 5:case"end":return e.stop()}}),e)}))),[kt,ot,st,lt,dt]),It=(0,r.useMemo)((function(){var e;return[{children:Ee(Te.cancel),variant:"secondary",onPress:Lt,testID:"request-cancel-button"},{children:Ee(Te.confirm),variant:null!=vt&&vt.isDisabled?"secondary":"primary",disabled:(null!==(e=null==vt?void 0:vt.isDisabled)&&void 0!==e?e:gt)||Oe,loading:gt,onPress:null!=Ze&&Ze.fraudWarningConfirmationText?Ye:Mt,testID:"request-confirm-button"}]}),[Ee,Lt,null==vt?void 0:vt.isDisabled,gt,Oe,Ye,Mt,Ze]),At=b.Blockchain.isEqual(re.blockchain,c.EthereumBlockchain)&&y.CurrencyCode.isEqual(re.currencyCode,y.CurrencyCode.ETH)&&v.Network.isEqual(re.network,new v.Network("ETHEREUM_CHAIN:1",!1))&&void 0===re.contractAddress&&0n===re.selectedIndex,Rt=At?void 0:re.imageURL,Et=At?void 0:re.displayName,Dt=ze,jt=Dt.gasLimit,Ft=Dt.analyticsId,Wt=Dt.chainId,Pt=Dt.feeCurrencyCode,Gt=ze,Ot=Gt.networkFeeInUSD,Nt=Gt.networkFeeInCrypto,Ht=ze,Bt=Ht.minFeeInUSD,qt=Ht.maxFeeInUSD,Ut=Ht.minFeeInCrypto,_t=Ht.maxFeeInCrypto,Vt=(0,r.useMemo)((function(){return{dappLogoURL:o.dappLogoURL,dappLogoURLAlt:o.dappLogoURLAlt,dappURL:o.dappURL,networkBadgeURL:Rt,networkBadgeAlt:Et}}),[Et,Rt,o.dappLogoURL,o.dappLogoURLAlt,o.dappURL]),Zt=(0,r.useMemo)((function(){return Boolean(_e&&Vt)}),[Vt,_e]),zt=null===(a=re.network.asChain())||void 0===a?void 0:a.chainId,Qt=(0,f.m)(me),Yt=(0,r.useMemo)((function(){var e,t,n=(null==pe?void 0:pe.operationType)&&o;return _e?ye?(0,ae.jsx)(I.C,{analyticsData:Ve,txScannerNotices:be}):ge?(0,ae.jsx)(A.B,{}):(null==me||null===(e=me.assetChangeOperations)||void 0===e?void 0:e.length)||(null==me||null===(t=me.preAuthorizeOperations)||void 0===t?void 0:t.length)?(0,ae.jsx)(M.e,{resetLoadTimer:we,txScannerLoadStartTime:he,parsedOperations:me,userWalletAddress:re.primaryAddress,analyticsData:Ve,isRevokeOperation:Qt,networkChainId:String(zt)}):(0,ae.jsx)(I.C,{analyticsData:Ve,txScannerNotices:be}):n?(0,ae.jsx)(P.Box,{spacingTop:2,children:(0,ae.jsx)(z.y,{dappLogoURL:o.dappLogoURL,dappLogoURLAlt:o.dappLogoURLAlt,dappURL:o.dappURL,networkBadgeURL:Rt,networkBadgeAlt:Et,approveOperation:pe,request:De.method,blockchain:ue,chainId:String(zt)})}):(0,ae.jsx)(te.c,{dappLogoURL:o.dappLogoURL,dappLogoURLAlt:o.dappLogoURLAlt,dappURL:o.dappURL,networkBadgeURL:Rt,networkBadgeAlt:Et})}),[pe,o,_e,Rt,Et,ye,ge,me,be,Ve,we,he,re.primaryAddress,Qt,De.method,ue,zt]);return(0,r.useEffect)((function(){var e={gasLimit:jt,analyticsId:Ft,chainId:Wt,feeCurrencyCode:Pt};mt?(0,_.Op)(se(se({},e),{},{minFeeInUSD:Bt,maxFeeInUSD:qt,minFeeInCrypto:Ut,maxFeeInCrypto:_t})):(0,_.pY)(se(se({},e),{},{networkFeeInUSD:Ot,networkFeeInCrypto:Nt}))}),[Bt,qt,Ut,_t,jt,Ft,Wt,Ot,Nt,Pt,mt]),Ce?(0,ae.jsx)(L.n,se(se({spacing:2,elevation:1},$.ng),{},{children:(0,ae.jsx)(O.N,{handleBack:et,errorMessage:Ce})})):pt?ft:He&&null!=Ze&&Ze.fraudWarningConfirmationText?(0,ae.jsx)(L.n,se(se({spacing:2,elevation:1},$.ng),{},{children:(0,ae.jsx)(V.Z,{handlePrimaryButtonPress:Mt,isLoading:gt,warningContent:Ze.fraudWarningConfirmationText,handleCancelButtonPress:Lt,handleBackButton:Ct,analyticsData:Ve})})):re?(0,ae.jsx)(N.O,{isTxScannerEnabled:ve,shouldRenderTxPreviewHeader:Zt,dappInfo:Vt,headerText:Ee(Te.title),topSection:Yt,detailRowItems:wt,disableBackBtn:!0,error:vt,buttonProps:It,signingAddressToDisplay:re.primaryAddress,height:R.IR,isRevokeOperation:Qt}):(0,ae.jsx)(ae.Fragment,{})}me(be,"useState{[blindSigningError, setBlindSigningError]}\nuseSetIsHardwareWalletSigning{setIsHardwareWalletSigning}\nuseFields{{ toAddress, unsignedTransaction, initialGasLimit }}\nuseStepper{{ goToStep }}\nuseIntl{{ formatMessage }}\nuseHandleNextQueuedRequest{handleNextQueuedRequest}\nuseHasNextQueuedRequest{hasNextQueuedRequest}\nuseCancel{cancel}\nuseContext{{ disableConfirmButton }}\nuseToggler{[\n    showFraudConfirmation,\n    { toggleOn: setShowFraudConfirmationToTrue, toggleOff: setShowFraudConfirmationToFalse },\n  ]}\nuseIsTxPreviewEnabled{isTxPreviewEnabled}\nuseSignTransactionEventData{analyticsData}\nuseEffect{}\nuseTransactionRequestStepViewed{}\nuseTxScannerContent{txScannerContent}\nuseAnalyticsFeeData{analyticsFeeData}\nuseTriggerWeb3FraudWarningConfirmationClicked{triggerWeb3FraudWarningConfirmationClicked}\nuseCallback{navigationToFraudWarningConfirmationScreenPressed}\nuseCallback{cancelTransaction}\nuseTriggerWeb3SignTransactionError{triggerWeb3SignTransactionError}\nuseCallback{signError}\nuseCallback{signLedgerError}\nuseCallback{retryLedgerTransaction}\nuseTriggerWeb3RequestSendingSuccessResponse{triggerWeb3RequestSendingSuccessResponse}\nuseCallback{signSuccess}\nuseHandleUnlockForSigning{handleUnlock}\nuseAccountById{{ hasLocallyStoredKey, isLedgerAccount }}\nuseSignAndSubmitStandalone{{ signAndSubmitStandalone, isSignAndSubmitStandaloneLoading }}\nuseSignAndSubmitLedger{{ signAndSubmitLedger, isHardwareWalletSigning, hardwareWalletScreen }}\nuseOnMount{}\nuseMemo{is1559Enabled}\nuseIsAdjustableMinerFeeEnabled{isAdjustableMinerFeeEnabled}\nuseCallback{openAdjustableGasPreset}\nuseMemo{AdjustGasPresetAction}\nuseTransactionRequestDetails{detailRows}\nuseTransactionDetailsErrors{transactionDetailsErrors}\nuseTriggerFraudWarningConfirmationBackButtonClicked{triggerFraudWarningConfirmationBackButtonClicked}\nuseCallback{handleFraudConfirmationBackButtonClicked}\nuseTriggerWeb3CancelTransactionClicked{triggerWeb3CancelTransactionClicked}\nuseTriggerWeb3ConfirmTransactionClicked{triggerWeb3ConfirmTransactionClicked}\nuseCallback{handleCancelButtonPress}\nuseCallback{handlePrimaryButtonPress}\nuseMemo{buttonOptions: ButtonProps[]}\nuseMemo{dappInfo}\nuseMemo{shouldRenderTxPreviewHeader}\nuseIsRevokeOperation{isRevokeOperation}\nuseMemo{topSection}\nuseEffect{}",(function(){return[w.Kg,j.Z,D.useStepper,s.Z,X.useHandleNextQueuedRequest,J.B,K.k,F.useToggler,k.useIsTxPreviewEnabled,S.B,u.useTransactionRequestStepViewed,T.e,x.i,u.useTriggerWeb3FraudWarningConfirmationClicked,u.useTriggerWeb3SignTransactionError,u.useTriggerWeb3RequestSendingSuccessResponse,B.q,h.useAccountById,m.useSignAndSubmitStandalone,U.T,g.useOnMount,q.A,ne.q,C.o,u.useTriggerFraudWarningConfirmationBackButtonClicked,u.useTriggerWeb3CancelTransactionClicked,u.useTriggerWeb3ConfirmTransactionClicked,f.m]})),(fe="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(fe.register(Te,"messages","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/TransactionRequestStep/TransactionRequestStep.tsx"),fe.register(be,"TransactionRequestStep","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/TransactionRequestStep/TransactionRequestStep.tsx")),(ge="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&ge(e)},502743:(e,t,n)=>{"use strict";n.d(t,{c:()=>b});var a,r=n(202784),o=n(239398),s=n(783112),i=n(142289),l=n(586421),u=n(48972),c=n(76470),d=n(661641),p=n(552322);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,s,i=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=o.call(n)).done)&&(i.push(a.value),i.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},T=(0,o.defineMessages)({requestFrom:{id:"YSmlWG",defaultMessage:[{type:0,value:"Request from"}]},requestWarning:{id:"7F2/Ht",defaultMessage:[{type:0,value:"Make sure you trust this dapp"}]}});function b(e){var t=e.dappLogoURL,n=e.dappLogoURLAlt,a=e.dappURL,o=e.networkBadgeURL,g=e.networkBadgeAlt,m=(0,s.Z)().formatMessage,b=new URL(a),y=f((0,r.useState)(t),2),h=y[0],C=y[1],S=(0,r.useCallback)((function(){C(n)}),[n]);return(0,p.jsx)(u.VStack,{width:"100%",gap:.5,spacingTop:2,children:(0,p.jsx)(i.Card,{bordered:!0,borderRadius:"standard",elevation:1,spacing:2,width:"100%",height:"160px",children:(0,p.jsxs)(u.VStack,{justifyContent:"center",gap:.5,height:"100%",children:[(0,p.jsxs)("div",{className:w,children:[(0,p.jsx)("img",{className:x,src:h,alt:n,onError:S}),o&&(0,p.jsx)("img",{className:v,src:o,alt:g})]}),(0,p.jsxs)(u.HStack,{alignItems:"center",children:[(0,p.jsx)(d.TextLabel2,{color:"foregroundMuted",as:"p",children:m(T.requestFrom)}),(0,p.jsx)(c.Tooltip,{content:m(T.requestWarning),placement:"bottom",children:(0,p.jsx)(l.Icon,{testID:"dapp-transaction-request-more-info-icon",name:"info",size:"xs",color:"foregroundMuted",spacingStart:1})})]}),(0,p.jsx)(d.TextTitle3,{as:"p",overflow:"break",testID:"dapp-transaction-request-dapp-host-name",children:b.hostname})]})})})}m(b,"useIntl{{\n    formatMessage\n  }}\nuseState{[sourceUrl, setSourceUrl](dappLogoURL)}\nuseCallback{setAlternativeDappLogoURL}",(function(){return[s.Z]}));var y,h,w="lnr9chz",v="njuihv5",x="duoahwy";n(991029),(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(y.register(T,"messages","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/TransactionRequestStep/TransactionRequestTopSection.tsx"),y.register(b,"TransactionRequestTopSection","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/TransactionRequestStep/TransactionRequestTopSection.tsx"),y.register(w,"logoContainer","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/TransactionRequestStep/TransactionRequestTopSection.tsx"),y.register(v,"networkBadge","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/TransactionRequestStep/TransactionRequestTopSection.tsx"),y.register(x,"dappLogo","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/TransactionRequestStep/TransactionRequestTopSection.tsx")),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&h(e)},321640:(e,t,n)=>{"use strict";n.d(t,{q:()=>k});var a,r=n(202784),o=n(239398),s=n(783112),i=n(446101),l=n(327242),u=n(101620),c=n(301940),d=n(845548),p=n(92870),f=n(281886),g=n(518615),m=n(178012),T=n(160417),b=n.n(T);function y(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var w,v,x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},C=(0,o.defineMessages)({walletUsedLabel:{id:"o99uP8",defaultMessage:[{type:0,value:"Wallet used"}]},costLabel:{id:"WSwaWw",defaultMessage:[{type:0,value:"Cost"}]},networkFeeLabel:{id:"1TgfUs",defaultMessage:[{type:0,value:"Network fee"}]},networkNameLabel:{id:"MWZ9F7",defaultMessage:[{type:0,value:"Network"}]},unknownNetworkLabel:{id:"aihB8f",defaultMessage:[{type:0,value:"Unknown network ["},{type:1,value:"network"},{type:0,value:"]"}]},unknownChainIdLabel:{id:"ZXyz0F",defaultMessage:[{type:0,value:"Unknown chain id "},{type:1,value:"chainId"}]},transactionSpeedLabel:{id:"sSDDvu",defaultMessage:[{type:0,value:"Transaction speed"}]},totalCostLabel:{id:"j9RrnG",defaultMessage:[{type:0,value:"Total cost"}]},nftNameLabel:{id:"7vjoql",defaultMessage:[{type:0,value:"Item"}]},nftName:{id:"+fdnKn",defaultMessage:[{type:1,value:"nftName"}]},collectionNameLabel:{id:"oM6lPv",defaultMessage:[{type:0,value:"Collection"}]},collectionName:{id:"T2MxtE",defaultMessage:[{type:1,value:"collectionName"}]},spendLimitLabel:{id:"ntOJgI",defaultMessage:[{type:0,value:"Spend Limit"}]},fullBalance:{id:"BlUPJH",defaultMessage:[{type:0,value:"Full balance"}]},spendLimitTooltipText:{id:"wAda+E",defaultMessage:[{type:0,value:"The maximum amount the smart contract will be able to withdraw."}]},spendLimitTooltipDetailText:{id:"qPi7hI",defaultMessage:[{type:0,value:"This dapp will be allowed to automatically withdraw "},{type:1,value:"amount"},{type:0,value:" from your wallet"}]},fullBalanceTooltipDetailText:{id:"L3mGDN",defaultMessage:[{type:0,value:"This dapp can withdraw all your "},{type:1,value:"currencyCode"}]}}),S=0n;function k(e,t,n,a,o,T){var h,w=(0,s.Z)().formatMessage,v=(0,u.useCurrencyFormatter)(),x=n,k=n,L=S,M=S,I=(0,f.useIsTxPreviewEnabled)(),A=(0,p.N)({wallet:e,isTxPreviewEnabled:I,isTxScannerLoading:t,parsedOperations:a}),R=(0,i.chainIdFromNetworkRawValue)(e.network.rawValue),E=(0,c.useNetworkFeeTooltipMessages)(R).networkFeeTooltip,D=(0,r.useMemo)((function(){var e=null==a?void 0:a.preAuthorizeOperations[0];return!e||I?[]:[e.operationType===g.OperationType.ITEM_APPROVAL?{label:w(C.nftNameLabel),detailText:w(C.nftName,{nftName:(0,m.abridgeName)(e.NFTName||"",15)})}:null,e.operationType===g.OperationType.ITEM_APPROVAL_ALL?{label:w(C.collectionNameLabel),detailText:w(C.collectionName,{collectionName:(0,m.abridgeName)(e.collectionName||"",15)})}:null]}),[null==a?void 0:a.preAuthorizeOperations,w,I]),j=(0,r.useMemo)((function(){return(0,i.isNetwork1559Enabled)(e.network)}),[e.network]);n&&x.lowerBoundFee?L=x.lowerBoundFee<x.upperBoundFee?x.lowerBoundFee:x.upperBoundFee:n&&(M=n.estimatedFee);var F=(0,r.useMemo)((function(){var t,n="";return x?null!==(t=n=j?v.formatToFiatFeeRange(x.feeCurrencyCode,x.feeCurrencyDecimal,x.upperBoundFee,!1,x.lowerBoundFee,x.network):v.formatToFiat(k.feeCurrencyCode,k.feeCurrencyDecimal,M,!1,void 0,e.network))&&void 0!==t?t:"":n}),[M,x,v,j,k,e.network]),W=(0,r.useMemo)((function(){var t,a="";return x&&n&&!A?null!==(t=a=j?v.formatToFiatTotalRange({feeCurrencyCode:x.feeCurrencyCode,currencyCode:x.currencyCode,contractAddress:e.contractAddress,network:e.network,fee:x.upperBoundFee,lowerBoundFee:x.lowerBoundFee,amount:n.transferValue,isConfirmed:!1,decimals:e.decimals,includeFee:!0,feeDecimals:x.feeCurrencyDecimal}):v.formatToFiatTotalRange({feeCurrencyCode:k.feeCurrencyCode,currencyCode:k.currencyCode,contractAddress:e.contractAddress,network:e.network,fee:k.estimatedFee,lowerBoundFee:void 0,amount:n.transferValue,isConfirmed:!1,decimals:e.decimals,includeFee:!0,feeDecimals:k.feeCurrencyDecimal}))&&void 0!==t?t:"":a}),[x,v,j,k,n,e,A]),P=(0,r.useMemo)((function(){if(!n||A)return"";var t=v.fiatValue(n.currencyCode,e.decimals,BigInt(n.transferValue),e.contractAddress,e.network,2),a=v.formatToCrypto({currencyCode:n.currencyCode,decimals:e.decimals,value:BigInt(n.transferValue),includeCode:!0,maxDisplayDecimals:5n});return t?"$".concat(t," - ").concat(a):"".concat(a)}),[v,n,e.contractAddress,e.decimals,e.network,A]),G=(0,r.useMemo)((function(){if(!R)return w(C.unknownNetworkLabel,{network:e.network.rawValue});var t=l.EthereumNetworkMap.fromChainId(BigInt(R));return t?t.displayName:w(C.unknownChainIdLabel,{chainId:R.toString()})}),[w,e.network.rawValue,R]),O=(0,r.useMemo)((function(){if(!n)return"";var t=v.fiatValue(n.feeCurrencyCode,e.decimals,BigInt(M),e.contractAddress,e.network,2);if(t)return"$".concat(t);var a=v.formatToCrypto({currencyCode:n.feeCurrencyCode,decimals:e.decimals,value:BigInt(M),includeCode:!0,maxDisplayDecimals:5n});return"".concat(a)}),[n,v,e.decimals,e.contractAddress,e.network,M]),N=(0,r.useMemo)((function(){if(!n)return"";var t=n.transferValue+M,a=v.formatToFiat(n.feeCurrencyCode,e.decimals,BigInt(t),!1,e.contractAddress,e.network);if(a)return"".concat(a);var r=v.formatToCrypto({currencyCode:n.feeCurrencyCode,decimals:e.decimals,value:BigInt(t),includeCode:!0});return"".concat(r)}),[n,M,v,e.decimals,e.contractAddress,e.network]),H=(0,d._)({isTxScannerLoading:t,isTxPreviewEnabled:I,parsedOperations:a,blockExplorerUrl:null==n||null===(h=n.network.asChain())||void 0===h?void 0:h.blockExplorerUrl,recipientAddress:null==n?void 0:n.recipientAddress});return(0,r.useMemo)((function(){return b()([null!=o&&o.label?o:null].concat(y(D),[H,null!=n&&n.transferValue&&n.transferValue>0n&&P?{label:w(C.costLabel),detailText:P}:null,L?{label:w(C.networkFeeLabel),detailText:F,tooltipText:w(E),actionIcon:T}:{label:w(C.networkFeeLabel),detailText:O,tooltipText:w(E)},void 0!==L&&null!=n&&n.transferValue&&n.transferValue>0n&&W?{label:w(C.totalCostLabel),detailText:W}:null,void 0===L&&null!=n&&n.transferValue?{label:w(C.totalCostLabel),detailText:N}:null,{label:w(C.networkNameLabel),detailText:null==G?void 0:G.toString()}]))}),[o,D,H,null==n?void 0:n.transferValue,w,P,L,F,T,O,W,N,G,E])}function L(){var e=(0,s.Z)().formatMessage;return b()([e(C.walletUsedLabel),e(C.networkFeeLabel),e(C.costLabel),e(C.transactionSpeedLabel),e(C.totalCostLabel)])}x(k,"useIntl{{ formatMessage }}\nuseCurrencyFormatter{formatter}\nuseIsTxPreviewEnabled{isTxPreviewEnabled}\nuseHideTotalCost{hideTotalCost}\nuseNetworkFeeTooltipMessages{{ networkFeeTooltip }}\nuseMemo{legacyApproveDetails}\nuseMemo{is1559Enabled}\nuseMemo{formattedNetworkFee}\nuseMemo{formattedTotalCost}\nuseMemo{formattedCost}\nuseMemo{formattedNetworkName}\nuseMemo{formattedEstimatedNetworkFee}\nuseMemo{formattedEstimatedTotalCost}\nuseAddressInfo{addressInfo}\nuseMemo{}",(function(){return[s.Z,u.useCurrencyFormatter,f.useIsTxPreviewEnabled,p.N,c.useNetworkFeeTooltipMessages,d._]})),x(L,"useIntl{{ formatMessage }}",(function(){return[s.Z]})),(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(w.register(C,"messages","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/TransactionRequestStep/useTransactionRequestDetails.tsx"),w.register(S,"zero","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/TransactionRequestStep/useTransactionRequestDetails.tsx"),w.register(k,"useTransactionRequestDetails","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/TransactionRequestStep/useTransactionRequestDetails.tsx"),w.register(L,"useTransactionDetailRowLabels","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/TransactionRequestStep/useTransactionRequestDetails.tsx")),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&v(e)},160831:(e,t,n)=>{"use strict";n.d(t,{y:()=>A});var a,r=n(202784),o=n(239398),s=n(783112),i=n(518615),l=n(628656),u=n(670327),c=n(586421),d=n(48972),p=n(950018),f=n(76470),g=n(661641),m=n(448978),T=n(552322);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==b(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===b(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,s,i=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=o.call(n)).done)&&(i.push(a.value),i.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var C="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},S="var(--foreground-muted)",k=(0,o.defineMessages)({tokenAccessTitle:{id:"fQ+lNc",defaultMessage:[{type:0,value:"Allow token access"}]},nftAccessTitle:{id:"b/bkj/",defaultMessage:[{type:0,value:"Allow NFT access"}]},dappAllowedText:{id:"CUNSOm",defaultMessage:[{type:1,value:"dappHostname"}]},warning:{id:"ZCZhYq",defaultMessage:[{type:0,value:"Only allow dapps that you fully trust with access to your wallet"}]},onlySignText:{id:"crcesR",defaultMessage:[{type:0,value:"Only sign if you fully trust this site with access to your account"}]}});function L(e){var t=e.dappLogoURL,n=e.dappLogoURLAlt,a=e.dappURL,o=e.networkBadgeURL,b=e.networkBadgeAlt,y=e.approveOperation,w=e.request,x=e.blockchain,C=e.chainId,L=(0,r.useMemo)((function(){return(0,l.getHostNameForDapp)(a)}),[a]);(0,m.useTriggerTxApprovalLoaded)({approveOperation:y,dappURL:L,request:w,blockchain:x});var M=(0,s.Z)().formatMessage,I=v((0,r.useState)(t),2),A=I[0],E=I[1],D=(0,r.useMemo)((function(){return null==y?void 0:y.imageUrl}),[y]),j=(0,r.useCallback)((function(e){return{imageUrl:e,contractAddress:"",youtubeUrl:void 0,iframeUrl:void 0,animationUrl:void 0,tokenType:"",collectionName:(!y||y.operationType!==i.OperationType.ITEM_APPROVAL&&y.operationType!==i.OperationType.ITEM_APPROVAL_ALL?"":y.collectionName)||"",tokenId:""}}),[y]),F=(0,r.useCallback)((function(){E(n)}),[n]),W=(0,r.useMemo)((function(){return"BALANCE_APPROVAL"===(null==y?void 0:y.operationType)?k.tokenAccessTitle:"ITEM_APPROVAL_ALL"===(null==y?void 0:y.operationType)||"ITEM_APPROVAL"===(null==y?void 0:y.operationType)?k.nftAccessTitle:null}),[null==y?void 0:y.operationType]);return(0,T.jsxs)(d.Box,{bordered:!0,borderRadius:"standard",flexDirection:"column",spacingHorizontal:2,width:"100%",testID:"tx-approval",children:[(0,T.jsxs)(d.HStack,{justifyContent:"flex-start",alignItems:"center",children:[(0,T.jsxs)(d.Box,{spacingTop:3,position:"relative",children:[(0,T.jsx)(p.RemoteImage,{source:A,resizeMode:"contain",width:32,height:32,shape:"squircle",alt:n,onError:F}),o?(0,T.jsx)("img",{className:R,src:o,alt:b}):null]}),D?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(d.Box,{spacingTop:3,spacingHorizontal:1,children:(0,T.jsx)(c.Icon,{size:"s",name:"arrowsHorizontal",dangerouslySetColor:S})}),(0,T.jsx)(d.Box,{spacingTop:3,children:(0,T.jsx)(u.Vp,h(h({},j(D)),{},{radius:"roundedFull",height:"32px",width:"32px",chainId:C}))})]}):null]}),(0,T.jsx)(d.Box,{spacingBottom:.5,spacingTop:3,children:(0,T.jsx)(d.VStack,{children:Boolean(W)&&(0,T.jsx)(g.TextTitle3,{as:"h1",children:M(W)})})}),(0,T.jsx)(d.Box,{spacingBottom:3,children:(0,T.jsxs)(d.HStack,{children:[(0,T.jsx)(g.TextLabel2,{as:"span",color:"foregroundMuted",overflow:"break",testID:"dapp-transaction-request-dapp-host-name",children:M(k.dappAllowedText,{dappHostname:L})}),(0,T.jsx)(f.Tooltip,{content:M(k.onlySignText),placement:"bottom",children:(0,T.jsx)(c.Icon,{testID:"dapp-transaction-request-more-info-icon",name:"info",size:"xs",color:"foregroundMuted",spacingStart:1,spacingTop:.5})})]})})]})}C(L,"useMemo{dappHostname: string}\nuseTriggerTxApprovalLoaded{}\nuseIntl{{\n    formatMessage\n  }}\nuseState{[sourceUrl, setSourceUrl](dappLogoURL)}\nuseMemo{imageUrl}\nuseCallback{collectionImageUrl}\nuseCallback{setAlternativeDappLogoURL}\nuseMemo{headerTitle}",(function(){return[m.useTriggerTxApprovalLoaded,s.Z]}));var M,I,A=(0,r.memo)(L),R="nb1wmky";n(150470),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(M.register(S,"ICON_COLOR","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/TxApproval/TxApproval.tsx"),M.register(k,"messages","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/TxApproval/TxApproval.tsx"),M.register(L,"TxApprovalComponent","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/TxApproval/TxApproval.tsx"),M.register(A,"TxApproval","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/TxApproval/TxApproval.tsx"),M.register(R,"networkBadge","/workspaces/apps/extension/src/screens/Web3/DappTransactionRequest/steps/TxApproval/TxApproval.tsx")),(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&I(e)},845548:(e,t,n)=>{"use strict";n.d(t,{_:()=>p});var a,r=n(202784),o=n(239398),s=n(783112),i=n(866799);e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var l,u,c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},d=(0,o.defineMessages)({toLabel:{id:"2Wn1Up",defaultMessage:[{type:0,value:"To"}]},addressLabel:{id:"Lk+qm8",defaultMessage:[{type:0,value:"Address"}]},dappTxWarningTooltipLabel:{id:"Ifolgy",defaultMessage:[{type:0,value:"Be careful"}]},dappTxWarningTooltipText:{id:"Vdrfzt",defaultMessage:[{type:0,value:"This dapp is requesting an action which can take money from your wallet. Make sure you trust this site."}]},spenderAddressLabel:{id:"aZoEWg",defaultMessage:[{type:0,value:"Address"}]}});function p(e){var t=e.isTxPreviewEnabled,n=e.parsedOperations,a=e.blockExplorerUrl,o=e.recipientAddress,l=e.toAddressItem,u=e.isTxScannerLoading,c=(0,s.Z)().formatMessage,p=(0,r.useCallback)((function(e){if(null!=l&&l.value)return{label:c(d.toLabel),detailText:a?{text:(0,i.getTruncatedAddress)(l.value),blockExplorerUrl:"".concat(a,"/address/").concat(l.address)}:(0,i.getTruncatedAddress)(l.value),testID:"send-confirmation-wallet-send-to-label"};if(t&&u)return{testID:"address",loadingLabelNode:!0,loadingDetailTextNode:!0,keyLabel:c(d.addressLabel)};if(null!=n&&n.hasAggregatedTransfers&&o)return{label:c(d.toLabel),detailText:a?{text:(0,i.getTruncatedAddress)(o),blockExplorerUrl:"".concat(a,"/address/").concat(o)}:(0,i.getTruncatedAddress)(o),testID:"send-confirmation-wallet-send-to-label"};var r=(0,i.getTruncatedAddress)(e);return{label:c(d.addressLabel),detailText:a?{text:r,blockExplorerUrl:"".concat(a,"/address/").concat(e)}:r,testID:"address"}}),[l,t,u,null==n?void 0:n.hasAggregatedTransfers,o,c,a]);return(0,r.useMemo)((function(){if(!t){var e,a=null==n?void 0:n.preAuthorizeOperations[0],r=null!==(e=null==a?void 0:a.spenderAddress)&&void 0!==e?e:o;return r?p(r):null}var s=o?p(o):null;return null!=n&&n.hasAggregatedTransfers?s:1===(null==n?void 0:n.assetChangeOperations.length)&&0===(null==n?void 0:n.preAuthorizeOperations.length)?p(n.assetChangeOperations[0].toAddress):null!=n&&n.assetChangeOperations&&n.assetChangeOperations.length>1&&0===(null==n?void 0:n.preAuthorizeOperations.length)||null!=n&&n.assetChangeOperations&&n.assetChangeOperations.length>=1&&(null==n?void 0:n.preAuthorizeOperations.length)>=1?s:0===(null==n?void 0:n.assetChangeOperations.length)&&1===(null==n?void 0:n.preAuthorizeOperations.length)||0===(null==n?void 0:n.assetChangeOperations.length)&&(null==n?void 0:n.preAuthorizeOperations.length)>1?p(n.preAuthorizeOperations[0].spenderAddress):s}),[t,o,p,n])}c(p,"useIntl{{ formatMessage }}\nuseCallback{addressLabel}\nuseMemo{}",(function(){return[s.Z]})),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(d,"messages","/workspaces/libs/data/stores/TxScanner/hooks/useAddressInfo.tsx"),l.register(p,"useAddressInfo","/workspaces/libs/data/stores/TxScanner/hooks/useAddressInfo.tsx")),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&u(e)},92870:(e,t,n)=>{"use strict";n.d(t,{N:()=>l});var a,r,o,s=n(202784),i=n(518615);function l(e){var t=e.wallet,n=e.isTxPreviewEnabled,a=void 0!==n&&n,r=e.isTxScannerLoading,o=void 0!==r&&r,l=e.parsedOperations,u=void 0===l?void 0:l;return(0,s.useMemo)((function(){return!!o||!(!a||null==u||!u.assetChangeOperations.some((function(e){var n;return e.operationType===i.OperationType.BALANCE_TRANSFER&&!e.contractAddress&&e.currencyCode.rawValue===(null===(n=t.network.asChain())||void 0===n?void 0:n.baseAssetCurrencyCode)})))}),[a,o,u,t])}e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(l,"useMemo{}"),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&r.register(l,"useHideTotalCost","/workspaces/libs/data/stores/TxScanner/hooks/useHideTotalCost.tsx"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)},491063:(e,t,n)=>{"use strict";n.d(t,{I:()=>S});var a,r=n(202784),o=n(239398),s=n(783112),i=n(871444),l=n(12059),u=n(446048),c=n(61517),d=n(853052),p=n(48972),f=n(598850),g=n(552322);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==m(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var h,w,v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},x=(0,o.defineMessages)({title:{id:"XB4/lj",defaultMessage:[{type:0,value:"Change speed"}]},fastPresetTitle:{id:"AHURpK",defaultMessage:[{type:0,value:"Fast"}]},normalPresetTitle:{id:"HJCEaL",defaultMessage:[{type:0,value:"Normal"}]},slowPresetTitle:{id:"G7UHQ3",defaultMessage:[{type:0,value:"Slow"}]},customCellTitle:{id:"rWNKmm",defaultMessage:[{type:0,value:"Custom"}]},fastPresetTime:{id:"l8uLpc",defaultMessage:[{type:0,value:"~15 sec"}]},normalPresetTime:{id:"HNQ7JV",defaultMessage:[{type:0,value:"~30 sec"}]},slowPresetTime:{id:"yQwV0U",defaultMessage:[{type:0,value:"45 sec+"}]},customCellDescription:{id:"P0FNv2",defaultMessage:[{type:0,value:"Manual Setting"}]}});function C(){return(0,g.jsxs)(p.VStack,{spacingHorizontal:1,children:[(0,g.jsx)(d.ListCellFallback,{title:!0,description:!0,detail:!0,subdetail:!0}),(0,g.jsx)(d.ListCellFallback,{title:!0,description:!0,detail:!0,subdetail:!0}),(0,g.jsx)(d.ListCellFallback,{title:!0,description:!0,detail:!0,subdetail:!0})]})}function S(e){var t=e.wallet,n=e.toAddress,a=e.unsignedTx,o=e.isEntireBalance,m=e.initialGasLimit,T=e.handleGenerateTx,y=e.goBack,h=e.goToCustom,w=e.onGasPresetChange,v=e.flowName,S=(0,s.Z)().formatMessage,k=(0,i.useMinerFeeEstimates)(m,t.network,a.l1GasFee);(0,f.GT)(v);var L=(0,r.useCallback)((function(e){if(!a)return null;var r={kind:o?"EntireBalance":"Amount",value:a.transferValue},s={selectedBaseFeePerGas:e.baseFeePerGas,selectedMaxFeePerGas:e.maxFeePerGas,selectedMaxPriorityFeePerGas:e.maxPriorityFeePerGas,selectedGasLimit:m};(0,l.generateUnsignedTransaction)({wallet:t,transactionAmount:r,recipientAddress:n,metadata:a.metadata,txConfiguration:b({txType:"1559",nonce:void 0,dataBuffer:a.data},s)}).then((function(e){T(e),null==w||w(s)}))}),[T,m,o,w,n,a,t]),M=(0,r.useCallback)((function(e,t){return function(){switch(t){case"fast":(0,f.E0)(v);break;case"normal":(0,f.Rw)(v);break;case"slow":(0,f.F7)(v)}return L(e)}}),[v,L]);return(0,g.jsxs)(p.VStack,{height:c.UV,children:[(0,g.jsx)(u.w,{onBack:y,title:S(x.title)}),k?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.ListCell,{title:S(x.fastPresetTitle),description:S(x.fastPresetTime),detail:k.fast.fiatRangeString,subdetail:k.fast.cryptoRangeString,onPress:M(k.fast,"fast"),testID:"adjust-gas-preset-fast-cell"}),(0,g.jsx)(d.ListCell,{title:S(x.normalPresetTitle),description:S(x.normalPresetTime),detail:k.normal.fiatRangeString,subdetail:k.normal.cryptoRangeString,onPress:M(k.normal,"normal"),testID:"adjust-gas-preset-normal-cell"}),(0,g.jsx)(d.ListCell,{title:S(x.slowPresetTitle),description:S(x.slowPresetTime),detail:k.slow.fiatRangeString,subdetail:k.slow.cryptoRangeString,onPress:M(k.slow,"slow"),testID:"adjust-gas-preset-slow-cell"})]}):(0,g.jsx)(C,{}),(0,g.jsx)(d.ListCell,{title:S(x.customCellTitle),subdetail:S(x.customCellDescription),onPress:h,testID:"adjust-gas-preset-custom-cell"})]})}v(S,"useIntl{{ formatMessage }}\nuseMinerFeeEstimates{minerFees}\nuseAdjustableGasPresetScreenViewed{}\nuseCallback{generateUnsigned1559Tx}\nuseCallback{handlePressPreset}",(function(){return[s.Z,i.useMinerFeeEstimates,f.GT]})),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(h.register(x,"messages","/workspaces/libs/wallet-cds-extension/components/SharedAdjustGasPresetStep/SharedAdjustGasPresetStep.tsx"),h.register(C,"Fallback","/workspaces/libs/wallet-cds-extension/components/SharedAdjustGasPresetStep/SharedAdjustGasPresetStep.tsx"),h.register(S,"SharedAdjustGasPresetStep","/workspaces/libs/wallet-cds-extension/components/SharedAdjustGasPresetStep/SharedAdjustGasPresetStep.tsx")),(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&w(e)},255058:(e,t,n)=>{"use strict";n.d(t,{m:()=>u});const a="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQwIiBoZWlnaHQ9IjEyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGQ9Ik0yIDg4aDIxMGMxNS41IDAgMjgtMTIuNSAyOC0yOHMtMTIuNS0yOC0yOC0yOEgyYy0xLjEgMC0yIC45LTIgMnY1MmMwIDEuMS45IDIgMiAyWiIgZmlsbD0iIzAwNTJGRiIvPjxwYXRoIGQ9Ik02NCAxMjBoMTEyVjBINjR2MTIwWiIgZmlsbD0idXJsKCNiKSIvPjxwYXRoIGQ9Ik0xNzYgMzJINjR2NTZoMTEyVjMyWiIgZmlsbD0iIzBBMEIwRCIvPjxwYXRoIGQ9Ik0yMTIgODBjMTEuMDQ2IDAgMjAtOC45NTQgMjAtMjBzLTguOTU0LTIwLTIwLTIwLTIwIDguOTU0LTIwIDIwIDguOTU0IDIwIDIwIDIwWiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0yMTIgNzJjNi42MjcgMCAxMi01LjM3MyAxMi0xMnMtNS4zNzMtMTItMTItMTItMTIgNS4zNzMtMTIgMTIgNS4zNzMgMTIgMTIgMTJaIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+PHBhdGggZD0ibTIxMi4wNjcgNTUuODI2LTQuMTcxIDQuMTcyIDQuMTcxIDQuMTcyIDQuMTcyLTQuMTcyLTQuMTcyLTQuMTcyWiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik01NiA3MkgyNE01NiA2My45SDI0TTU2IDU2SDI0TTU2IDQ4SDI0TTE2IDg4VjMyIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+PHBhdGggZD0iTTE2MCA4OEg4MGw0MC01NiA0MCA1NloiIGZpbGw9IiNGRkQyMDAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTExOC41IDczVjQ3aDN2MjZoLTNaTTExOC41IDgydi01aDN2NWgtM1oiIGZpbGw9IiMwQTBCMEQiLz48L2c+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iNzcuNSIgeTE9IjcyIiB4Mj0iMTY2LjUiIHkyPSIxMS41IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iI0VCQ0VGOCIvPjxzdG9wIG9mZnNldD0iLjkwNSIgc3RvcC1jb2xvcj0iI0E1MjRGQyIvPjwvbGluZWFyR3JhZGllbnQ+PGNsaXBQYXRoIGlkPSJhIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDI0MHYxMjBIMHoiLz48L2NsaXBQYXRoPjwvZGVmcz48L3N2Zz4=";var r,o=n(386744),s=n(552322);e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var i,l;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function u(e){var t=e.alt,n=e.scaleMultiplier,r=void 0===n?1:n,i=r*o.zB.width,l=r*o.zB.height;return(0,s.jsx)("img",{src:a,alt:t,"data-testid":"ledger-error-miami",width:i,height:l})}(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&i.register(u,"LedgerErrorMiami","/workspaces/libs/wallet-cds-web/components/MiamiIllustrationWrapper/MiamiIllustrations/LedgerErrorMiami.tsx"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},774600:(e,t,n)=>{var a=n(634311),r=n(823779),o=a((function(e,t,n){return e+(n?" ":"")+r(t)}));e.exports=o},991029:(e,t,n)=>{"use strict";n.r(t)},150470:(e,t,n)=>{"use strict";n.r(t)},437168:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletLinkExtensionConnectionResponse=void 0,function(e){e.web3RequestCanceled="web3RequestCanceled",e.parentDisconnected="parentDisconnect"}(t.WalletLinkExtensionConnectionResponse||(t.WalletLinkExtensionConnectionResponse={}))},441090:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionConnectionResponse=void 0,function(e){e.requestEthereumAccountsResponse="requestEthereumAccountsResponse",e.addEthereumChainDeny="addEthereumChainDeny",e.addEthereumChainApprove="addEthereumChainApprove",e.switchEthereumChainDeny="switchEthereumChainDeny",e.switchEthereumChainApprove="switchEthereumChainApprove",e.signEthereumMessageSuccess="signEthereumMessageSuccess",e.signEthereumTransactionSuccess="signEthereumTransactionSuccess",e.submitEthereumTransactionSuccess="submitEthereumTransactionSuccess",e.watchAssetApprove="watchAssetApprove",e.watchAssetDeny="watchAssetDeny",e.selectProviderApprove="selectProviderApprove",e.selectProviderDeny="selectProviderDeny",e.dappChainSwitched="dappChainSwitched"}(t.ExtensionConnectionResponse||(t.ExtensionConnectionResponse={}))},489040:(e,t,n)=>{"use strict";t.pY=t.Op=void 0;const a=n(160593),r=n(395545);t.Op=function(e){return(0,a.logEvent)("dapp_txn_confirmation_fee_viewed_1559",{action:r.ActionType.view,loggingId:"a36eaafb-d620-4e8e-961c-aca8f859331c",componentType:r.ComponentType.page,minFeeInUSD:e.minFeeInUSD??"",maxFeeInUSD:e.maxFeeInUSD??"",feeCurrencyCode:e.feeCurrencyCode,minFeeInCrypto:e.minFeeInCrypto,maxFeeInCrypto:e.maxFeeInCrypto??"",gasLimit:e.gasLimit,analyticsId:e.analyticsId??"",chainId:e.chainId??""})},t.pY=function(e){return(0,a.logEvent)("dapp_txn_confirmation_fee_viewed_legacy",{action:r.ActionType.view,loggingId:"978713d3-8cf7-4c39-b926-90e93f0a5e86",componentType:r.ComponentType.page,networkFeeInUSD:e.networkFeeInUSD??"",networkFeeInCrypto:e.networkFeeInUSD??"",feeCurrencyCode:e.feeCurrencyCode,gasLimit:e.gasLimit,analyticsId:e.analyticsId??"",chainId:e.chainId??""})}},720126:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OnboardingSteps=void 0;const a=n(735103),r=["loading","entry","username","backup","verify","password","success","import","importOrLink","link","scanQr","select-device","select-account","ledger-signing","ledger-connect-device","trezor-connect-device","ledger-success","hwTroubleConnecting","subdomain-cta","subdomain-education","subdomain-claim-success","subdomain-avatar","subdomain-basic-profile"],o=new URLSearchParams(window.location.search).get("step"),s=r.find((e=>e===o));t.OnboardingSteps=(0,a.createStepper)({steps:r,defaultStep:s??"loading"})},738244:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useOnboardingStepper=void 0;const a=n(735103),r=n(720126);t.useOnboardingStepper=function(){return(0,a.useStepper)(r.OnboardingSteps)}},123645:(e,t,n)=>{"use strict";t.cr=t.Sc=t.Ex=void 0;const a=n(735103),r=n(601879);t.Ex=(0,a.createStepper)({steps:["transactionRequest","adjustGasPreset","adjustGasCustom"],defaultStep:"transactionRequest"}),t.Sc={toAddress:"",unsignedTransaction:void 0,initialGasLimit:0n},t.cr=(0,r.createForm)({initialValues:t.Sc})},982586:(e,t,n)=>{"use strict";t._=void 0;const a=n(263678),r=n(108389),o=n(441090);t._=async function(e,t,n){n({request:e.request.params.shouldSubmit?o.ExtensionConnectionResponse.submitEthereumTransactionSuccess:o.ExtensionConnectionResponse.signEthereumTransactionSuccess,dappURL:e.dappURL}),e.request.params.shouldSubmit?await chrome.runtime.sendMessage({type:"extensionUIResponse",data:{id:e.eventId,action:o.ExtensionConnectionResponse.submitEthereumTransactionSuccess,txHash:(0,a.ensureHexString)(t.txHash,!0),blockchain:r.ETHEREUM_SYMBOL}}):await chrome.runtime.sendMessage({type:"extensionUIResponse",data:{id:e.eventId,action:o.ExtensionConnectionResponse.signEthereumTransactionSuccess,signedTxData:(0,a.hexStringFromBuffer)(t.signedTxData),blockchain:r.ETHEREUM_SYMBOL}})}},654851:(e,t,n)=>{"use strict";t.H=void 0;const a=n(53610),r=n(46668),o=n(448978);t.H=async function(e,t){(0,o.triggerWeb3RequestSendingSuccessResponse)({request:r.SolanaWeb3Response.signAllTransactionsSuccess,dappURL:e.dappURL,blockchain:a.SOLANA_SYMBOL});const n=t.map((e=>[...e.signedTxData]));await chrome.runtime.sendMessage({type:"extensionUIResponse",data:{id:e.eventId,action:r.SolanaWeb3Response.signAllTransactionsSuccess,signedTransactionData:n,blockchain:a.SOLANA_SYMBOL}})}},24864:(e,t,n)=>{"use strict";t._=void 0;const a=n(53610),r=n(46668);t._=async function(e,t,n){"solanaSendTransaction"===e.kind?(n({blockchain:a.SOLANA_SYMBOL,request:r.SolanaWeb3Response.sendTransactionSuccess,dappURL:e.dappURL}),await chrome.runtime.sendMessage({type:"extensionUIResponse",data:{id:e.eventId,action:r.SolanaWeb3Response.sendTransactionSuccess,txHash:t.txHash,blockchain:a.SOLANA_SYMBOL}})):(n({request:r.SolanaWeb3Response.signTransactionSuccess,dappURL:e.dappURL,blockchain:a.SOLANA_SYMBOL}),await chrome.runtime.sendMessage({type:"extensionUIResponse",data:{id:e.eventId,action:r.SolanaWeb3Response.signTransactionSuccess,signedTransactionData:[...t.signedTxData],blockchain:a.SOLANA_SYMBOL}}))}},180158:(e,t,n)=>{"use strict";t.k=void 0;const a=n(202784),r=n(60397),o=n(437168),s=n(448978);t.k=function(){return(0,a.useCallback)((async function({eventId:e,error:t,dappURL:n,blockchain:a,request:i}){return new Promise((l=>{(0,s.triggerWeb3RequestSendingCancelledResponse)({request:i,dappURL:n,errorMessage:t.message,errorName:t.name,blockchain:a}),chrome.runtime.sendMessage({type:"extensionUIResponse",data:{id:e,action:o.WalletLinkExtensionConnectionResponse.web3RequestCanceled,error:(0,r.serializeError)(t,i),blockchain:a}},(()=>l()))}))}),[])}},210449:(e,t,n)=>{"use strict";t.B=void 0;const a=n(202784),r=n(553476),o=n(757652);t.B=function(){const e=(0,r.useRecoilValue)(o.queuedRequestsAtom);return(0,a.useCallback)((()=>e.length>0),[e])}},211763:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSolanaWeb3Request=t.isEthereumWeb3Request=void 0;const a=n(608814);t.isEthereumWeb3Request=function(e){return["addEthereumChain","ethereumAddressFromSignedMessage","requestEthereumAccounts","signEthereumMessage","signEthereumTransaction","switchEthereumChain","watchAsset"].includes(e.method)},t.isSolanaWeb3Request=function(e){return[a.SolanaWeb3Method.signMessage,a.SolanaWeb3Method.sendTransaction,a.SolanaWeb3Method.signTransaction,a.SolanaWeb3Method.signAllTransactions].includes(e.method)}},586639:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateETHTransactionForDapp=void 0;const a=n(446101),r=n(171734),o=n(944804),s=n(886855),i=n(481737),l=n(410189),u=n(447018);t.generateETHTransactionForDapp=async function({request:{params:e},txSource:t,wallets:n}){const c=(0,o.getBaseAssetWallet)(e.fromAddress,BigInt(e.chainId),n);if(!c)throw new Error("No wallet found");const d=new Map([[a.TxMetadataKey_txSource,t],[a.TxMetadataKey_analyticsId,(0,l.v4)()],[i.TxMetadataKey_hasRecordedConfirmEvent,!1]]),p=s.Network.fromChainId({chainId:BigInt(e.chainId)}),f=(0,a.isNetwork1559Enabled)(p),g={dataBuffer:e.data?(0,u.bufferFromHex)(e.data):void 0,nonce:null!==e.nonce?BigInt(e.nonce):void 0},m={...g,txType:"1559",selectedGasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,selectedBaseFeePerGas:void 0,selectedMaxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,selectedMaxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0},T={...g,txType:"Legacy",selectedGasPrice:e.gasPriceInWei?BigInt(e.gasPriceInWei):void 0,selectedGasLimit:e.gasLimit?BigInt(e.gasLimit):void 0},b=await(0,r.generateUnsignedTransaction)({wallet:c,recipientAddress:e.toAddress,transactionAmount:{kind:"Amount",value:BigInt(e.weiValue)},metadata:d,txConfiguration:f?m:T});return"Failure"===b.kind?{wallet:c,feeWallet:c,unsignedTx:b.transaction,error:b.err}:{wallet:c,feeWallet:c,unsignedTx:b.transaction}}},944804:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBaseAssetWallet=void 0;const a=n(446101),r=n(327242),o=n(839668),s=n(524801),i=n(886855);t.getBaseAssetWallet=function(e,t,n){const l=r.EthereumNetworkMap.fromChainId(t);if(!l)throw new Error("Illegal chain id passed in $chainId");const u=(0,a.asNetwork)(l);return n.find((t=>o.Blockchain.isEqual(t.blockchain,a.EthereumWalletConfiguration.blockchain)&&s.CurrencyCode.isEqual(t.currencyCode,a.EthereumWalletConfiguration.currencyCodeForNetwork(u))&&i.Network.isEqual(t.network,u)&&t.isBaseAsset&&t.primaryAddress.toLowerCase()===e.toLowerCase()))}},330617:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateSOLTransactionForDapp=void 0;const a=n(446101),r=n(389934),o=n(56101),s=n(100492),i=n(481737),l=n(410189),u=n(608814),c=n(219242),d=n(171484);t.generateSOLTransactionForDapp=async function(e){const t=e.request.method,n=e.request.params.transactions,p=t===u.SolanaWeb3Method.sendTransaction?e.request.params.options:void 0,f=t===u.SolanaWeb3Method.signAllTransactions,g=[];for(const e of n){const t=(0,c.getRequiredSigners)(e);g.push(...t)}const m=await(0,s.getWallet)(g,e.wallets);if(!m)throw r.SolanaError.unableToFindWallet;const T=(0,o.getBaseAssetWallet)(m.primaryAddress,m.network,e.wallets);if(!T)throw r.SolanaError.unableToFindWallet;try{const e=await Promise.all(n.map((async e=>{if(!e.feePayer)throw r.SolanaError.noFeePayerFound;const t=new Map([[a.TxMetadataKey_txSource,"extensionStandalone"],[a.TxMetadataKey_analyticsId,(0,l.v4)()],[i.TxMetadataKey_hasRecordedConfirmEvent,!1]]),n=await(0,d.generateUnsignedTransaction)({wallet:m,recipientAddress:"",transactionAmount:{kind:"Amount",value:0n},metadata:t,nativeDappTransaction:e,shouldSavePendingTransaction:!1,submissionParams:p});if("Success"!==n.kind)throw r.SolanaError.unableToGenerateUnsignedTransaction;return n.transaction})));return{wallet:m,feeWallet:T,unsignedTx:e.length?e[0]:void 0,unsignedTransactions:f?e:void 0,error:void 0}}catch(e){return{wallet:m,feeWallet:T,unsignedTx:void 0,unsignedTransactions:void 0,error:r.SolanaError.unableToGenerateUnsignedTransaction}}}},56101:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBaseAssetWallet=void 0;const a=n(529225),r=n(839668),o=n(524801),s=n(886855);t.getBaseAssetWallet=function(e,t,n){return n.find((n=>r.Blockchain.isEqual(n.blockchain,a.SolanaWalletConfiguration.blockchain)&&o.CurrencyCode.isEqual(n.currencyCode,a.SolanaWalletConfiguration.currencyCodeForNetwork(t))&&s.Network.isEqual(n.network,t)&&n.isBaseAsset&&n.primaryAddress.toLowerCase()===e.toLowerCase()))}},100492:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWallet=void 0,t.getWallet=async function(e,t){const n=e.map((e=>e.toLowerCase()));return t.find((e=>n?.includes(e.primaryAddress.toLowerCase())))}},654971:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useSignMultipleTransactionsStandalone=void 0;const r=n(202784),o=n(143817),s=n(662333),i=n(251728),l=n(518413),u=a(n(334291));t.useSignMultipleTransactionsStandalone=function({wallet:e,unsignedTxs:t,signSuccess:n,signError:a,handleUnlock:c,unlockSuccess:d,unlockError:p,source:f="extension",txSubmissionType:g="original",skipSubmit:m=!0}){const[T,b]=(0,r.useState)(!1),y=(0,i.useSaveTransactions)(),h=(0,r.useCallback)((function(t){return async n=>{t&&y([t.asTransaction(n.txHash,n.nonce,e,t.metadata,g)])}}),[y,g,e]),w=(0,r.useCallback)((function(e){return 0n===e.transferValue?u.default:h(e)}),[h]),v=(0,r.useCallback)((async function(){try{if(!t||t.length<1)return null;const a=[];for(const n of t){const t=await(0,l.signAndSubmitTransaction)({unsignedTx:n,wallet:e,txSubmissionType:"original",skipSubmit:m,onSubmit:w(n),source:f});m||await(0,o.getTransaction)({signature:t.txHash,mainAccountAddress:t.fromAddress,performRetry:!0,commitment:s.SolanaCommitmentLevel.CONFIRMED,walletIndex:e.selectedIndex??0n,accountId:e.accountId}),a.push(t)}n(a)}catch(e){a(e)}finally{b(!1)}}),[t,n,e,m,w,f,a]),x=(0,r.useCallback)((function(){return b(!0),c({unlockSuccess:function(){d?.(),v()},unlockError:function(e){e&&p?.(e),b(!1)}})}),[c,v,p,d]);return(0,r.useMemo)((()=>({signMultipleTransactionsStandalone:x,isSignMultipleTransactionsStandaloneLoading:T})),[T,x])}},389960:(e,t,n)=>{"use strict";t.e=void 0;const a=n(202784),r=n(239398),o=n(101620),s=n(698431),i=n(838436),l=n(281886),u=n(518615),c=n(363218),d=n(178012),p=(0,r.defineMessages)({withdrawLimit:{id:"bD+pZd",defaultMessage:"Withdraw Limit"},fullBalance:{id:"5jtsyf",defaultMessage:"All of your {currencyCode}"},multipleAssets:{id:"H47jTv",defaultMessage:"Multiple assets"},entireNFTCollection:{id:"M2Xmbf",defaultMessage:"Entire Collection"},singleNFTItem:{id:"n9Caq6",defaultMessage:"1 item"},spendLimitTooltipText:{id:"wAda+E",defaultMessage:"The maximum amount the smart contract will be able to withdraw."},accessLimitTooltipText:{id:"9IKrsx",defaultMessage:"The number of NFTs the dapp will be able to withdraw."},spendLimitTooltipDetailText:{id:"s1gURw",defaultMessage:"This dapp can withdraw up to {amount} from your wallet"},fullBalanceTooltipDetailText:{id:"nQclOx",defaultMessage:"This dapp can withdraw all your {currencyCode}. Make sure you trust this site."},fullBalanceToEOATooltipDetailText:{id:"YV3p15",defaultMessage:"This dapp will be allowed to withdraw all your {currencyCode} to someone else's address, which is a common sign of fraud. Are you sure you trust this site?"},nftCollectionTooltipDetailText:{id:"9Hd/6J",defaultMessage:"This dapp can withdraw all your {collectionName} NFTs. Make sure you trust this site."},nftCollectionEoaTooltipDetailText:{id:"30QftR",defaultMessage:"This dapp will be allowed to withdraw all your {collectionName} NFTs to someone else's address, which is a common sign of fraud. Are you sure you trust this site?"},multipleAssetsTooltipDetailText:{id:"oFmFdx",defaultMessage:"This dapp can withdraw the entire balance of multiple assets. Make sure you trust it."},tooltipDetailTitle:{id:"l2xtPz",defaultMessage:"Be careful"},singleNFTEoaWarningText:{id:"2y+DlX",defaultMessage:"This dapp will be allowed to withdraw your {nftName} NFT to someone else's address, which is a common sign of fraud. Are you sure you trust this site?"},fixedAmountWithdrawalToEOAWarningText:{id:"mM3ktw",defaultMessage:"This dapp will be allowed to withdraw {amount} to someone else's address, which is a common sign of fraud. Are you sure you trust this site?"},multipleERC20TokenUnlimitedWithdraw:{id:"wcG7pM",defaultMessage:"This dapp can withdraw all your {token} and {lastToken}. Make sure you trust this site"},multipleERC20TokenToEOAUnlimitedWithdraw:{id:"OPiMx8",defaultMessage:"This dapp will be allowed to withdraw all your {token} and {lastToken} to someone else's address, which is a common sign of fraud. Are you sure you trust this site?"},multipleERC721TokenUnlimitedWithdraw:{id:"0AjOW7",defaultMessage:"This dapp can withdraw all your {NFT} and {lastNFT}. Make sure you trust this site"},multipleERC721TokenToEOAUnlimitedWithdraw:{id:"8nbxll",defaultMessage:"This dapp will be allowed to withdraw all your {NFT} and {lastNFT} to someone else's address, which is a common sign of fraud. Are you sure you trust this site?"},multipleERC20TokenLimitedWithdraw:{id:"0Yr/xX",defaultMessage:"This dapp can withdraw {token} and {lastToken}. Make sure you trust this site"},multipleERC20TokenToEOALimitedWithdraw:{id:"Wr5c/Y",defaultMessage:"This dapp will be allowed to withdraw {token} and {lastToken} to someone else's address, which is a common sign of fraud. Are you sure you trust this site?"},multipleERC721TokenLimitedWithdraw:{id:"eJSpL0",defaultMessage:"This dapp can withdraw {NFT} and {lastNFT}. Make sure you trust this site"},multipleERC721TokenToEOALimitedWithdraw:{id:"vyAA56",defaultMessage:"This dapp will be allowed to withdraw {NFT} and {lastNFT} to someone else's address, which is a common sign of fraud. Are you sure you trust this site?"},maliciousNoticeTypeLabelText:{id:"nZYijI",defaultMessage:"Fraudulent address detected"},maliciousNoticeTypeDetailText:{id:"utrXrP",defaultMessage:"Warning"},maliciousNoticeTypeWarningText:{id:"Lt4i3U",defaultMessage:"This transaction may be trying to steal your funds. Are you sure you want to continue?"}});t.e=function(e,t){const n=(0,l.useIsTxPreviewEnabled)(),f=(0,o.useCurrencyFormatter)(),{formatMessage:g}=(0,r.useIntl)(),m=(0,s.useIsFeatureEnabled)("eoa_approval_fraud_warning"),T=(0,s.useIsFeatureEnabled)("dapp_tx_confirmation_scam_warning"),b=(0,i.useIsMaliciousTxScannerAddress)({txScannerNotices:t}),y=(0,a.useCallback)((function(e){if(e.currencyCode&&e.decimals)return f.formatToCrypto({value:e.amountValue,currencyCode:e.currencyCode,decimals:BigInt(e.decimals),includeCode:!0,maxDisplayDecimals:6n,shouldDisplayDustAmount:!1})}),[f]),h=(0,a.useCallback)((function(e){const t=e.amountValue,a=e.currentBalanceValue;if(!a&&0n!==a||t&&a>0n&&t>=a&&t>0n){let t,n;return e.isSpenderAddressEoa&&m?(t=g(p.fullBalanceToEOATooltipDetailText,{currencyCode:e.currencyCode.code}),n=t):t=g(p.fullBalanceTooltipDetailText,{currencyCode:e.currencyCode.code}),{testID:"fullBalanceWarning",label:g(p.withdrawLimit),detailText:g(p.fullBalance,{currencyCode:e.currencyCode.code}),tooltipText:g(p.spendLimitTooltipText),outlineDetailText:t,fraudWarningConfirmationText:n,withWarning:!0,detailTextColor:"negative",isFullBalance:!0,currencyCode:e.currencyCode.code}}const r=y(e);if(r){let t;e.isSpenderAddressEoa&&m&&(t=g(p.fixedAmountWithdrawalToEOAWarningText,{amount:r}));return{testID:"dappWithdrawAmountWithCode",fraudWarningConfirmationText:t,...n?null:{label:g(p.withdrawLimit),detailText:r,tooltipText:g(p.spendLimitTooltipText),tooltipDetailTitle:g(p.tooltipDetailTitle),tooltipDetailText:g(p.spendLimitTooltipDetailText,{amount:r}),currencyCode:e.currencyCode.code},isFullBalance:!1,dappWithdrawAmountWithCode:r,currencyCode:e.currencyCode.code}}}),[y,g,n,m]),w=(0,a.useCallback)((function(e){if("ITEM_APPROVAL_ALL"===e.operationType&&e.isRevoke)return;if("ITEM_APPROVAL"===e.operationType&&e.spenderAddress===c.BLACK_HOLE_ADDRESS)return;if(e.operationType===u.OperationType.ITEM_APPROVAL_ALL){let t,n;return e.isOperatorAddressEoa&&m?(t=g(p.nftCollectionEoaTooltipDetailText,{collectionName:e.collectionName?(0,d.abridgeName)(e.collectionName,15):null}),n=t):t=g(p.nftCollectionTooltipDetailText,{collectionName:e.collectionName?(0,d.abridgeName)(e.collectionName,15):null}),{testID:"nftCollection",label:g(p.withdrawLimit),detailText:g(p.entireNFTCollection),tooltipText:g(p.accessLimitTooltipText),tooltipDetailTitle:g(p.tooltipDetailTitle),outlineDetailText:t,fraudWarningConfirmationText:n,withWarning:!0,detailTextColor:"negative",isItemApprovalAll:!0}}const t=n?null:{label:g(p.withdrawLimit),detailText:g(p.singleNFTItem),tooltipText:g(p.accessLimitTooltipText),tooltipDetailTitle:g(p.tooltipDetailTitle)};let a;return e.isApprovedAddressEoa&&m&&(a=g(p.singleNFTEoaWarningText,{nftName:e.NFTName?(0,d.abridgeName)(e.NFTName,15):null})),{testID:"nftItem",...t,fraudWarningConfirmationText:a,isItemApprovalAll:!1}}),[g,n,m]);return(0,a.useMemo)((()=>{if(b&&T)return{label:g(p.maliciousNoticeTypeLabelText),detailText:g(p.maliciousNoticeTypeDetailText),outlineDetailText:g(p.maliciousNoticeTypeWarningText),withWarning:!0,detailTextColor:"negative",fraudWarningConfirmationText:g(p.maliciousNoticeTypeWarningText)};if(e&&e.length<1)return null;const t=e?.some((e=>e.isSpenderAddressEoa||e.isApprovedAddressEoa||e.isOperatorAddressEoa)),n=[],a=[],r=[],o=[];let s;const i=(e,n,a,r,o,i)=>{const l=e.slice(0,-1),u=e.slice(-1);let c,d;t&&m?(c=g(a,{[r]:l.join(", "),[o]:u.join("")}),d=c):d=g(n,{[r]:l.join(", "),[o]:u.join("")}),s={...s,outlineDetailText:i?d:void 0,fraudWarningConfirmationText:c}};if(e?.forEach((e=>{e.operationType===u.OperationType.BALANCE_APPROVAL&&(s=h(e),!0===s?.isFullBalance?n.push(s.currencyCode):!1===s?.isFullBalance&&a.push(s.dappWithdrawAmountWithCode)),e.operationType===u.OperationType.ITEM_APPROVAL_ALL?(s=w(e),r.push(e.collectionName)):e.operationType===u.OperationType.ITEM_APPROVAL&&(s=w(e),o.push(e.NFTName))})),0===a.length&&0===n.length&&(r.length>1?i(r,p.multipleERC721TokenUnlimitedWithdraw,p.multipleERC721TokenToEOAUnlimitedWithdraw,"NFT","lastNFT",!0):o.length>1&&i(o,p.multipleERC721TokenLimitedWithdraw,p.multipleERC721TokenToEOALimitedWithdraw,"NFT","lastNFT")),0===o.length&&0===r.length&&(n.length>1?(i(n,p.multipleERC20TokenUnlimitedWithdraw,p.multipleERC20TokenToEOAUnlimitedWithdraw,"token","lastToken",!0),s={...s,detailText:g(p.multipleAssets)}):a.length>1&&i(a,p.multipleERC20TokenLimitedWithdraw,p.multipleERC20TokenToEOALimitedWithdraw,"token","lastToken")),(o.length>0||r.length>0)&&(a.length>0||n.length>0)){let e;t&&m&&(e=g(p.multipleAssetsTooltipDetailText)),s={...s,label:g(p.withdrawLimit),detailText:g(p.multipleAssets),outlineDetailText:g(p.multipleAssetsTooltipDetailText),fraudWarningConfirmationText:e}}return s}),[e,g,h,w,m,T,b])}},705890:(e,t,n)=>{"use strict";t.i=void 0;const a=n(202784),r=n(446101),o=n(223933),s=n(529225),i=n(101620),l=n(839668),u=n(886855);t.i=function(e,t){const n=(0,i.useCurrencyFormatter)(),{chainId:c}=(0,u.chainComponentsFromNetworkRawValue)(t.network.rawValue),d=e?.metadata.get(r.TxMetadataKey_analyticsId);return(0,a.useMemo)((()=>{if(!e)return{};if(l.Blockchain.isEqual(e.blockchain,r.EthereumBlockchain)){if((0,o.isETH1559Tx)(e)){const a=e,{currencyCode:r,lowerBoundFee:o,upperBoundFee:s,gasLimit:i}=a,{minFeeInUSD:l,maxFeeInUSD:u}=n.formatToFiatFeeMinMax({fromCurrencyCode:r,decimals:t.decimals,upperBoundValue:s,isAbbreviated:!1,lowerBoundValue:o,network:t.network}),{minFeeInCrypto:p,maxFeeInCrypto:f}=n.formatToCryptoMinMax({decimals:t.decimals,lowerBoundValue:o,upperBoundValue:s});return{minFeeInUSD:l,maxFeeInUSD:u,feeCurrencyCode:r.code,upperBoundFee:s.toString(),lowerBoundFee:o.toString(),minFeeInCrypto:p,maxFeeInCrypto:f,gasLimit:i.toString(),chainId:c?.toString(),analyticsId:d,nonce:a.nonce?.toString()}}const a=e,{feeCurrencyCode:r,feeCurrencyDecimal:s,estimatedFee:i,gasLimit:l}=a;return{feeCurrencyCode:r.code,estimatedFee:i.toString(),networkFeeInUSD:n.formatToFiat(r,s,i,!1,void 0,t.network,!1),networkFeeInCrypto:n.formatToCrypto({currencyCode:r,decimals:s,value:i,network:t.network,includeCode:!1}),gasLimit:l?.toString(),chainId:c?.toString(),analyticsId:d,nonce:a.nonce?.toString()}}if(l.Blockchain.isEqual(e.blockchain,s.SolanaBlockchain)){return{feeCurrencyCode:e.feeCurrencyCode.code,networkFeeInCrypto:n.formatToCrypto({currencyCode:e.feeCurrencyCode,decimals:e.feeCurrencyDecimal,value:e.estimatedFee,network:t.network,includeCode:!1}),estimatedFee:e.estimatedFee.toString(),networkFeeInUSD:n.formatToFiat(e.feeCurrencyCode,e.feeCurrencyDecimal,e.estimatedFee,!1,void 0,t.network,!1),extraFeeInCrypto:n.formatToCrypto({currencyCode:e.feeCurrencyCode,decimals:e.feeCurrencyDecimal,value:e.extraFee,network:t.network,includeCode:!1,convertFromFiat:!1}),extraFeeInUSD:n.formatToFiat(e.feeCurrencyCode,e.feeCurrencyDecimal,e.extraFee,!1,void 0,t.network,!1),chainId:c?.toString(),analyticsId:d}}return{}}),[e,n,t,c,d])}},254453:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useSolTransactionDetailErrors=void 0;const r=n(202784),o=n(239398),s=n(101620),i=n(210522),l=n(373881),u=a(n(952180)),c=(0,o.defineMessages)({getMoreCurrencyError:{id:"0EGgTz",defaultMessage:"{totalCostCrypto} ({totalCostFiat}) may be required for the transaction. Please deposit more {currencyCode}."},solanaNetworkCongestionWarning:{id:"VzJ+/i",defaultMessage:"Solana network is experiencing congestion. Transactions may fail to send or confirm"},errorCancel:{id:"8gdsKY",defaultMessage:"Cancel"},errorConfirm:{id:"c7nwmM",defaultMessage:"Confirm"},sendKilledError:{id:"R6qUvO",defaultMessage:"This feature is currently unavailable. Try again later."},learnMore:{id:"9DtuSP",defaultMessage:"Learn more"}});t.useSolTransactionDetailErrors=function({wallet:e,unsignedTxs:t,error:n,feeWallet:a}){const{formatMessage:d}=(0,o.useIntl)(),p=(0,s.useCurrencyFormatter)(),f=(0,i.useKillSwitchByBlockchain)("kill_dapp_tx"),g=t[0],m=g.feePayerAddress&&g.feePayerAddress===e.primaryAddress,T=(0,r.useMemo)((()=>t.reduce(((e,t)=>e+t.estimatedFee+(t.extraFee??0n)),0n)),[t]),b=(0,r.useMemo)((()=>t.reduce(((e,t)=>e+t.transferValue),0n)),[t]),y=(0,r.useMemo)((()=>{if(g)return p.formatToCrypto({currencyCode:g.feeCurrencyCode,decimals:g.feeCurrencyDecimal,value:BigInt(T),includeCode:!0,maxDisplayDecimals:6n})}),[p,T,g]),h=(0,r.useMemo)((()=>{if(!g)return;const t=p.fiatValue(g.feeCurrencyCode,g.feeCurrencyDecimal,BigInt(T),void 0,e.network);return t?.lessThan(new u.default(.01))&&t?.greaterThan(new u.default(0))?`<${p.fiatValueString(new u.default(.01),!0)}`:p.formatToFiat(g.feeCurrencyCode,g.feeCurrencyDecimal,BigInt(T),!1,void 0,e.network)}),[p,T,g,e.network]),w=(0,r.useMemo)((()=>{const t=e?.blockchain.rawValue,n=a?.blockchain.rawValue;return f(t)||f(n)}),[a,f,e]),v=(0,r.useMemo)((()=>({getMoreCurrencyError:{type:"getMoreCurrencyError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:d(c.getMoreCurrencyError,{totalCostCrypto:y,totalCostFiat:h,currencyCode:e.network?.asChain()?.baseAssetCurrencyCode??e.blockchain.rawValue})},sendKilledError:{type:"sendKilledError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:d(c.sendKilledError)},genericError:{type:"genericError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:`${n?.message}`},solanaNetworkCongestionWarning:{type:"solanaNetworkCongestionWarning",isDismissible:!0,showErrorIcon:!1,isDisabled:!1,message:d(c.solanaNetworkCongestionWarning)}})),[n?.message,d,y,h,e.blockchain.rawValue,e.network]);return(0,r.useMemo)((()=>{if(!t||!a)return;if(w)return v.sendKilledError;if(n)return v.genericError;const r=l.Wallet.isEqual(e,a)?T+b:T;return m&&(void 0===a.balance||a.balance<r)?v.getMoreCurrencyError:void 0}),[t,a,w,v.sendKilledError,v.genericError,v.getMoreCurrencyError,n,T,b,e,m])}},580082:(e,t,n)=>{"use strict";t.l=void 0;const a=n(586639),r=n(330617),o=n(211763);t.l=async function({request:e,txSource:t,wallets:n}){const s={wallet:void 0,unsignedTx:void 0,unsignedTransactions:void 0};if((0,o.isSolanaWeb3Request)(e)){const t=await(0,r.generateSOLTransactionForDapp)({request:e,wallets:n});return{...s,...t}}const i=await(0,a.generateETHTransactionForDapp)({request:e,wallets:n,txSource:t??"dappBrowser"});return{...s,...i}}},838436:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useIsMaliciousTxScannerAddress=void 0;const a=n(202784);t.useIsMaliciousTxScannerAddress=function({txScannerNotices:e}){return(0,a.useMemo)((()=>void 0!==e?.find((({noticeType:e})=>"NOTICE_TYPE_5"===e))),[e])}},46668:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SolanaWeb3Response=void 0,function(e){e.connectionSuccess="solanaConnectionSuccess",e.connectionDeny="solanaConnectionDeny",e.signMessageSuccess="signSolanaMessageSuccess",e.signMessageDeny="signSolanaMessageDeny",e.sendTransactionSuccess="sendSolanaTransactionSuccess",e.sendTransactionDeny="sendSolanaTransactionDeny",e.signTransactionSuccess="signSolanaTransactionSuccess",e.signTransactionDeny="signaSolanaTransactionDeny",e.signAllTransactionsSuccess="signAllSolanaTransactionsSuccess",e.signAllTransactionsDeny="signAllSolanaTransactionsDeny",e.parentDisconnected="parentDisconnected",e.featureFlagOff="featureFlagOff",e.web3RequestCanceled="web3RequestCanceled"}(t.SolanaWeb3Response||(t.SolanaWeb3Response={}))},598850:(e,t,n)=>{"use strict";t.GT=t.F7=t.Rw=t.E0=void 0;const a=n(160593),r=n(395545);t.E0=function(e){(0,a.logEvent)("adjustable_gas.fast_preset_clicked",{loggingId:"3bf99d9e-1f67-403d-bf24-1480933042ac",action:r.ActionType.click,componentType:r.ComponentType.button,flowName:e})},t.Rw=function(e){(0,a.logEvent)("adjustable_gas.normal_preset_clicked",{loggingId:"7600c715-d126-484b-bd1a-dc49800c3ef2",action:r.ActionType.click,componentType:r.ComponentType.button,flowName:e})},t.F7=function(e){(0,a.logEvent)("adjustable_gas.slow_preset_clicked",{loggingId:"bf78c628-4890-4487-bc29-6ee272e8f3b9",action:r.ActionType.click,componentType:r.ComponentType.button,flowName:e})},t.GT=function(e){(0,a.useLogEventOnMount)("adjustable_gas.preset_screen_viewed",{loggingId:"01bf5ae7-413f-4732-a676-a497cd03debc",action:r.ActionType.view,componentType:r.ComponentType.page,flowName:e})}}}]);
//# sourceMappingURL=2248.js.map