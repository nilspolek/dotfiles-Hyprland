"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[5762],{611021:(e,t,r)=>{r.d(t,{V:()=>y});var n=r(48972),o=r(11968),s=r(252844),a=r(552322);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}e=r.hmd(e);var c,u=["hideStepperIndicator","removeStepperIndicator","customStepper","fillStepper","hideBack","hideStepper","onClose"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&c(e);var b,g;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function y(e){var t=e.hideStepperIndicator,r=void 0!==t&&t,i=e.removeStepperIndicator,c=void 0!==i&&i,d=e.customStepper,l=void 0===d?null:d,b=e.fillStepper,g=e.hideBack,y=e.hideStepper,h=e.onClose,m=f(e,u);return(0,a.jsxs)(n.VStack,{height:"100%",children:[!c&&(0,a.jsx)(n.Box,{height:s.jA,children:!r&&(l||(0,a.jsx)(o.V,{fillStepper:b,hideStepper:y,hideBack:g,onClose:h}))}),(0,a.jsx)(n.Box,p({height:s.d9.height,width:s.d9.width},m))]})}(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&b.register(y,"StepWrapper","/workspaces/apps/extension/src/components/StepWrapper.tsx"),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&g(e)},11968:(e,t,r)=>{r.d(t,{V:()=>T});var n,o=r(202784),s=r(239398),a=r(783112),i=r(80724),c=r(196535),u=r(218787),d=r(46290),p=r(661590),l=r(369859),f=r(657370),b=r.n(f),g=r(69159),y=r(960723),h=r(48972),m=r(252844),v=r(616232),O=r(738244),S=r(352495),w=r(552322);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===k(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var C="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},P=(0,s.defineMessages)({backButtonAriaLabel:{id:"OugVd0",defaultMessage:[{type:0,value:"Go back"}]},closeButtonAriaLabel:{id:"QqYeaB",defaultMessage:[{type:0,value:"Close"}]}});function T(e){var t=e.fillStepper,r=e.hideBack,n=e.hideStepper,s=e.onClose,i=(0,l.useClearAuthTokensAndUnsetUser)(),f=(0,c.NL)(),g=(0,O.useOnboardingStepper)(),k=g.goBack,x=g.currentStep,j=g.goToStep,C=(0,v.useOnboardingContext)(),T=C.launchedForOnboarding,L=C.onboardingMode,M=C.secret,E=(0,a.Z)().formatMessage,I=(0,o.useMemo)((function(){switch(L){case"importLedger":return d.AccountType.LEDGER;case"importRecoveryPhrase":return M?(0,p.gy)(M):void 0;case"createNewWallet":return d.AccountType.MNEMONIC;case"linkWallet":return d.AccountType.WALLET_LINK;default:return}}),[L,M]);(0,u.useOnboardingStepViewed)({currentStep:b()(x),launchedForOnboarding:T,accountType:I});var B=(0,o.useMemo)((function(){return{width:m.i7.width,height:m.i7.height}}),[]),H=(0,o.useCallback)((function(){(0,u.triggerOnboardingBackClick)(x),"importOrLink"===x?j("entry"):"password"===x?(i(),f.clear(),f.getQueryCache().clear(),setTimeout((function(){return k()}),0)):k()}),[i,x,k,j,f]),U=(0,o.useMemo)((function(){var e=[];if(L)for(var t=S.A_[L],r=-1,n=0;n<=t.numOfSteps;n++){var o=t.steps[n]===x;o&&(r=n);var s=n<r||-1===r;e.push((0,w.jsx)(_,A({isActive:o||s},B),n))}return e}),[L,x,B]);return(0,w.jsxs)(h.VStack,{width:"100%",spacingBottom:m.i7.spacingBottom,position:"relative",testID:"onboarding-stepper-indicator",children:[Boolean(!r)&&(0,w.jsx)(h.Box,{position:"absolute",left:-10,top:-10,children:(0,w.jsx)(y.IconButton,{name:s?"close":"backArrow",onPress:null!=s?s:H,transparent:!0,testID:s?"close-button":"back-button",accessibilityLabel:E(s?P.closeButtonAriaLabel:P.backButtonAriaLabel)})}),(0,w.jsx)(h.HStack,{justifyContent:"center",width:"100%",spacingTop:1,children:!n&&(0,w.jsx)(h.HStack,{justifyContent:"center",width:"100%",children:t?(0,w.jsx)(G,{"data-testid":"success-step"}):(0,w.jsx)(h.HStack,{children:U})})})]})}C(T,"useClearAuthTokensAndUnsetUser{clearAuthTokensAndUnsetUser}\nuseQueryClient{queryClient}\nuseOnboardingStepper{{\n    goBack,\n    currentStep,\n    goToStep\n  }}\nuseOnboardingContext{{\n    launchedForOnboarding,\n    onboardingMode,\n    secret\n  }}\nuseIntl{{\n    formatMessage\n  }}\nuseMemo{accountType: AccountTypeEventPropertyValue | undefined}\nuseOnboardingStepViewed{}\nuseMemo{stepStyles}\nuseCallback{handleBackPress}\nuseMemo{createSteps}",(function(){return[l.useClearAuthTokensAndUnsetUser,c.NL,O.useOnboardingStepper,v.useOnboardingContext,a.Z,u.useOnboardingStepViewed]}));var L,M,E=function(){return function(e){var t=e.width;return(0,g.E)(t)}},I=function(){return function(e){var t=e.height;return(0,g.E)(t)}},B=function(){return function(e){return e.isActive?"100%":"10%"}},_=(0,i.z)("div")({name:"Step",class:"s1tid64w",propsAsIs:!1,vars:{"s1tid64w-0":[E(),"px"],"s1tid64w-1":[I(),"px"],"s1tid64w-2":[function(e){return e.isActive?"100%":"10%"}]}}),G=(0,i.z)("div")({name:"SuccessStep",class:"s1l0e2ct",propsAsIs:!1});r(656045),(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(L.register(P,"messages","/workspaces/apps/extension/src/screens/Onboarding/shared/StepperIndicator.tsx"),L.register(T,"StepperIndicator","/workspaces/apps/extension/src/screens/Onboarding/shared/StepperIndicator.tsx"),L.register(E,"_exp","/workspaces/apps/extension/src/screens/Onboarding/shared/StepperIndicator.tsx"),L.register(I,"_exp2","/workspaces/apps/extension/src/screens/Onboarding/shared/StepperIndicator.tsx"),L.register(B,"_exp3","/workspaces/apps/extension/src/screens/Onboarding/shared/StepperIndicator.tsx"),L.register(_,"Step","/workspaces/apps/extension/src/screens/Onboarding/shared/StepperIndicator.tsx"),L.register(G,"SuccessStep","/workspaces/apps/extension/src/screens/Onboarding/shared/StepperIndicator.tsx")),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&M(e)},656045:(e,t,r)=>{r.r(t)},838945:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OnboardingContext=t.defaultContext=t.defaultContextUpdate=void 0;const n=r(202784),o={errorMessage:void 0,statusCode:void 0,errorId:void 0};t.defaultContextUpdate={secret:"",password:"",subdomain:"",ethereumAddress:"",isImported:!1,onboardingMode:"importRecoveryPhrase",hasErrorStep:!1,launchedForOnboarding:!0,hwWalletMetadata:o,isCoinbaseBackground:!1,areSubdomainsEnabled:!1,hasCompletedSubdomainOnboarding:!1},t.defaultContext={secret:"",password:"",subdomain:"",ethereumAddress:"",isImported:!1,onboardingMode:"importRecoveryPhrase",launchedForOnboarding:!0,areSubdomainsEnabled:!1,hasCompletedSubdomainOnboarding:!1,hasErrorStep:!1,hwWalletMetadata:o,isCoinbaseBackground:!1,update:(e,t)=>{},updateHistory:(e,t)=>{}},t.OnboardingContext=(0,n.createContext)(t.defaultContext)},720126:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OnboardingSteps=void 0;const n=r(735103),o=["loading","entry","username","backup","verify","password","success","import","importOrLink","link","scanQr","select-device","select-account","ledger-signing","ledger-connect-device","trezor-connect-device","ledger-success","hwTroubleConnecting","subdomain-cta","subdomain-education","subdomain-claim-success","subdomain-avatar","subdomain-basic-profile"],s=new URLSearchParams(window.location.search).get("step"),a=o.find((e=>e===s));t.OnboardingSteps=(0,n.createStepper)({steps:o,defaultStep:a??"loading"})},616232:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useOnboardingContext=void 0;const n=r(202784),o=r(838945);t.useOnboardingContext=function(){return(0,n.useContext)(o.OnboardingContext)}},738244:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useOnboardingStepper=void 0;const n=r(735103),o=r(720126);t.useOnboardingStepper=function(){return(0,n.useStepper)(o.OnboardingSteps)}},352495:(e,t,r)=>{t.A_=t.AV=void 0;const n=r(239398);t.AV=!1,t.A_={importLedger:{numOfSteps:3,steps:t.AV?["importOrLink","select-device","ledger-connect-device","select-account","username"]:["importOrLink","ledger-connect-device","select-account","username"]},importTrezor:{numOfSteps:3,steps:["importOrLink","select-device","trezor-connect-device","username"]},importRecoveryPhrase:{numOfSteps:3,steps:["importOrLink","import","username","password"]},createNewWallet:{numOfSteps:3,steps:["username","backup","verify","password"]},linkWallet:{numOfSteps:2,steps:["importOrLink","link","scanQr"]}},(0,n.defineMessages)({createUserPageTitle:{id:"RRMydL",defaultMessage:"Save your username"},createUserPageDescription:{id:"0fcJA6",defaultMessage:"Sign the message on your Ledger to save your username."}})},661590:(e,t,r)=>{t.gy=t.ze=t.NT=t.B0=void 0;const n=r(46290);t.B0=new Error("Recovery phrase error: Check the number of words entered for your wallet."),t.NT=new Error("Private key error: An ethereum private key must be a 64-character long hexadecimal string."),t.ze=new Error("Input error: This is not a valid recovery phrase or private key."),t.gy=function(e,r){switch(r){case n.AccountType.PRIVATE_KEY:{const r=c(e);if(!r)throw t.NT;return r}case n.AccountType.MNEMONIC:{const r=i(e);if(!r)throw t.B0;return r}default:return i(e)||c(e)||function(e){if(e.trim().length>0)throw t.ze;return}(e)}};const o=/^[a-zA-Z ]+$/,s=/^(0[xX])?[0-9a-fA-F]+$/,a=/^(0[xX])?[0-9a-fA-F]{64}$/;function i(e){if(function(e){return e.match(o)&&e.trim().match(/\s/)}(e)){if(function(e){return 12===e.trim().split(" ").length}(e))return n.AccountType.MNEMONIC;throw t.B0}}function c(e){if(function(e){return e.length>8&&s.test(e)}(e)){if(function(e){return(e.startsWith("0x")||e.startsWith("0X")?66===e.length:64===e.length)&&a.test(e)}(e))return n.AccountType.PRIVATE_KEY;throw t.NT}}},369859:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useClearAuthTokensAndUnsetUser=void 0;const n=r(202784),o=r(874406),s=r(754297);t.useClearAuthTokensAndUnsetUser=function(){const e=(0,o.useClearAuthTokens)();return(0,n.useCallback)((()=>{e(),s.observabilityClient.unsetUserId()}),[e])}},265165:(e,t,r)=>{t.S8=t.Ms=void 0;const n=r(202784),o=r(495019),s=r(46290);t.Ms=15,t.S8=function(){const e=(0,o.useAccountsByAccountType)(s.AccountType.LEDGER),r=(0,o.useAccountsByAccountType)(s.AccountType.PRIVATE_KEY);return(0,n.useCallback)((n=>({[s.AccountType.LEDGER]:e.length>=t.Ms,[s.AccountType.PRIVATE_KEY]:r.length>=t.Ms,[s.AccountType.TREZOR]:!0}[n])),[e.length,r.length])}},69159:(e,t)=>{t.E=void 0,t.E=function(e){return e||0===e?e.toString().replace(/[^#a-z0-9%()., _-]/gi,""):""}}}]);
//# sourceMappingURL=5762.js.map