"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[4590],{696611:(e,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isValidAddress=void 0;const t=o(539072);s.isValidAddress=function(e){return async(s,o)=>(await(0,t.getServices)())[e].isAddressValid({address:s,testnet:o.isTestnet})}},200756:(e,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.usePublicProfileByAddressOrDomain=void 0;const t=o(202784),r=o(86296),i=o(333501),n=o(223811);s.usePublicProfileByAddressOrDomain=function({address:e,domain:s,fetchType:o}){const l="byAddress"===o,d=(0,n.usePublicProfileByDomain)({domain:s||"",cancelQuery:l}),a=(0,i.usePublicProfileByAddress)({address:e||"",cancelQuery:!l}),u=l?a?.publicProfile:d,c=(0,t.useMemo)((()=>{if(!u){const o={address:e||"",domain:s||""};return void(0,r.cbReportError)({error:new Error("Public profile fetch returned nothing"),...o,context:"user_profiles",severity:"error",isHandled:!1})}let o;if(l){o="cbid"===u.primaryDomainType?u.subdomainProfile:u.ensDomainProfile}else o=s?.endsWith(".cb.id")?u.subdomainProfile:u.ensDomainProfile;return o}),[e,s,l,u]);return{publicProfile:u,publicDomainProfile:c}}},223811:(e,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.useInvalidatePublicProfileByDomainQuery=s.usePublicProfileByDomain=s.fetchPublicProfileByDomain=s.ENDPOINT=void 0;const t=o(202784),r=o(946813),i=o(602438),n=o(49982);async function l(e){const{result:o}=await(0,n.getJSON)(s.ENDPOINT,{userDomain:e});return o}s.ENDPOINT="getPublicProfileByDomain",s.fetchPublicProfileByDomain=l,s.usePublicProfileByDomain=function({domain:e,cancelQuery:o=!1}){const{data:t}=(0,i.useQuery)([s.ENDPOINT,e],(async()=>l(e)),{enabled:!o,suspense:!1,staleTime:3e4,notifyOnChangeProps:["data"]});return t},s.useInvalidatePublicProfileByDomainQuery=function(){const e=(0,r.useQueryClient)();return(0,t.useCallback)((function(o){e.invalidateQueries([s.ENDPOINT,o])}),[e])}},598664:(e,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getLensProfile=s.getIsFollowing=s.getAddressFollowers=s.getAddressFollowees=s.fetchAddressFollowInfoList=s.getUserProfileAssets=s.getUserProfileHistory=s.getTransactionalActivities=s.getFollowCounts=s.UserProfileHistoryStatus=s.UserProfileHistoryType=s.UnauthedPath=void 0;const t=o(49982),r=o(765917),i=o(825405);var n;async function l(e,s,o,r,n){const l={[o]:s,queryAddress:r,pageOptions:n},d=(0,i.getUnauthedUrl)(e);return(0,t.postJSON)(d,l,{isThirdParty:!0,authenticated:!1})}!function(e){e.GetUserProfileActivity="GetUserProfileActivity",e.GetUserProfileHistory="GetUserProfileHistory",e.GetUserProfileAssets="GetUserProfileAssets",e.GetFollowees="GetFollowees",e.GetFollowers="GetFollowers",e.GetFollowCounts="GetFollowCounts",e.IsFollowing="IsFollowing"}(n=s.UnauthedPath||(s.UnauthedPath={})),function(e){e.SendToken="USER_PROFILE_HISTORY_TYPE_ON_CHAIN_SEND_TOKEN",e.ReceiveToken="USER_PROFILE_HISTORY_TYPE_ON_CHAIN_RECEIVE_TOKEN",e.SendNFT="USER_PROFILE_HISTORY_TYPE_ON_CHAIN_SEND_NFT",e.ReceiveNFT="USER_PROFILE_HISTORY_TYPE_ON_CHAIN_RECEIVE_NFT",e.MintNFT="USER_PROFILE_HISTORY_TYPE_ON_CHAIN_MINT_NFT",e.Approve="USER_PROFILE_HISTORY_TYPE_ON_CHAIN_APPROVE",e.Swap="USER_PROFILE_HISTORY_TYPE_ON_CHAIN_SWAP",e.Unknown="USER_PROFILE_HISTORY_TYPE_UNKNOWN"}(s.UserProfileHistoryType||(s.UserProfileHistoryType={})),function(e){e.Failed="USER_PROFILE_HISTORY_STATUS_FAIL",e.Success="USER_PROFILE_HISTORY_STATUS_SUCCESS"}(s.UserProfileHistoryStatus||(s.UserProfileHistoryStatus={})),s.getFollowCounts=async function(e){const s={address:e},o=(0,i.getUnauthedUrl)(n.GetFollowCounts);return(0,t.postJSON)(o,s,{isThirdParty:!0,authenticated:!1})},s.getTransactionalActivities=async function(e){const s={address:e},o=(0,i.getUnauthedUrl)(n.GetUserProfileActivity);return(0,t.postJSON)(o,s,{isThirdParty:!0,authenticated:!1})},s.getUserProfileHistory=async function(e,s){const o={address:e,pageOptions:s},r=(0,i.getUnauthedUrl)(n.GetUserProfileHistory);return(0,t.postJSON)(r,o,{isThirdParty:!0,authenticated:!1})},s.getUserProfileAssets=async function(e){const s=(0,i.getUnauthedUrl)(n.GetUserProfileAssets);return(0,t.postJSON)(s,e,{isThirdParty:!0,authenticated:!1})},s.fetchAddressFollowInfoList=l,s.getAddressFollowees=async function(e,s,o){return l(n.GetFollowees,e,"follower_address",s,o)},s.getAddressFollowers=async function(e,s,o){return l(n.GetFollowers,e,"followee_address",s,o)},s.getIsFollowing=async function(e){const s=(0,i.getUnauthedUrl)(n.IsFollowing);return(0,t.postJSON)(s,e,{isThirdParty:!0,authenticated:!1})},s.getLensProfile=async function(e){const s=r.gql`
    query DefaultProfile($address: EthereumAddress!) {
      defaultProfile(request: { ethereumAddress: $address }) {
        id
        name
        handle
      }
    }
  `,o={address:e},t=await(0,r.request)(i.LENS_URL,s,o);return t?.defaultProfile}},562304:(e,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.useActiveProfile=void 0;const t=o(202784),r=o(594173);s.useActiveProfile=function(e){const{profile:s}=(0,r.useUserProfile)(e);return(0,t.useMemo)((()=>({address:s?.address,addresses:s?.address?{ETH:s.address}:void 0,profile:s,subdomain:s?.isSubdomain?s?.primaryDomainName:void 0})),[s])}},633374:(e,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.useGetFollowCounts=void 0;const t=o(602438),r=o(598664);s.useGetFollowCounts=function(e){const{data:s,refetch:o}=(0,t.useQuery)([r.UnauthedPath.GetFollowCounts,e],(async()=>(0,r.getFollowCounts)(e)),{enabled:!!e,notifyOnChangeProps:["data"]});return{followeeCount:s?.numFollowees?Number(s.numFollowees):0,followerCount:s?.numFollowers?Number(s.numFollowers):0,refetchFollowCount:o}}},18073:(e,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.useIsFollowing=void 0;const t=o(602438),r=o(598664);s.useIsFollowing=function({followeeAddress:e,followerAddress:s}){const{data:o,isInitialLoading:i,refetch:n}=(0,t.useQuery)([r.UnauthedPath.IsFollowing,e?.toLowerCase(),s?.toLowerCase()],(async()=>(0,r.getIsFollowing)({followeeAddress:e,followerAddress:s})),{enabled:!(!e||!s),staleTime:2e3,notifyOnChangeProps:["data"]});return{isFollowing:o?.isFollowing??!1,isLoading:i,refetchIsFollowing:n}}},524252:(e,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.useProfile=void 0;const t=o(202784),r=o(200756),i=o(615376);s.useProfile=function(e){const s=!!e&&e.includes("."),o=s?"byDomain":"byAddress",n=s?void 0:e,l=s?e:void 0,{publicDomainProfile:d,publicProfile:a}=(0,r.usePublicProfileByAddressOrDomain)({address:n,domain:l,fetchType:o}),[u,c]=(0,t.useState)();return(0,t.useEffect)((function(){let s=!1;return e&&!e.endsWith(".cb.id")&&async function(e){try{const o=await(0,i.resolveDestinationByAssetCode)(e,"ETH");!s&&o&&c(o)}catch{}}(e),()=>{s=!0}}),[e]),(0,t.useMemo)((()=>u?{address:u?.address,addresses:u?.address?{ETH:u.address}:void 0,profile:u?{avatar:u.avatarUrl}:void 0,subdomain:"ens"===u?.type?u.label:void 0}:{address:a?.address,addresses:d?.coinAddresses,profile:d,subdomain:d?.name}),[u,a?.address,d])}},564590:(e,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.useProfileDetails=void 0;const t=o(202784),r=o(562304),i=o(633374),n=o(18073),l=o(524252),d=o(866799),a=o(165158);s.useProfileDetails=function(e,s){const o=(0,a.useProfileAddress)(e),u=(0,r.useActiveProfile)(o),c=(0,l.useProfile)(s),f=(0,t.useMemo)((()=>!s||!c.address||c.address.toLowerCase()===u.address?.toLowerCase()),[s,u,c]),P=(0,t.useMemo)((()=>f?u:c),[f,c,u]),{followeeCount:y,followerCount:_}=(0,i.useGetFollowCounts)(c?.address),{isFollowing:w}=(0,n.useIsFollowing)({followeeAddress:c?.address,followerAddress:u.address}),O=(0,t.useMemo)((()=>c?.subdomain?c.subdomain.split(".")[0]:c?.address?(0,d.getTruncatedAddress)(c.address):void 0),[c]);return(0,t.useMemo)((()=>({title:O,isViewingOwnProfile:f,follower:u,followee:P,isFollowing:w,followeeCount:y,followerCount:_})),[O,f,u,P,w,y,_])}},615376:(e,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.resolveDestinationByAssetCode=s.safeResolveDestination=s.searchDestination=void 0;const t=o(828336),r=o(258928),i=o(49982),n="destination/resolve";async function l(e,s){const{result:o}=await(0,i.getJSON)(n,{query:e,assetCode:s.toString().toLowerCase()});return o.data}s.searchDestination=async function(e,s){const{result:o}=await(0,i.getJSON)("destination/search",{query:e,assetCode:s.blockchain.toString().toLowerCase()});return o.data},s.safeResolveDestination=async function(e,s){const o=await(0,t.isValidAddress)(s.blockchain,e,s.network),i=await async function(e,s){return l(e,s.blockchain.toString().toLowerCase())}(e,s);return o&&i?.address.toLowerCase()!==e.toLowerCase()?{type:"address",label:(0,r.abridgeAddress)(e),address:e}:i},s.resolveDestinationByAssetCode=l},828336:(e,s,o)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isValidAddress=s.isValidUTXOBasedAddressByBlockchain=s.isValidAccountBasedAddressByBlockchain=void 0;const t=o(108389),r=o(398673),i=o(53610),n=o(523031),l=o(484475),d=o(45378),a=o(696611),u=o(65341),c=o(494023);s.isValidAccountBasedAddressByBlockchain={[t.ETHEREUM_SYMBOL]:async function(e){return Promise.resolve((0,r.isValidAddress)(e))},[i.SOLANA_SYMBOL]:async function(e){return Promise.resolve((0,n.isValidAddress)(e))}},s.isValidUTXOBasedAddressByBlockchain={[d.BITCOIN_SYMBOL]:(0,a.isValidAddress)("BTC"),[u.DOGECOIN_SYMBOL]:(0,a.isValidAddress)("DOGE"),[c.LITECOIN_SYMBOL]:(0,a.isValidAddress)("LTC")},s.isValidAddress=async function(e,o,t){const r=(0,l.determineBlockchainInfo)(e.rawValue);switch(r.blockchainGroup){case"Account":return s.isValidAccountBasedAddressByBlockchain[r.blockchainSymbol]?.(o);case"UTXO":return s.isValidUTXOBasedAddressByBlockchain[r.blockchainSymbol]?.(o,t);default:return!1}}},258928:(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.abridgeAddress=void 0,s.abridgeAddress=function(e){const s=e.length;return s<20?e:`${e.substring(0,6)}...${e.substring(s-4,s)}`}}}]);
//# sourceMappingURL=4590.js.map