/*! For license information please see 1425.js.LICENSE.txt */
"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[1425],{835360:(t,e,r)=>{r.d(e,{Q:()=>C});var o,n=r(202784),a=r(239398),s=r(783112),i=r(91322),c=r(445740),u=r(271126),l=r(960723),d=r(392079),f=r(153907),h=r(130686),m=r(437463),p=r(552322);function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function y(){y=function(){return e};var t,e={},r=Object.prototype,o=r.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var a=e&&e.prototype instanceof v?e:v,s=Object.create(a.prototype),i=new M(o||[]);return n(s,"_invoke",{value:A(t,r,i)}),s}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",h="suspendedYield",m="executing",p="completed",w={};function v(){}function b(){}function k(){}var N={};u(N,s,(function(){return this}));var C=Object.getPrototypeOf,x=C&&C(C(H([])));x&&x!==r&&o.call(x,s)&&(N=x);var L=k.prototype=v.prototype=Object.create(N);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(n,a,s,i){var c=d(t[n],t,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==g(l)&&o.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,s,i)}),(function(t){r("throw",t,s,i)})):e.resolve(l).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,i)}))}i(c.arg)}var a;n(this,"_invoke",{value:function(t,o){function n(){return new e((function(e,n){r(t,o,e,n)}))}return a=a?a.then(n,n):n()}})}function A(e,r,o){var n=f;return function(a,s){if(n===m)throw new Error("Generator is already running");if(n===p){if("throw"===a)throw s;return{value:t,done:!0}}for(o.method=a,o.arg=s;;){var i=o.delegate;if(i){var c=I(i,o);if(c){if(c===w)continue;return c}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(n===f)throw n=p,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);n=m;var u=d(e,r,o);if("normal"===u.type){if(n=o.done?p:h,u.arg===w)continue;return{value:u.arg,done:o.done}}"throw"===u.type&&(n=p,o.method="throw",o.arg=u.arg)}}}function I(e,r){var o=r.method,n=e.iterator[o];if(n===t)return r.delegate=null,"throw"===o&&e.iterator.return&&(r.method="return",r.arg=t,I(e,r),"throw"===r.method)||"return"!==o&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+o+"' method")),w;var a=d(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,w;var s=a.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,w):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,w)}function G(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(G,this),this.reset(!0)}function H(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function r(){for(;++n<e.length;)if(o.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(g(e)+" is not iterable")}return b.prototype=k,n(L,"constructor",{value:k,configurable:!0}),n(k,"constructor",{value:b,configurable:!0}),b.displayName=u(k,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,u(t,c,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},S(E.prototype),u(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,o,n,a){void 0===a&&(a=Promise);var s=new E(l(t,r,o,n),a);return e.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(L),u(L,c,"Generator"),u(L,s,(function(){return this})),u(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var o in e)r.push(o);return r.reverse(),function t(){for(;r.length;){var o=r.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},e.values=H,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(o,n){return i.type="throw",i.arg=e,r.next=o,n&&(r.method="next",r.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var c=o.call(s,"catchLoc"),u=o.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=t,s.arg=e,a?(this.method="next",this.next=a.finallyLoc,w):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),w},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),w}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var o=r.completion;if("throw"===o.type){var n=o.arg;_(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,o){return this.delegate={iterator:H(e),resultName:r,nextLoc:o},"next"===this.method&&(this.arg=t),w}},e}function w(t,e,r,o,n,a,s){try{var i=t[a](s),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(o,n)}t=r.hmd(t),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(t);var v,b,k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(t){return t},N=(0,a.defineMessages)({addCustomNetworkButtonGroup:{id:"0ElHKg",defaultMessage:[{type:0,value:"Action buttons"}]},importCustomNetworksButton:{id:"ViFnDE",defaultMessage:[{type:0,value:"Import custom networks"}]}});function C(){var t=(0,s.Z)().formatMessage,e=(0,m._)(),r=(0,c.useSaveCustomNetwork)();(0,i.useAddCustomNetworkViewed)();var o=function(){var t,e=(t=y().mark((function t(e,o){var n,a,s;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.setStatus,a=o.setSubmitting,s=o.resetForm,(0,i.triggerAddCustomNetworkSubmit)(e),t.prev=2,t.next=5,r(e);case 5:return n(""),a(!1),s(),(0,i.triggerAddCustomNetworkSubmitSuccess)(e),t.next=11,d.serviceWorkerMemoryStore.set(f.CUSTOM_NETWORK_STORAGE_KEY,(0,u.stringify)(f.initialValues));case 11:window.close(),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(2),n(t.t0.message),a(!1),(0,i.triggerAddCustomNetworkSubmitError)({metadata:e,errorMessage:t.t0.message});case 19:case"end":return t.stop()}}),t,null,[[2,14]])})),function(){var e=this,r=arguments;return new Promise((function(o,n){var a=t.apply(e,r);function s(t){w(a,o,n,s,i,"next",t)}function i(t){w(a,o,n,s,i,"throw",t)}s(void 0)}))});return function(t,r){return e.apply(this,arguments)}}(),a=(0,n.useCallback)(o,[r]),g=(0,n.useCallback)((function(){e("importCustomNetworks")}),[e]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(h.K,{initialValues:f.initialValues,handleSubmit:a,persistData:!0}),(0,p.jsx)(l.ButtonGroup,{block:!0,accessibilityLabel:t(N.addCustomNetworkButtonGroup),children:(0,p.jsx)(l.Button,{type:"button",variant:"secondary",onPress:g,testID:"import-custom-networks-button",children:t(N.importCustomNetworksButton)})})]})}k(C,"useIntl{{ formatMessage }}\nusePopUpOnNewTab{popUpOnNewTab}\nuseSaveCustomNetwork{saveCustomNetwork}\nuseAddCustomNetworkViewed{}\nuseCallback{handleSubmit}\nuseCallback{popUpImportCustomNetworksOnNewTab}",(function(){return[s.Z,m._,c.useSaveCustomNetwork,i.useAddCustomNetworkViewed]})),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(v.register(N,"messages","/workspaces/apps/extension/src/screens/Settings/AddCustomNetwork.tsx"),v.register(C,"AddCustomNetwork","/workspaces/apps/extension/src/screens/Settings/AddCustomNetwork.tsx")),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&b(t)},461425:(t,e,r)=>{r.r(e),r.d(e,{AddCustomNetworkPage:()=>p});var o,n=r(239398),a=r(783112),s=r(352871),i=r(790424),c=r(48972),u=r(835360),l=r(552322);t=r.hmd(t),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(t);var d,f,h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(t){return t},m=(0,n.defineMessages)({title:{id:"GFIXMx",defaultMessage:[{type:0,value:"Add custom network"}]}});function p(){var t=(0,a.Z)().formatMessage;return(0,l.jsx)(i.lL,{header:(0,l.jsx)(s.l2,{variant:"secondary",title:t(m.title)}),children:(0,l.jsx)(c.VStack,{spacingHorizontal:2,children:(0,l.jsx)(u.Q,{})})})}h(p,"useIntl{{ formatMessage }}",(function(){return[a.Z]})),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(d.register(m,"messages","/workspaces/apps/extension/src/screens/Settings/pages/AddCustomNetworkPage/AddCustomNetworkPage.tsx"),d.register(p,"AddCustomNetworkPage","/workspaces/apps/extension/src/screens/Settings/pages/AddCustomNetworkPage/AddCustomNetworkPage.tsx")),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&f(t)},670352:(t,e,r)=>{r.r(e),r.d(e,{logCustomNetworkAddAlreadyExists:()=>i,logCustomNetworkAddUnreachable:()=>c,logCustomNetworkAdded:()=>u,logImportCustomNetworks:()=>l,logImportCustomNetworksError:()=>d});var o,n=r(160593);t=r.hmd(t),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(t);var a,s;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function i(t){(0,n.logDataEvent)("settings.custom_network.add_already_exists",{loggingId:"1b13f0b6-bf5e-4591-9371-c01799736ec3",chainName:t.chainName,chainId:t.chainId,baseAssetSymbol:t.baseAssetSymbol,from3085:t.from3085})}function c(t){(0,n.logDataEvent)("settings.custom_network.add_unreachable",{loggingId:"1552d288-6e41-416c-a8d4-5472f52fc4cf",chainName:t.chainName,chainId:t.chainId,baseAssetSymbol:t.baseAssetSymbol,from3085:t.from3085,rpcUrl:t.rpcUrl,errorName:t.errorName,errorMessage:t.errorMessage})}function u(t){(0,n.logDataEvent)("settings.custom_network.added",{loggingId:"812572b4-158d-41bb-b666-9e9190284a5e",chainName:t.chainName,chainId:t.chainId,baseAssetSymbol:t.baseAssetSymbol,from3085:t.from3085})}function l(){(0,n.logDataEvent)("settings.custom_network.import",{loggingId:"d63bc122-a90a-4f20-82eb-516e2caa5b58"})}function d(){(0,n.logDataEvent)("settings.custom_network.import_error",{loggingId:"f1c39ff3-55ce-4810-861c-5c63dc53f8e8"})}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(a.register(i,"logCustomNetworkAddAlreadyExists","/workspaces/libs/analytics/data/CustomNetworks.tsx"),a.register(c,"logCustomNetworkAddUnreachable","/workspaces/libs/analytics/data/CustomNetworks.tsx"),a.register(u,"logCustomNetworkAdded","/workspaces/libs/analytics/data/CustomNetworks.tsx"),a.register(l,"logImportCustomNetworks","/workspaces/libs/analytics/data/CustomNetworks.tsx"),a.register(d,"logImportCustomNetworksError","/workspaces/libs/analytics/data/CustomNetworks.tsx")),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(t)},445740:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.useSaveCustomNetwork=e.addedMainnetErrorMessage=e.addedTestnetErrorMessage=void 0;const o=r(202784),n=r(670352),a=r(446101),s=r(327242),i=r(648856),c=r(500659),u=r(631755),l=r(553476),d=r(834910),f=r(185776),h=r(976806);function m({chainId:t}){return`Testnet chain id: ${t} already exists.; Please enable testnets under Advanced Settings.`}function p({chainId:t}){return`Chain id: ${t} already exists.; Select from Default network.`}e.addedTestnetErrorMessage=m,e.addedMainnetErrorMessage=p,e.useSaveCustomNetwork=function(t=!1){const e=(0,l.useSetRecoilState)(h.customNetworksAtom),r=(0,l.useRecoilValue)(h.customNetworksAtom),g=(0,c.useAccounts)();return(0,o.useCallback)((async(o,c)=>{const l=c||r,h=s.EthereumNetworkMap.fromChainId(BigInt(o.chainId));if(h){if((0,n.logCustomNetworkAddAlreadyExists)({chainName:o.chainName.toLowerCase(),chainId:o.chainId,baseAssetSymbol:o.nativeCurrency.symbol.toUpperCase(),from3085:t.toString()}),h.isTestnet)throw new Error(m({chainId:o.chainId}));throw new Error(p({chainId:o.chainId}))}const y=(0,f.createNewCustomNetwork)(o);try{await(0,d.checkNetworkIsReachable)(y)}catch(e){const r=e;(0,n.logCustomNetworkAddUnreachable)({chainName:y.chainName.toLowerCase(),chainId:y.chainId,baseAssetSymbol:y.nativeCurrency.symbol.toUpperCase(),from3085:t.toString(),errorName:r?.name,errorMessage:r?.message,rpcUrl:y.rpcUrls[0]});const o=r?.message?`; Network error message: ${r.message}`:"";throw new Error(`Cannot fetch RPC URL. The network might be offline or the RPC URL has a typo in it.${o}`)}const w=l.findIndex((t=>t.chainId===y.chainId)),v=-1!==w?(0,u.replaceAt)(l,w,y):[...l,y];return(0,a.appendCustomNetworks)([y]),e(v),await Promise.all(g.map((async({id:t})=>(0,i.createWalletSetForEVMCompatibleBaseAsset)(y,t)))),(0,n.logCustomNetworkAdded)({chainName:y.chainName,chainId:y.chainId,baseAssetSymbol:y.nativeCurrency.symbol,from3085:t.toString()}),v}),[r,e,g,t])}}}]);
//# sourceMappingURL=1425.js.map