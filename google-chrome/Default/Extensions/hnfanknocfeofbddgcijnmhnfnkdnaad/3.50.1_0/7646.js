/*! For license information please see 7646.js.LICENSE.txt */
"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[7646],{609085:(e,t,r)=>{r.d(t,{A:()=>u});var n,o,a,i=r(202784),s=r(305738),c=r(518615);function u(){var e=(0,s.useAddTrackedExchangeRates)();return(0,i.useCallback)((function(t,r){if(r){var n=t.filter((function(e){return e.operationType===c.OperationType.BALANCE_TRANSFER||e.operationType===c.OperationType.BALANCE_TRANSFER_RANGE})).map((function(e){var t;return{code:e.currencyCode,chainId:r.toString(),contractAddress:null===(t=e.contractAddress)||void 0===t?void 0:t.toLowerCase()}}));n.length&&e(n)}}),[e])}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(u,"useAddTrackedExchangeRates{addTrackedExchangeRates}\nuseCallback{}",(function(){return[s.useAddTrackedExchangeRates]})),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&o.register(u,"useFetchExchangeRatesForOperations","/workspaces/libs/data/stores/TxScanner/hooks/useFetchExchangeRatesForOperations.tsx"),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&a(e)},281886:(e,t,r)=>{r.r(t),r.d(t,{useIsTxPreviewEnabled:()=>u});var n,o,a,i=r(214390),s=r(916589),c=r(211774);function u(){var e=(0,i.useOverridableKillSwitch)((0,s.getKillSwitchByPlatform)("kill_switch_transaction_preview"));return!c.isUiTest&&!e}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(u,"useKillSwitch{isKillSwitched}",(function(){return[i.useOverridableKillSwitch]})),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&o.register(u,"useIsTxPreviewEnabled","/workspaces/libs/data/stores/TxScanner/hooks/useIsTxPreviewEnabled.tsx"),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&a(e)},311520:(e,t,r)=>{r.d(t,{d:()=>E});var n,o=r(202784),a=r(698431),i=r(602438),s=r(525492),c=r(953925),u=r(518615),l=r(281886);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(){p=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),s=new L(n||[]);return o(i,"_invoke",{value:C(e,r,s)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var m="suspendedStart",g="suspendedYield",T="executing",A="completed",y={};function b(){}function h(){}function _(){}var v={};u(v,i,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(P([])));S&&S!==r&&n.call(S,i)&&(v=S);var O=_.prototype=b.prototype=Object.create(v);function N(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(o,a,i,s){var c=f(e[o],e,a);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==d(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(l).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=m;return function(a,i){if(o===T)throw new Error("Generator is already running");if(o===A){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var c=R(s,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=A,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=T;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?A:g,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=A,n.method="throw",n.arg=u.arg)}}}function R(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,R(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(d(t)+" is not iterable")}return h.prototype=_,o(O,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:h,configurable:!0}),h.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},N(w.prototype),u(w.prototype,s,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},N(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===d(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function A(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){T(a,n,o,i,s,"next",e)}function s(e){T(a,n,o,i,s,"throw",e)}i(void 0)}))}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var h,_,v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};function E(e){var t=e.queryClient,n=e.queryKey,a=e.logTimeout,i=e.scannerService,s=(0,o.useRef)(),c=y((0,o.useState)(!1),2),u=c[0],l=c[1],d=S(i),f=(0,o.useCallback)((function(e){l(!1);var o=null!=d?d:5e3;s.current={timeout:r.g.setTimeout(A(p().mark((function r(){return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s.current=void 0,r.next=3,t.cancelQueries(n);case 3:a(m(m({},e),{},{timeoutLength:o})),l(!0);case 5:case"end":return r.stop()}}),r)}))),o),startTime:Date.now(),timeoutLength:o,props:e}}),[t,n,d,a]),g=(0,o.useCallback)((function(){var e;s.current&&(clearTimeout(null===(e=s.current)||void 0===e?void 0:e.timeout),s.current=void 0)}),[]);return(0,o.useEffect)((function(){if(s.current&&d){var e=Date.now()-s.current.startTime;if(!(e>s.current.timeoutLength)){clearTimeout(s.current.timeout);var o=m(m({},s.current.props),{},{timeoutLength:d});s.current=m(m({},s.current),{},{timeout:r.g.setTimeout(function(){var e=A(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.current=void 0,e.next=3,t.cancelQueries(n);case 3:a(o),l(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d-e)})}}}),[d,a,t,n]),{startRequestTimeout:f,clearRequestTimeout:g,hasRequestTimedOut:u}}function S(e){var t=(0,l.useIsTxPreviewEnabled)(),r=(0,a.useIsFeatureEnabled)("message_scanner"),n=e===u.ScannerService.TX_SCANNER,o=n?t:r,d=n?c.sM:s.D_,p=n?c.CU:s.XM,f=(0,i.useQuery)([d],p,{staleTime:6e4,retry:!1,enabled:o});return null==f?void 0:f.data}v(E,"useRef{timeoutRef}\nuseState{[hasRequestTimedOut, setRequestTimedOut](false)}\nuseConfiguredTimeout{configuredTimeout}\nuseCallback{startRequestTimeout}\nuseCallback{clearRequestTimeout}\nuseEffect{}",(function(){return[S]})),v(S,"useIsTxPreviewEnabled{isTxPreviewEnabled}\nuseIsFeatureEnabled{isMessageScannerEnabled}\nuseQuery{timeout}",(function(){return[l.useIsTxPreviewEnabled,a.useIsFeatureEnabled,i.useQuery]})),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(h.register(E,"useStartRequestTimeout","/workspaces/libs/data/stores/TxScanner/hooks/useStartRequestTimeout.tsx"),h.register(S,"useConfiguredTimeout","/workspaces/libs/data/stores/TxScanner/hooks/useStartRequestTimeout.tsx")),(_="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&_(e)},201324:(e,t,r)=>{r.d(t,{e:()=>L});var n,o=r(202784),a=r(495809),i=r(166902),s=r(21514),c=r(886855),u=r(906858),l=r(518615),d=r(670327),p=r(606058),f=r(48972),m=r(110029),g=r(76470),T=r(661641),A=r(552322);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===y(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},O="vydm3ja",N=(0,o.memo)((function(e){var t=e.isPreAuthorizedOperation,r=e.content,n=r.fullString,o=r.subscriptString,a=r.shortenedStringSmallFont,i=r.shortenedStringLargeFont,s=r.isTokenBeingDepositedIntoWallet,c=e.showSmallerFontSizes,u=c?a:i,l=n!==u,d=!t&&s?"positive":void 0,p=o&&(0,A.jsx)(T.TextLegal,{as:"span",spacingHorizontal:1,color:"foregroundMuted",testID:"subscript-text",spacingBottom:1,children:o}),m=c?(0,A.jsxs)(f.VStack,{children:[(0,A.jsx)(T.TextHeadline,{as:"span",color:d,testID:"headline-text",children:u}),p]}):(0,A.jsxs)(f.VStack,{children:[(0,A.jsx)(T.TextTitle3,{as:"span",color:d,children:u}),p]});return l?(0,A.jsx)(g.Tooltip,{testID:"cb-tooltip",content:n,placement:"bottom",children:m}):m})),w=(0,o.memo)((function(e){var t=e.operations,r=e.networkChainId,n=t.length>4,i=t.map((function(e){switch(e.operationType){case l.OperationType.ITEM_TRANSFER:case l.OperationType.ITEM_APPROVAL:case l.OperationType.ITEM_APPROVAL_ALL:return(0,A.jsx)(d.Vp,{imageUrl:e.imageUrl,borderColor:"secondary",chainId:r||"",width:"40px",height:"40px"},"".concat(e.operationType,"-").concat(Math.random()));case l.OperationType.BALANCE_TRANSFER:case l.OperationType.BALANCE_TRANSFER_RANGE:case l.OperationType.BALANCE_APPROVAL:return(0,A.jsx)(m.RemoteImage,{source:e.imageUrl,shape:"circle",size:"xl",borderColor:"secondary"},"".concat(e.operationType,"-").concat(Math.random()));default:return null}}));return(0,A.jsx)("div",{className:n?(0,a.cx)(O):void 0,children:(0,A.jsx)(m.RemoteImageGroup,{size:"xl",max:Number.POSITIVE_INFINITY,testID:n?"vertical-icon-list":"horizontal-icon-list",children:i.map((function(e){return(0,A.jsx)(o.Fragment,{children:e},Math.random())}))})})})),C=(0,o.memo)(S((function(e){var t=e.operations,r=e.addTopSpacing,n=void 0!==r&&r,a=e.isPreAuthorizedOperations,i=e.operationsContent,c=e.showSmallerFontSizes,u=e.isRevokeOperation,d=e.networkChainId,m=e.operationSource,y=void 0===m?l.ScannerService.TX_SCANNER:m,b=(0,s.Y)(y),h=v((0,o.useMemo)((function(){var e="",t="";return u?(e=b.revokeAllowanceHeader,t=b.revokeAllowanceTooltipContent):a?(e=b.preauthorizeHeader,t=b.preauthorizeTooltipContent):(e=b.assetChangeHeader,t=b.assetChangeTooltipContent),[e,t]}),[b,a,u]),2),_=h[0],E=h[1];return t.length?(0,A.jsxs)(f.Box,{flexDirection:"column",spacingTop:n?2:0,children:[(0,A.jsxs)(f.Box,{spacingBottom:2,alignItems:"center",children:[(0,A.jsx)(T.TextLabel2,{as:"div",children:_}),(0,A.jsx)(g.Tooltip,{content:E,placement:"bottom",children:(0,A.jsx)(p.Icon,{testID:a?"cb-preauthorize-warning":"cb-asset-changes-warning",name:"info",size:"xs",color:"foregroundMuted",spacingStart:1})})]}),(0,A.jsxs)(f.Box,{justifyContent:"space-between",alignItems:"center",children:[(0,A.jsx)(f.Box,{flexDirection:"column",children:i.map((function(e){return(0,A.jsx)(N,{content:e,isPreAuthorizedOperation:a,showSmallerFontSizes:c},Math.random())}))}),(0,A.jsx)(w,{operations:t,networkChainId:d})]})]}):null}),"useTxPreviewMessages{txPreviewMessages}\nuseMemo{[headerMessage, headerTooltipContent]}",(function(){return[s.Y]})));function R(e){var t=e.userWalletAddress,r=e.parsedOperations,n=r.assetChangeOperations,a=r.preAuthorizeOperations,s=e.analyticsData,l=e.txScannerLoadStartTime,d=e.resetLoadTimer,p=e.isRevokeOperation,m=e.networkChainId,g=e.operationSource,T=(0,o.useMemo)((function(){if(l){var e=Date.now()-l;return d(),e}}),[d,l]),y=(0,o.useMemo)((function(){return c.Network.fromChainId({chainId:BigInt(null!=m?m:1)})}),[m]),b=(0,u.Zp)({operations:n,userWalletAddress:t,network:y}),_=b.content,v=b.contentExceedsCharLimit,E=(0,u.Zp)({operations:a,userWalletAddress:t,network:y}),S=E.content,O=E.contentExceedsCharLimit;return(0,i.useTriggerTxPreviewLoaded)(h(h({},s),{},{elapsedTimeToRenderTxPreviewComponent:T})),(0,A.jsxs)(f.Box,{background:"backgroundAlternate",spacing:3,flexDirection:"column",children:[(0,A.jsx)(C,{operations:a,isPreAuthorizedOperations:!0,operationsContent:S,showSmallerFontSizes:v||O,isRevokeOperation:p,networkChainId:m,operationSource:g}),(0,A.jsx)(C,{operations:n,isPreAuthorizedOperations:!1,addTopSpacing:a.length>0,operationsContent:_,showSmallerFontSizes:v||O,networkChainId:m,operationSource:g})]})}S(R,"useMemo{elapsedTimeToRenderTxPreviewComponent}\nuseMemo{network}\nuseTextDetailsForOperations{{\n    content: assetChangeOperationsContent,\n    contentExceedsCharLimit: assetChangeShowSmallFontSize\n  }}\nuseTextDetailsForOperations{{\n    content: preAuthorizeOperationsContent,\n    contentExceedsCharLimit: preAuthShowSmallFontSize\n  }}\nuseTriggerTxPreviewLoaded{}",(function(){return[u.Zp,u.Zp,i.useTriggerTxPreviewLoaded]}));var x,I,L=(0,o.memo)(R);r(565782),(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(x.register(O,"verticalIconGroupContainer","/workspaces/libs/wallet-cds-extension/components/TxPreview/TxPreview.tsx"),x.register(N,"TokenContent","/workspaces/libs/wallet-cds-extension/components/TxPreview/TxPreview.tsx"),x.register(w,"IconGroup","/workspaces/libs/wallet-cds-extension/components/TxPreview/TxPreview.tsx"),x.register(C,"OperationGroup","/workspaces/libs/wallet-cds-extension/components/TxPreview/TxPreview.tsx"),x.register(R,"TxPreviewComponent","/workspaces/libs/wallet-cds-extension/components/TxPreview/TxPreview.tsx"),x.register(L,"TxPreview","/workspaces/libs/wallet-cds-extension/components/TxPreview/TxPreview.tsx")),(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&I(e)},57179:(e,t,r)=>{r.d(t,{B:()=>A});var n,o=r(202784),a=r(21514),i=r(518615),s=r(586421),c=r(48972),u=r(76470),l=r(822821),d=r(468819),p=r(661641),f=r(552322);function m(e){var t=e.operationSource,r=void 0===t?i.ScannerService.TX_SCANNER:t,n=(0,a.Y)(r);return(0,f.jsxs)(c.Box,{flexDirection:"column",dangerouslySetBackground:"rgb(var(--gray15))",spacingHorizontal:3,spacingVertical:2,testID:"tx-scanner-fallback",children:[(0,f.jsxs)(c.HStack,{children:[(0,f.jsx)(p.TextLegal,{as:"p",color:"foregroundMuted",children:n.fallbackTitle}),(0,f.jsx)(u.Tooltip,{content:n.assetChangeTooltipContent,placement:"bottom",children:(0,f.jsx)(s.Icon,{testID:"dapp-transaction-safety-tooltip-icon",name:"info",size:"xs",color:"foregroundMuted",spacingStart:.5})})]}),(0,f.jsx)(l.Table,{children:(0,f.jsx)(l.TableBody,{children:(0,f.jsx)(l.TableRow,{className:y,children:(0,f.jsx)(d.TableCellFallback,{title:!0,end:"pictogram",innerSpacing:{spacingHorizontal:0,spacingTop:0}})})})})]})}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(m,"useTxPreviewMessages{txPreviewMessages}",(function(){return[a.Y]}));var g,T,A=(0,o.memo)(m),y="s16cw2xr";r(70037),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(g.register(m,"TxScannerFallback","/workspaces/libs/wallet-cds-extension/components/TxPreviewFallback.tsx"),g.register(A,"TransactionScannerFallback","/workspaces/libs/wallet-cds-extension/components/TxPreviewFallback.tsx"),g.register(y,"style","/workspaces/libs/wallet-cds-extension/components/TxPreviewFallback.tsx")),(T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&T(e)},565782:(e,t,r)=>{r.r(t)},70037:(e,t,r)=>{r.r(t)},642912:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.triggerNativeSendAnomalyEvent=t.triggerWeb3SuccessfullyParsedWithOperationDetails=t.triggerWeb3TokenImageNotReturned=t.triggerWeb3CaptureParsingError=t.triggerWeb3GetCryptoCurrenciesError=t.triggerWeb3ScanTxInvoked=t.triggerWeb3ScanTxError=t.triggerWeb3RequestGetCryptoCurrenciesImageNotFound=t.triggerWeb3RequestGetCryptoCurrenciesSuccess=t.triggerWeb3RequestScanTxInvalidQuery=t.triggerWeb3RequestScanTxForUnhandledOperationType=t.triggerWeb3RequestScanTxTimeout=t.triggerWeb3RequestScanTxSuccess=void 0;const n=r(160593),o="scan_tx.web3_request.scan_tx_invoked",a="scan_tx.web3_request.scan_tx_success",i="scan_tx.web3_request.scan_tx_timeout",s="scan_tx.web3_request.scan_tx_unhandled_operation_type",c="scan_tx.web3_request.scan_tx_error",u="scan_tx.web3_request.scan_tx_invalid_query",l="scan_tx.web3_request.get_crypto_currencies_success",d="scan_tx.web3_request.get_crypto_currencies_image_not_found",p="scan_tx.web3_request.get_crypto_currencies_error",f="scan_tx.web3_request.parsing_error",m="scan_tx.web3_request.token_image_not_returned",g="scan_tx.web3_request.SUCCESSFULLY_PARSED_WITH_OPERATION_DETAILS",T="scan_tx.native_send_anomaly";function A(e,t,r){return(0,n.logDataEvent)(e,{loggingId:t,...r})}t.triggerWeb3RequestScanTxSuccess=function(e){A(a,"d9e05342-c6ad-4053-bb1f-302a2757c4f8",e)},t.triggerWeb3RequestScanTxTimeout=function(e){A(i,"07b68fc5-69f1-41fe-8ffb-d16be7a84c6e",e)},t.triggerWeb3RequestScanTxForUnhandledOperationType=function(e){A(s,"d8274ab4-5ada-4f8b-b763-2c7e18812391",e)},t.triggerWeb3RequestScanTxInvalidQuery=function(e){A(u,"4ae13734-f576-4568-8695-9e1d6d4913de",e)},t.triggerWeb3RequestGetCryptoCurrenciesSuccess=function(e){A(l,"e0063d8b-a865-4827-b415-8f2fe8596464",e)},t.triggerWeb3RequestGetCryptoCurrenciesImageNotFound=function(e){A(d,"c67f7f34-3e4c-49f7-a9e6-eb7722a08189",e)},t.triggerWeb3ScanTxError=function(e){A(c,"ae40fd71-02ab-4a19-96b0-52eed833b43d",e)},t.triggerWeb3ScanTxInvoked=function(e){A(o,"40102260-104e-4084-9203-88fcc3af0c5c",e)},t.triggerWeb3GetCryptoCurrenciesError=function(e){A(p,"60e68d7b-0367-477a-bf01-f36e3108d9c2",e)},t.triggerWeb3CaptureParsingError=function(e,t){A(f,"11eccd03-7a9c-41fa-8762-f96a5628e595",{operationType:e,errorMessage:t?.message,errorName:t?.name})},t.triggerWeb3TokenImageNotReturned=function(e){A(m,"ca011a1a-40c7-41a5-8a7a-0f204e6a5524",e)},t.triggerWeb3SuccessfullyParsedWithOperationDetails=function(e){A(g,"ca011a1a-40c7-41a5-8a7a-0f204e6a5524",e)},t.triggerNativeSendAnomalyEvent=function(e){A(T,"c6a281e0-f8aa-4d00-b62f-af4ea4b3ee26",e)}},850179:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(642912),t)},910470:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useTriggerWeb3RequestTxGenerationError=t.useTriggerWeb3RequestTxGenerationStart=t.useTriggerWeb3SignTransactionError=t.useTriggerWeb3CancelTransactionClicked=t.useTriggerWeb3RequestSendingSuccessResponse=t.useTriggerWeb3FraudWarningConfirmationClicked=t.useTriggerWeb3ConfirmTransactionClicked=t.useTriggerTxErrorLoaded=t.useTriggerTxPreviewLoaded=t.useTriggerTxApprovalLoaded=t.useTriggerFraudWarningConfirmationBackButtonClicked=t.useFraudWarningConfirmationPopUpViewed=t.useTransactionRequestStepViewed=t.EVENTS=void 0;const n=r(395545),o=r(160593);t.EVENTS={WEB3_REQUEST_TX_GENERATION_START:"sign_transaction.web3_request.tx_generation_start",WEB3_REQUEST_TX_GENERATION_ERROR:"sign_transaction.web3_request.tx_generation_error",SIGN_TRANSACTION_WEB3_REQUEST_SENDING_SUCCESS_RESPONSE:"sign_transaction.web3_request.sending_success",WEB3_REQUEST_SENDING_CANCELED_RESPONSE:"sign_transaction.web3_request.sending_canceled",SIGN_TRANSACTION_WEB3_REQUEST_TRANSACTION_REQUEST_VIEWED:"sign_transaction.web3_request.transaction_request_viewed",SIGN_TRANSACTION_WEB3_REQUEST_FRAUD_WARNING_CONFIRMATION_POPUP_REQUEST_VIEWED:"sign_transaction.web3_request.fraud_warning_confirmation_popup_request_viewed",SIGN_TRANSACTION_WEB3_REQUEST_FRAUD_WARNING_CONFIRMATION_BACK_BUTTON_CLICKED:"sign_transaction.web3_request.fraud_warning_confirmation_back_button_clicked",TX_APPROVAL_COMPONENT_LOADED:"tx_approval_component_loaded",SIGN_TRANSACTION_WEB3_REQUEST_TX_PREVIEW_COMPONENT_LOADED:"sign_transaction_web3_request.tx_preview_component_loaded",SIGN_TRANSACTION_WEB3_REQUEST_TX_ERROR_COMPONENT_LOADED:"sign_transaction_web3_request.tx_error_component_loaded",SIGN_TRANSACTION_WEB3_REQUEST_CONFIRM_TRANSACTION_CLICKED:"sign_transaction.web3_request.confirm_transaction_clicked",SIGN_TRANSACTION_WEB3_REQUEST_FRAUD_WARNING_CONFIRMATION_CLICKED:"sign_transaction.web3_request.fraud_warning_confirmation_clicked",SIGN_TRANSACTION_WEB3_REQUEST_SIGN_TRANSACTION_ERROR:"sign_transaction.web3_request.sign_transaction_error",SIGN_TRANSACTION_REQUEST_CONFIRM_BUTTON_ENABLED:"sign_transaction.web3_request.confirm_button_enabled"},t.useTransactionRequestStepViewed=function(e){(0,o.useLogEventOnMount)(t.EVENTS.SIGN_TRANSACTION_WEB3_REQUEST_TRANSACTION_REQUEST_VIEWED,{loggingId:"396c898f-c5ab-4f7a-ba3e-43fd9f3858d6",componentType:n.ComponentType.page,action:n.ActionType.view,dapp:e?.dappURL,...e})},t.useFraudWarningConfirmationPopUpViewed=function(e){(0,o.useLogEventOnMount)(t.EVENTS.SIGN_TRANSACTION_WEB3_REQUEST_FRAUD_WARNING_CONFIRMATION_POPUP_REQUEST_VIEWED,{loggingId:"92cd7a0a-6f1c-49af-a386-3184464d8634",action:n.ActionType.view,componentType:n.ComponentType.page,dapp:e.dappURL,...e})},t.useTriggerFraudWarningConfirmationBackButtonClicked=function(e){return(0,o.useEventLogger)(t.EVENTS.SIGN_TRANSACTION_WEB3_REQUEST_FRAUD_WARNING_CONFIRMATION_BACK_BUTTON_CLICKED,{action:n.ActionType.click,componentType:n.ComponentType.button,dapp:e.dappURL,...e})},t.useTriggerTxApprovalLoaded=function(e){return(0,o.useEventLogger)(t.EVENTS.TX_APPROVAL_COMPONENT_LOADED,{loggingId:"6ecf0fa6-6f1f-47f9-a4a6-3ada28829340",action:n.ActionType.render,componentType:n.ComponentType.unknown,dapp:e.dappURL,...e})},t.useTriggerTxPreviewLoaded=function(e){(0,o.useLogEventOnMount)(t.EVENTS.SIGN_TRANSACTION_WEB3_REQUEST_TX_PREVIEW_COMPONENT_LOADED,{loggingId:"21817d96-e697-4b8d-bba3-48fed57a6b1c",action:n.ActionType.render,componentType:n.ComponentType.unknown,dapp:e.dappURL,...e})},t.useTriggerTxErrorLoaded=function(e){(0,o.useLogEventOnMount)(t.EVENTS.SIGN_TRANSACTION_WEB3_REQUEST_TX_ERROR_COMPONENT_LOADED,{loggingId:"68c3b689-4c11-427f-a034-b310700f77a1",action:n.ActionType.render,componentType:n.ComponentType.unknown,dapp:e.dappURL,...e})},t.useTriggerWeb3ConfirmTransactionClicked=function(e){return(0,o.useEventLogger)(t.EVENTS.SIGN_TRANSACTION_WEB3_REQUEST_CONFIRM_TRANSACTION_CLICKED,{loggingId:"1529a00c-267c-48af-b931-2a82e93ba27c",action:n.ActionType.click,componentType:n.ComponentType.button,dapp:e.dappURL,...e},n.AnalyticsEventImportance.high)},t.useTriggerWeb3FraudWarningConfirmationClicked=function(e){return(0,o.useEventLogger)(t.EVENTS.SIGN_TRANSACTION_WEB3_REQUEST_FRAUD_WARNING_CONFIRMATION_CLICKED,{loggingId:"b3e5390f-ebf7-4759-846c-34432edc8da2",action:n.ActionType.click,componentType:n.ComponentType.button,dapp:e.dappURL,...e},n.AnalyticsEventImportance.high)},t.useTriggerWeb3RequestSendingSuccessResponse=function(e){return(0,o.useEventLogger)(t.EVENTS.SIGN_TRANSACTION_WEB3_REQUEST_SENDING_SUCCESS_RESPONSE,{loggingId:"8723cd14-81d1-4c6d-9c6f-5ee9c94e63d7",action:n.ActionType.measurement,componentType:n.ComponentType.unknown,dapp:e.dappURL,...e},n.AnalyticsEventImportance.high)},t.useTriggerWeb3CancelTransactionClicked=function(e){return(0,o.useEventLogger)("sign_transaction.web3_request.cancel_transaction_clicked",{loggingId:"18c2d6a6-0b8f-4af1-b5e0-f0c1496bbd26",action:n.ActionType.click,componentType:n.ComponentType.button,dapp:e.dappURL,...e},n.AnalyticsEventImportance.high)},t.useTriggerWeb3SignTransactionError=function(e){return(0,o.useEventLogger)(t.EVENTS.SIGN_TRANSACTION_WEB3_REQUEST_SIGN_TRANSACTION_ERROR,{...e.eventData,loggingId:"ad70b8de-b408-4ef6-9204-ee580c4d1025",action:n.ActionType.measurement,componentType:n.ComponentType.unknown,dapp:e.dappURL,...e},n.AnalyticsEventImportance.high)},t.useTriggerWeb3RequestTxGenerationStart=function(e){return(0,o.useEventLogger)(t.EVENTS.WEB3_REQUEST_TX_GENERATION_START,{...e.eventData,action:n.ActionType.measurement,componentType:n.ComponentType.unknown,dapp:e.dappURL,...e},n.AnalyticsEventImportance.high)},t.useTriggerWeb3RequestTxGenerationError=function(e){return(0,o.useEventLogger)(t.EVENTS.WEB3_REQUEST_TX_GENERATION_ERROR,{...e.eventData,action:n.ActionType.measurement,componentType:n.ComponentType.unknown,dapp:e.dappURL,...e},n.AnalyticsEventImportance.high)}},166902:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(910470),t)},21514:(e,t,r)=>{t.Y=void 0;const n=r(202784),o=r(239398),a=r(518615),i=(0,o.defineMessages)({revokeAllowanceHeader:{id:"V8k0KX",defaultMessage:"Revoke allowance"},preauthorizeHeader:{id:"EJUMuc",defaultMessage:"Pre-authorize withdrawal"},assetChangeHeader:{id:"jmBafj",defaultMessage:"Asset changes (estimate)"},preauthorizeTooltipContentForTransaction:{id:"At6Faa",defaultMessage:"This preview is based on a simulation of the transaction."},preauthorizeTooltipContentForMessage:{id:"I1e1X5",defaultMessage:"This preview is based on a simulation of the message."},assetChangeTooltipContentForTransaction:{id:"AVv4Nz",defaultMessage:"For your safety, we simulate the transaction in advance. This estimate may not be accurate."},assetChangeTooltipContentForMessage:{id:"GKBpfP",defaultMessage:"For your safety, we simulate the message in advance. This estimate may not be accurate."},revokeAllowanceTooltipContent:{id:"9a1h4g",defaultMessage:"This removes a dapp's ability to withdraw a particular token or NFT from your wallet."},fallbackTitleForTransaction:{id:"OnGi2E",defaultMessage:"Previewing your transaction...."},fallbackTitleForMessage:{id:"mQXajY",defaultMessage:"Previewing your message...."},messagePreviewDisclaimer:{id:"hQZ6nd",defaultMessage:"By signing this request, you will allow the dapp to create a transaction for the above asset changes in the future. Those changes may not occur immediately."}});t.Y=function(e){const{formatMessage:t}=(0,o.useIntl)();return(0,n.useMemo)((()=>({revokeAllowanceHeader:t(i.revokeAllowanceHeader),preauthorizeHeader:t(i.preauthorizeHeader),assetChangeHeader:t(i.assetChangeHeader),preauthorizeTooltipContent:e===a.ScannerService.TX_SCANNER?t(i.preauthorizeTooltipContentForTransaction):t(i.preauthorizeTooltipContentForMessage),assetChangeTooltipContent:e===a.ScannerService.TX_SCANNER?t(i.assetChangeTooltipContentForTransaction):t(i.assetChangeTooltipContentForMessage),revokeAllowanceTooltipContent:t(i.revokeAllowanceTooltipContent),fallbackTitle:e===a.ScannerService.TX_SCANNER?t(i.fallbackTitleForTransaction):t(i.fallbackTitleForMessage),messagePreviewDisclaimer:t(i.messagePreviewDisclaimer)})),[e,t])}},525492:(e,t,r)=>{t.XM=t.ND=t.HD=t.D_=void 0;const n=r(518615),o=r(49982);t.D_="scanMessageTimeout",t.HD="scanMessage",t.ND=async function(e,r,a){const i=`eth_sign_typed_data_${a}_params`,{result:s}=await(0,o.postJSON)(t.HD,{[i]:{signer:e,data:r}});return function(e){return e.decodedMessage.operations?.forEach((function(e){e.operationType===n.OperationType.BALANCE_TRANSFER&&(e.balanceTransfer.amountRange?.startAmount.currency&&void 0===e.balanceTransfer.amountRange?.startAmount.currency.decimals&&(e.balanceTransfer.amountRange.startAmount.currency.decimals=0),e.balanceTransfer.amountRange?.endAmount.currency&&void 0===e.balanceTransfer.amountRange?.endAmount.currency.decimals&&(e.balanceTransfer.amountRange.endAmount.currency.decimals=0),e.balanceTransfer.currentBalance&&void 0===e.balanceTransfer.currentBalance.currency.decimals&&(e.balanceTransfer.currentBalance.currency.decimals=0)),e.operationType===n.OperationType.BALANCE_APPROVAL&&(e.balanceApproval?.amount?.currency&&void 0===e.balanceApproval.amount.currency.decimals&&(e.balanceApproval.amount.currency.decimals=0),e.balanceApproval.currentBalance&&void 0===e.balanceApproval.currentBalance.currency.decimals&&(e.balanceApproval.currentBalance.currency.decimals=0),e.balanceApproval.allowance?.currency&&void 0===e.balanceApproval.allowance.currency.decimals&&(e.balanceApproval.allowance.currency.decimals=0))})),e}(s)},t.XM=async function(){const{result:e}=await(0,o.getJSON)(t.D_,{});return e.timeout}},953925:(e,t,r)=>{t.CU=t.Vm=t.sM=t.kY=void 0;const n=r(518615),o=r(49982);t.kY="scanTxV2",t.sM="scanTxTimeout",t.Vm=async function(e,r,a,i){const s=`${t.kY}${i?"?simulate=true":""}`,{result:c}=await(0,o.postJSON)(s,{txData:e,networkName:r,from:a,clientName:"walletMobile"});return function(e){return e.decodedTx.operations?.forEach((function(e){e.operationType===n.OperationType.BALANCE_TRANSFER&&(e.balanceTransfer.amount.currency&&void 0===e.balanceTransfer.amount.currency.decimals&&(e.balanceTransfer.amount.currency.decimals=0),e.balanceTransfer.currentBalance&&void 0===e.balanceTransfer.currentBalance.currency.decimals&&(e.balanceTransfer.currentBalance.currency.decimals=0)),e.operationType===n.OperationType.BALANCE_APPROVAL&&(e.balanceApproval?.amount?.currency&&void 0===e.balanceApproval.amount.currency.decimals&&(e.balanceApproval.amount.currency.decimals=0),e.balanceApproval.currentBalance&&void 0===e.balanceApproval.currentBalance.currency.decimals&&(e.balanceApproval.currentBalance.currency.decimals=0),e.balanceApproval.allowance?.currency&&void 0===e.balanceApproval.allowance.currency.decimals&&(e.balanceApproval.allowance.currency.decimals=0))})),e}(c)},t.CU=async function(){const{result:e}=await(0,o.getJSON)(t.sM,{});return e.timeout}},906858:(e,t,r)=>{t.Zp=t.MV=t.XP=void 0;const n=r(202784),o=r(239398),a=r(101620),i=r(178012),s=r(518615),c=r(458123);t.XP=19,t.MV=22;const u=(0,o.defineMessages)({unlimitedTokens:{id:"kNNL7s",defaultMessage:"Unlimited {currencyCode}"},unknownCollection:{id:"oM/YKG",defaultMessage:"Unknown collection"},itemApproval:{id:"TY5zEf",defaultMessage:"{collectionName} {nftName}"},itemTransfer:{id:"aJ49yB",defaultMessage:"{symbol}{quantity}{collectionName} {nftName}"},balanceTransfer:{id:"yYDXiS",defaultMessage:"{symbol}{cryptoAmount}"}});t.Zp=function({operations:e,userWalletAddress:r,network:l,largeTextCharLimit:d=t.XP,smallTextCharLimit:p=t.MV}){const{formatToCrypto:f,formatToFiat:m}=(0,a.useCurrencyFormatter)(),{formatMessage:g}=(0,o.useIntl)(),T=(0,n.useCallback)((function(e){return f({value:e.amountValue,currencyCode:e.currencyCode,decimals:BigInt(e.decimals),includeCode:!0,maxDisplayDecimals:6n,shouldDisplayDustAmount:!1})}),[f]),A=(0,n.useCallback)((function(e){return m(e.currencyCode,BigInt(e.decimals),e.amountValue,!1,e.contractAddress?.toLowerCase(),l)}),[m,l]),y=(0,n.useCallback)((e=>{let t,n,o="";switch(e.operationType){case s.OperationType.ITEM_APPROVAL:o=g(u.itemApproval,{collectionName:e.collectionName,nftName:e.NFTName});break;case s.OperationType.ITEM_APPROVAL_ALL:o=e.collectionName||g(u.unknownCollection);break;case s.OperationType.ITEM_TRANSFER:{n=e.toAddress.toLowerCase()===r.toLowerCase();const t=(0,c.getContextualQuantityFromOperation)(e,n),a=t>1n?`${t} `:"";o=g(u.itemTransfer,{symbol:n?"+":"\u2212",collectionName:e.collectionName,nftName:e.NFTName,quantity:a});break}case s.OperationType.BALANCE_APPROVAL:if(0n===e.amountValue){o=e.currencyCode.rawValue;break}if(e.currentBalanceValue&&e.currentBalanceValue<e.amountValue){o=g(u.unlimitedTokens,{currencyCode:e.currencyCode.rawValue});break}o=T(e)||"";break;case s.OperationType.BALANCE_TRANSFER:{n=e.toAddress.toLowerCase()===r.toLowerCase();const a=T(e),i=A(e);o=g(u.balanceTransfer,{symbol:n?"+":"\u2212",cryptoAmount:a||""}),i&&(t=i.toString());break}case s.OperationType.BALANCE_TRANSFER_RANGE:{n=e.toAddress.toLowerCase()===r.toLowerCase();const a=(0,c.getContextualAmountFromOperation)(e,n),i=f({value:a,currencyCode:e.currencyCode,decimals:BigInt(e.decimals),includeCode:!0,maxDisplayDecimals:6n,shouldDisplayDustAmount:!1}),s=m(e.currencyCode,BigInt(e.decimals),a,!1,e.contractAddress?.toLowerCase(),l);o=g(u.balanceTransfer,{symbol:n?"+":"\u2212",cryptoAmount:i||""}),s&&(t=s.toString());break}}return{fullString:o,subscriptString:t,shortenedStringLargeFont:(0,i.abridgeName)(o,d),shortenedStringSmallFont:(0,i.abridgeName)(o,p),isTokenBeingDepositedIntoWallet:n}}),[d,p,g,r,T,A,f,m,l]);return(0,n.useMemo)((()=>{let t=!1;return{content:e.map((function(e){const r=y(e);return r.fullString.length>d&&(t=!0),r})),contentExceedsCharLimit:t}}),[e,y,d])}},518615:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScannerService=t.OperationType=void 0,function(e){e.BALANCE_APPROVAL="BALANCE_APPROVAL",e.ITEM_APPROVAL_ALL="ITEM_APPROVAL_ALL",e.ITEM_APPROVAL="ITEM_APPROVAL",e.ITEM_TRANSFER="ITEM_TRANSFER",e.CONTRACT_OWNERSHIP_TRANSFER="CONTRACT_OWNERSHIP_TRANSFER",e.BALANCE_TRANSFER="BALANCE_TRANSFER",e.BALANCE_TRANSFER_RANGE="BALANCE_TRANSFER_RANGE"}(t.OperationType||(t.OperationType={})),function(e){e.TX_SCANNER="TX_SCANNER",e.MESSAGE_SCANNER="MESSAGE_SCANNER"}(t.ScannerService||(t.ScannerService={}))},305798:(e,t,r)=>{t.s=void 0;const n=r(363218),o=r(518615),a=r(752996);t.s=function(e,t){return e.reduce((function(r,i){switch(i.operationType){case o.OperationType.ITEM_APPROVAL:if(i.spenderAddress.toLowerCase()===n.BLACK_HOLE_ADDRESS)break;if(i.fromAddress.toLowerCase()!==t?.toLowerCase())break;i.isApprovedAddressEoa&&e.some((e=>e.operationType===o.OperationType.ITEM_TRANSFER&&e.toAddress===i.spenderAddress))?r.preAuthorizeOperations.push({...i,isApprovedAddressEoa:!1}):r.preAuthorizeOperations.push(i);break;case o.OperationType.ITEM_APPROVAL_ALL:if(i.fromAddress.toLowerCase()!==t?.toLowerCase())break;r.preAuthorizeOperations.push(i);break;case o.OperationType.BALANCE_APPROVAL:r.preAuthorizeOperations.push(i);break;case o.OperationType.ITEM_TRANSFER:case o.OperationType.BALANCE_TRANSFER:if(i.operationType===o.OperationType.BALANCE_TRANSFER&&(i.fromAddress===t||i.toAddress===t)){const e=(0,a.aggregateBalanceTransfers)(i,r,t);if(e)return e}(0,a.executeFnOnWalletAddressMatchWithFromAndTo)(i,t,(()=>r.assetChangeOperations.unshift(i)),(()=>r.assetChangeOperations.push(i)));break;case o.OperationType.BALANCE_TRANSFER_RANGE:if(i.fromAddress===t||i.toAddress===t){const e=(0,a.aggregateBalanceRangeTransfers)(i,r,t);if(e)return e}(0,a.executeFnOnWalletAddressMatchWithFromAndTo)(i,t,(()=>r.assetChangeOperations.unshift(i)),(()=>r.assetChangeOperations.push(i)))}return r}),{preAuthorizeOperations:[],assetChangeOperations:[],hasAggregatedTransfers:!1})}},458123:(e,t)=>{function r(e){return!0===e.types?.PermitSingle?.some((e=>"details"===e.name&&"PermitDetails"===e.type||"sigDeadline"===e.name&&"uint256"===e.type))}function n(e){return!0===e.types?.Order?.some((e=>"makeAsset"===e.name&&"Asset"===e.type||"takeAsset"===e.name&&"Asset"===e.type))}function o(e){return!0===e.types?.OrderComponents?.some((e=>"offer"===e.name&&"OfferItem[]"===e.type||"consideration"===e.name&&"Consideration[]"===e.type))}Object.defineProperty(t,"__esModule",{value:!0}),t.getContextualQuantityFromOperation=t.getContextualAmountFromOperation=t.hasOffersOrConsiderations=t.shouldShowForkWarning=t.isSeaportType=t.getOfferType=t.isRaribleType=t.isPermit2Type=void 0,t.isPermit2Type=r,t.isRaribleType=n,t.getOfferType=function(e){return o(e)?"seaport":r(e)?"permit2":n(e)?"rarible":""},t.isSeaportType=o,t.shouldShowForkWarning=function(e){return"number"==typeof e.domain?.chainId},t.hasOffersOrConsiderations=function(e){return void 0!==e.message&&(e.message.offer?.length??0)>0||(e.message?.consideration?.length??0)>0},t.getContextualAmountFromOperation=function(e,t){return t?BigInt(Math.min(Number(e.startAmountValue),Number(e.endAmountValue))):BigInt(Math.max(Number(e.startAmountValue),Number(e.endAmountValue)))},t.getContextualQuantityFromOperation=function(e,t){return e.startQuantity&&e.endQuantity?t?BigInt(Math.min(Number(e.startQuantity),Number(e.endQuantity))):BigInt(Math.max(Number(e.startQuantity),Number(e.endQuantity))):0n}},894185:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getOperationAnalyticsType=void 0,t.getOperationAnalyticsType=function(e){const t=e.preAuthorizeOperations.some((e=>e.isSpenderAddressEoa||e.isOperatorAddressEoa||e.isApprovedAddressEoa)),r=e.preAuthorizeOperations.length,n=e.assetChangeOperations.length,o=r+n;return r>0&&n>0?{operationType:"MIXED_OPERATIONS",numberOfOperations:o,isPreAuthorizeOperationToAnEOA:t}:r>1?{operationType:"PRE_AUTHORIZE",numberOfOperations:o,isPreAuthorizeOperationToAnEOA:t}:n>1?{operationType:"ASSET_CHANGE",numberOfOperations:o}:0===r&&0===n?{operationType:"NO_VALID_OPERATIONS",numberOfOperations:0}:{operationType:(r?e.preAuthorizeOperations[0]:e.assetChangeOperations[0]).operationType,numberOfOperations:o}}},752996:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.aggregateBalanceRangeTransfers=t.aggregateBalanceTransfers=t.executeFnOnWalletAddressMatchWithFromAndTo=t.parseOperations=void 0;const n=r(850179),o=r(524801),a=r(518615);function i(e,t){let r=0;if(t?.length){const e=t.find((e=>{try{r=Number(e.size.split("x")[0])}catch(e){return!1}return r>40&&r<250}));return e?e.url:t[0].url}(0,n.triggerWeb3TokenImageNotReturned)(e)}function s(e,t,r,n){e.fromAddress.toLowerCase()===t?.toLowerCase()?r():e.toAddress.toLowerCase()===t?.toLowerCase()&&n()}t.parseOperations=function(e,t){return e.reduce(((e,r)=>{try{switch(r.operationType){case a.OperationType.BALANCE_APPROVAL:e.push(function(e){const{operationType:t,balanceApproval:{amount:{currency:{decimals:r,symbol:n,images:a,contractAddress:s},value:c},currentBalance:u,spenderAddress:l,fromAddress:d,isSpenderAddressEoa:p}}=e,f={operationType:t,contractAddress:s};return{amountValue:BigInt(c),decimals:BigInt(r),spenderAddress:l,operationType:t,currencyCode:new o.CurrencyCode(n),currentBalanceValue:u?BigInt(u.value):void 0,imageUrl:i(f,a),fromAddress:d,isSpenderAddressEoa:Boolean(p)}}(r));break;case a.OperationType.ITEM_TRANSFER:e.push(function({operationType:e,itemTransfer:{toAddress:t,collection:r,item:n,fromAddress:o,quantity:a,quantityRange:i}}){return{collectionName:r?.name,NFTName:n?.name||n?.tokenId&&`#${n.tokenId}`||"",imageUrl:n?.imageUrl||r?.imageUrl,operationType:e,spenderAddress:t,fromAddress:o,toAddress:t,startQuantity:i?.startQuantity??a,endQuantity:i?.endQuantity??a}}(r));break;case a.OperationType.ITEM_APPROVAL:e.push(function({operationType:e,itemApproval:{approvedAddress:t,fromAddress:r,item:n,collection:o,isApprovedAddressEoa:a}}){return{collectionName:o?.name,NFTName:n?.name||n?.tokenId,imageUrl:n?.imageUrl,operationType:e,spenderAddress:t,fromAddress:r,isApprovedAddressEoa:Boolean(a)}}(r));break;case a.OperationType.ITEM_APPROVAL_ALL:e.push(function({itemApprovalAll:{operatorAddress:e,collection:t,ownerAddress:r,isRevoke:n,isOperatorAddressEoa:o},operationType:a}){return{operationType:a,collectionName:t?.name,spenderAddress:e,imageUrl:t?.imageUrl,fromAddress:r,isRevoke:n,isOperatorAddressEoa:Boolean(o)}}(r));break;case a.OperationType.BALANCE_TRANSFER:e.push(function(e){if(e.balanceTransfer.amountRange){const{operationType:t,balanceTransfer:{amountRange:{startAmount:{currency:{decimals:r,symbol:n,contractAddress:s,images:c},value:u},endAmount:{value:l}},currentBalance:d,toAddress:p,fromAddress:f},validity:m}=e,g={operationType:t,contractAddress:s};return{operationType:a.OperationType.BALANCE_TRANSFER_RANGE,startAmountValue:BigInt(u),endAmountValue:BigInt(l),currencyCode:new o.CurrencyCode(n),decimals:BigInt(r),spenderAddress:p,contractAddress:s,currentBalanceValue:d?BigInt(d.value):void 0,imageUrl:i(g,c),fromAddress:f,toAddress:p,validity:m}}const{operationType:t,balanceTransfer:{amount:{currency:{decimals:r,symbol:n,images:s,contractAddress:c},value:u},currentBalance:l,toAddress:d,fromAddress:p}}=e,f={operationType:t,contractAddress:c};return{amountValue:BigInt(u),decimals:BigInt(r),spenderAddress:d,operationType:t,contractAddress:c,currencyCode:new o.CurrencyCode(n),currentBalanceValue:l?BigInt(l.value):void 0,imageUrl:i(f,s),fromAddress:p,toAddress:d}}(r));break;default:{const e={request:t.request,dappURL:t.dappURL,blockchain:t.blockchain,isTxPreviewEnabled:t.isTxPreviewEnabled,isMessageScannerEnabled:t.isMessageScannerEnabled,operationType:r?.operationType,isInvokedFromNativeSend:t.isInvokedFromNativeSend};(0,n.triggerWeb3RequestScanTxForUnhandledOperationType)(e);break}}return e}catch(t){const o=r.operationType;return(0,n.triggerWeb3CaptureParsingError)(o,t),e}}),[])},t.executeFnOnWalletAddressMatchWithFromAndTo=s,t.aggregateBalanceTransfers=function(e,t,r){const n=t.assetChangeOperations.find((t=>t.operationType===a.OperationType.BALANCE_TRANSFER&&t.currencyCode.rawValue===e.currencyCode.rawValue&&t.contractAddress===e.contractAddress));if(!n)return;t.hasAggregatedTransfers=!0;const o=n.toAddress.toLowerCase()===r?.toLowerCase();return s(e,r,(()=>{if(o){const t=n.amountValue-e.amountValue;if(BigInt(t)>0n)n.amountValue=t;else{const e=n.fromAddress;n.fromAddress=n.toAddress,n.toAddress=e,n.amountValue=-t}}else n.amountValue+=e.amountValue}),(()=>{if(o)n.amountValue+=e.amountValue;else{const t=n.amountValue-e.amountValue;if(BigInt(t)>0n)n.amountValue=t;else{const e=n.fromAddress;n.fromAddress=n.toAddress,n.toAddress=e,n.amountValue=-t}}})),t},t.aggregateBalanceRangeTransfers=function(e,t,r){const n=t.assetChangeOperations.find((t=>t.operationType===a.OperationType.BALANCE_TRANSFER_RANGE&&t.currencyCode.rawValue===e.currencyCode.rawValue&&t.contractAddress===e.contractAddress));if(!n)return;t.hasAggregatedTransfers=!0;const o=n.toAddress.toLowerCase()===r.toLowerCase();return s(e,r,(()=>{if(o){const t=n.startAmountValue-e.startAmountValue,r=n.endAmountValue-e.endAmountValue;if(BigInt(t)>0n)n.startAmountValue=t;else{const e=n.fromAddress;n.fromAddress=n.toAddress,n.toAddress=e,n.startAmountValue=-t}if(BigInt(r)>0n)n.endAmountValue=r;else{const e=n.fromAddress;n.fromAddress=n.toAddress,n.toAddress=e,n.endAmountValue=-r}}else n.startAmountValue+=e.startAmountValue,n.endAmountValue+=e.endAmountValue}),(()=>{if(o)n.startAmountValue+=e.startAmountValue,n.endAmountValue+=e.endAmountValue;else{const t=n.startAmountValue-e.startAmountValue,r=n.endAmountValue-e.endAmountValue;if(BigInt(t)>0n)n.startAmountValue=t;else{const e=n.fromAddress;n.fromAddress=n.toAddress,n.toAddress=e,n.startAmountValue=-t}if(BigInt(r)>0n)n.endAmountValue=t;else{const e=n.fromAddress;n.fromAddress=n.toAddress,n.toAddress=e,n.endAmountValue=-t}}})),t}}}]);
//# sourceMappingURL=7646.js.map